"use strict";var wL=Object.defineProperty,EL=Object.defineProperties,bL=Object.getOwnPropertyDescriptors,sk=Object.getOwnPropertySymbols,IL=Object.prototype.hasOwnProperty,CL=Object.prototype.propertyIsEnumerable,ok=(Ke,_e,N)=>_e in Ke?wL(Ke,_e,{enumerable:!0,configurable:!0,writable:!0,value:N}):Ke[_e]=N,ak=(Ke,_e)=>{for(var N in _e||(_e={}))IL.call(_e,N)&&ok(Ke,N,_e[N]);if(sk)for(var N of sk(_e))CL.call(_e,N)&&ok(Ke,N,_e[N]);return Ke},uk=(Ke,_e)=>EL(Ke,bL(_e));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Ke,_e,N)=>{N.d(_e,{Dh:()=>ae,GT:()=>pe,cc:()=>ke,hO:()=>Ge,on:()=>G,pX:()=>re,xv:()=>he});var c=N(5e3),ee=N(127),O=N(5813);Ke=N.hmd(Ke);const se=["ngOnDestroy"],re=(Ce,Ye,it,Me={})=>new Proxy(Ce,{get:(Ie,De)=>it.runOutsideAngular(()=>{var He;if(Ce[De])return(null===(He=null==Me?void 0:Me.spy)||void 0===He?void 0:He.get)&&Me.spy.get(De,Ce[De]),Ce[De];if(se.indexOf(De)>-1)return()=>{};const je=Ye.toPromise().then($=>{const Ee=$&&$[De];return"function"==typeof Ee?Ee.bind($):Ee&&Ee.then?Ee.then(Z=>it.run(()=>Z)):it.run(()=>Ee)});return new Proxy(()=>{},{get:($,Ee)=>je[Ee],apply:($,Ee,Z)=>je.then(ie=>{var te;const me=ie&&ie(...Z);return(null===(te=null==Me?void 0:Me.spy)||void 0===te?void 0:te.apply)&&Me.spy.apply(De,Z,me),me})})})}),pe=(Ce,Ye)=>{Ye.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(Me=>{Object.defineProperty(Ce.prototype,Me,Object.getOwnPropertyDescriptor(it.prototype||it,Me))})})};class de{constructor(Ye){return Ye}}const ae=new c.OlP("angularfire2.app.options"),he=new c.OlP("angularfire2.app.name");function G(Ce,Ye,it){const Ie="object"==typeof it&&it||{};Ie.name=Ie.name||"string"==typeof it&&it||"[DEFAULT]";const He=ee.Z.apps.filter(je=>je&&je.name===Ie.name)[0]||Ye.runOutsideAngular(()=>ee.Z.initializeApp(Ce,Ie));try{JSON.stringify(Ce)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new de(He)}const H=(Ce,...Ye)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ye)},K={provide:de,useFactory:G,deps:[ae,c.R0b,[new c.FiY,he]]};let Ge=(()=>{class Ce{constructor(it){ee.Z.registerVersion("angularfire",O.q4.full,"core"),ee.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ee.Z.registerVersion("angular",c.q4F.full,it.toString())}static initializeApp(it,Me){return{ngModule:Ce,providers:[{provide:ae,useValue:it},{provide:he,useValue:Me}]}}}return Ce.\u0275fac=function(it){return new(it||Ce)(c.LFG(c.Lbi))},Ce.\u0275mod=c.oAB({type:Ce}),Ce.\u0275inj=c.cJS({providers:[K]}),Ce})();function ke(Ce,Ye,it,Me,Ie){const[,De,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ce)||[];if(De)return function Se(Ce,Ye){try{return Ce.toString()===Ye.toString()}catch(it){return Ce===Ye}}(Ie,He)||(ve("error",`${Ye} was already initialized on the ${it} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Ie,was:He})),De;{const je=Me();return globalThis.\u0275AngularfireInstanceCache.push([Ce,je,Ie]),je}}const nt=!!Ke.hot,ve=(Ce,...Ye)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ke,_e,N)=>{N.d(_e,{q4:()=>$a,iC:()=>tf,fc:()=>ir,HU:()=>bd,vb:()=>ng,JM:()=>ia});var c=N(5e3),ee=N(5867),O=N(5861),se=N(9681),re=N(2090),pe=N(4859),de=N(1877),ae=N(8766);const he="@firebase/installations",G="0.5.11",K=`w:${G}`,Ge="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function Me({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function De(C,D){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(C,D){const F=(yield D.json()).error;return Ye.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $(C,{refreshToken:D}){const M=je(C);return M.append("Authorization",function te(C){return`${Ge} ${C}`}(D)),M}function Ee(C){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function me(C,D){return ue.apply(this,arguments)}function ue(){return(ue=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const F=Me(C),W=je(C),ne=D.getImmediate({optional:!0});if(ne){const vt=yield ne.getHeartbeatsHeader();vt&&W.append("x-firebase-client",vt)}const $e={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Ge,appId:C.appId,sdkVersion:K})},Xe=yield Ee(()=>fetch(F,$e));if(Xe.ok){const vt=yield Xe.json();return{fid:vt.fid||M,registrationStatus:2,refreshToken:vt.refreshToken,authToken:Ie(vt.authToken)}}throw yield De("Create Installation",Xe)})).apply(this,arguments)}function Pe(C){return new Promise(D=>{setTimeout(D,C)})}const jt=/^[cdef][\w-]{21}$/;function ze(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function Kt(C){return function lt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return jt.test(M)?M:""}catch(C){return""}}function mn(C){return`${C.appName}!${C.appId}`}const Xt=new Map;function qt(C,D){const M=mn(C);Ot(M,D),function ss(C,D){const M=function cr(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=C=>{Ot(C.data.key,C.data.fid)}),ti}();M&&M.postMessage({key:C,fid:D}),function Tr(){0===Xt.size&&ti&&(ti.close(),ti=null)}()}(M,D)}function Ot(C,D){const M=Xt.get(C);if(M)for(const F of M)F(D)}let ti=null;const ni="firebase-installations-store";let gi=null;function wt(){return gi||(gi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(ni)}})),gi}function ri(C,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(C,D){const M=mn(C),W=(yield wt()).transaction(ni,"readwrite"),ne=W.objectStore(ni),le=yield ne.get(M);return yield ne.put(D,M),yield W.done,(!le||le.fid!==D.fid)&&qt(C,D.fid),D})).apply(this,arguments)}function yn(C){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(C){const D=mn(C),F=(yield wt()).transaction(ni,"readwrite");yield F.objectStore(ni).delete(D),yield F.done})).apply(this,arguments)}function ii(C,D){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(C,D){const M=mn(C),W=(yield wt()).transaction(ni,"readwrite"),ne=W.objectStore(ni),le=yield ne.get(M),$e=D(le);return void 0===$e?yield ne.delete(M):yield ne.put($e,M),yield W.done,$e&&(!le||le.fid!==$e.fid)&&qt(C,$e.fid),$e})).apply(this,arguments)}function Tn(C){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(C){let D;const M=yield ii(C.appConfig,F=>{const W=Uo(F),ne=$t(C,W);return D=ne.registrationPromise,ne.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Uo(C){return ks(C||{fid:ze(),registrationStatus:0})}function $t(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ye.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ot(C,D){return bt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:dr(C)}:{installationEntry:D}}function bt(){return(bt=(0,O.Z)(function*(C,D){try{const M=yield me(C,D);return ri(C.appConfig,M)}catch(M){throw it(M)&&409===M.customData.serverCode?yield yn(C.appConfig):yield ri(C.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function dr(C){return si.apply(this,arguments)}function si(){return(si=(0,O.Z)(function*(C){let D=yield Vt(C.appConfig);for(;1===D.registrationStatus;)yield Pe(100),D=yield Vt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Tn(C);return F||M}return D})).apply(this,arguments)}function Vt(C){return ii(C,D=>{if(!D)throw Ye.create("installation-not-found");return ks(D)})}function ks(C){return function Ar(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function hr(C,D){return ct.apply(this,arguments)}function ct(){return(ct=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const F=z(C,M),W=$(C,M),ne=D.getImmediate({optional:!0});if(ne){const vt=yield ne.getHeartbeatsHeader();vt&&W.append("x-firebase-client",vt)}const $e={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:K,appId:C.appId}})},Xe=yield Ee(()=>fetch(F,$e));if(Xe.ok)return Ie(yield Xe.json());throw yield De("Generate Auth Token",Xe)})).apply(this,arguments)}function z(C,{fid:D}){return`${Me(C)}/${D}/authTokens:generate`}function V(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,O.Z)(function*(C,D=!1){let M;const F=yield ii(C.appConfig,ne=>{if(!It(ne))throw Ye.create("not-registered");const le=ne.authToken;if(!D&&Zt(le))return ne;if(1===le.requestStatus)return M=Y(C,D),ne;{if(!navigator.onLine)throw Ye.create("app-offline");const $e=Nt(ne);return M=Ue(C,$e),$e}});return M?yield M:F.authToken})).apply(this,arguments)}function Y(C,D){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*(C,D){let M=yield we(C.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield we(C.appConfig);const F=M.authToken;return 0===F.requestStatus?V(C,D):F})).apply(this,arguments)}function we(C){return ii(C,D=>{if(!It(D))throw Ye.create("not-registered");return function An(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ue(C,D){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(C,D){try{const M=yield hr(C,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield ri(C.appConfig,F),M}catch(M){if(!it(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ri(C.appConfig,F)}else yield yn(C.appConfig);throw M}})).apply(this,arguments)}function It(C){return void 0!==C&&2===C.registrationStatus}function Zt(C){return 2===C.requestStatus&&!function Yt(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Nt(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function no(){return(no=(0,O.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:F}=yield Tn(D);return F?F.catch(console.error):V(D).catch(console.error),M.fid})).apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(C,D=!1){const M=C;return yield Fn(M),(yield V(M,D)).token})).apply(this,arguments)}function Fn(C){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(C){const{registrationPromise:D}=yield Tn(C);D&&(yield D)})).apply(this,arguments)}function Bo(C){return Ye.create("missing-app-config-values",{valueName:C})}const Hr="installations",at=C=>{const D=C.getProvider("app").getImmediate(),M=function Xn(C){if(!C||!C.options)throw Bo("App Configuration");if(!C.name)throw Bo("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw Bo(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Qt=C=>{const D=C.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,Hr).getImmediate();return{getId:()=>function Rs(C){return no.apply(this,arguments)}(M),getToken:W=>function cu(C){return Ta.apply(this,arguments)}(M,W)}};(function Gr(){(0,se._registerComponent)(new pe.wA(Hr,at,"PUBLIC")),(0,se._registerComponent)(new pe.wA("installations-internal",Qt,"PRIVATE"))})(),(0,se.registerVersion)(he,G),(0,se.registerVersion)(he,G,"esm2017");const Ni="@firebase/remote-config",_n=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gp{constructor(D,M,F,W){this.client=D,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${W}.`),W}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return W;D.eTag=W&&W.eTag;const ne=yield M.client.fetch(D),le=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&le.push(M.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(le),ne})()}}function Yc(C=navigator){return C.languages&&C.languages[0]||C.language}class fr{constructor(D,M,F,W,ne,le){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=ne,this.appId=le}fetch(D){var M=this;return(0,O.Z)(function*(){var F,W,ne;const[le,$e]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},dt={sdk_version:M.sdkVersion,app_instance_id:le,app_instance_id_token:$e,app_id:M.appId,language_code:Yc()},ln={method:"POST",headers:kt,body:JSON.stringify(dt)},Wr=fetch(vt,ln),ys=new Promise((Ii,vs)=>{D.signal.addEventListener(()=>{const aa=new Error("The operation was aborted.");aa.name="AbortError",vs(aa)})});let ci;try{yield Promise.race([Wr,ys]),ci=yield Wr}catch(Ii){let vs="fetch-client-network";throw"AbortError"===(null===(F=Ii)||void 0===F?void 0:F.name)&&(vs="fetch-timeout"),_n.create(vs,{originalErrorMessage:null===(W=Ii)||void 0===W?void 0:W.message})}let di=ci.status;const _s=ci.headers.get("ETag")||void 0;let oa,bi;if(200===ci.status){let Ii;try{Ii=yield ci.json()}catch(vs){throw _n.create("fetch-client-parse",{originalErrorMessage:null===(ne=vs)||void 0===ne?void 0:ne.message})}oa=Ii.entries,bi=Ii.state}if("INSTANCE_STATE_UNSPECIFIED"===bi?di=500:"NO_CHANGE"===bi?di=304:("NO_TEMPLATE"===bi||"EMPTY_CONFIG"===bi)&&(oa={}),304!==di&&200!==di)throw _n.create("fetch-status",{httpStatus:di});return{status:di,eTag:_s,config:oa}})()}}class qp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function Fs(C,D){return new Promise((M,F)=>{const W=Math.max(D-Date.now(),0),ne=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(ne),F(_n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ne=yield W.client.fetch(D);return yield W.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Qc(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const le={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(le),W.attemptFetch(D,le)}})()}}class Xc{constructor(D,M,F,W,ne){this.app=D,this._client=M,this._storageCache=F,this._storage=W,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Al(C,D){var M;const F=C.target.error||void 0;return _n.create(D,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const Ls="app_namespace_store";class Wp{constructor(D,M,F,W=function zp(){return new Promise((C,D)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=W=>{D(Al(W,"storage-open"))},F.onsuccess=W=>{C(W.target.result)},F.onupgradeneeded=W=>{0===W.oldVersion&&W.target.result.createObjectStore(Ls,{keyPath:"compositeKey"})}}catch(F){D(_n.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,ne)=>{var le;const Xe=F.transaction([Ls],"readonly").objectStore(Ls),vt=M.createCompositeKey(D);try{const kt=Xe.get(vt);kt.onerror=dt=>{ne(Al(dt,"storage-get"))},kt.onsuccess=dt=>{const ln=dt.target.result;W(ln?ln.value:void 0)}}catch(kt){ne(_n.create("storage-get",{originalErrorMessage:null===(le=kt)||void 0===le?void 0:le.message}))}})})()}set(D,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((ne,le)=>{var $e;const vt=W.transaction([Ls],"readwrite").objectStore(Ls),kt=F.createCompositeKey(D);try{const dt=vt.put({compositeKey:kt,value:M});dt.onerror=ln=>{le(Al(ln,"storage-set"))},dt.onsuccess=()=>{ne()}}catch(dt){le(_n.create("storage-set",{originalErrorMessage:null===($e=dt)||void 0===$e?void 0:$e.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,ne)=>{var le;const Xe=F.transaction([Ls],"readwrite").objectStore(Ls),vt=M.createCompositeKey(D);try{const kt=Xe.delete(vt);kt.onerror=dt=>{ne(Al(dt,"storage-delete"))},kt.onsuccess=()=>{W()}}catch(kt){ne(_n.create("storage-delete",{originalErrorMessage:null===(le=kt)||void 0===le?void 0:le.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class td{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),W=D.storage.getActiveConfig(),ne=yield M;ne&&(D.lastFetchStatus=ne);const le=yield F;le&&(D.lastSuccessfulFetchTimestampMillis=le);const $e=yield W;$e&&(D.activeConfig=$e)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function pu(){return nd.apply(this,arguments)}function nd(){return(nd=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}!function jo(){(0,se._registerComponent)(new pe.wA("remote-config",function C(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),W=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _n.create("registration-window");if(!(0,re.hl)())throw _n.create("indexed-db-unavailable");const{projectId:ne,apiKey:le,appId:$e}=F.options;if(!ne)throw _n.create("registration-project-id");if(!le)throw _n.create("registration-api-key");if(!$e)throw _n.create("registration-app-id");const Xe=new Wp($e,F.name,M=M||"firebase"),vt=new td(Xe),kt=new de.Yd(Ni);kt.logLevel=de.in.ERROR;const dt=new fr(W,se.SDK_VERSION,M,ne,le,$e),ln=new qp(dt,Xe),Wr=new Gp(ln,Xe,vt,kt),ys=new Xc(F,Wr,vt,Xe,kt);return function en(C){const D=(0,re.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ys),ys},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Ni,"0.3.10"),(0,se.registerVersion)(Ni,"0.3.10","esm2017")}();const rd="/firebase-messaging-sw.js",er="/firebase-cloud-messaging-push-scope",so="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$o="google.c.a.c_id",id="google.c.a.c_l",Yh="google.c.a.ts",ka="google.c.a.e";var Ho=(()=>{return(C=Ho||(Ho={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ho;var C})();function xr(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sd(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)W[ne]=F.charCodeAt(ne);return W}const Mr="fcm_token_details_db",oi="fcm_token_object_Store";function Sl(C){return od.apply(this,arguments)}function od(){return od=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Mr))return null;let D=null;return(yield(0,ae.X3)(Mr,5,{upgrade:(F=(0,O.Z)(function*(W,ne,le,$e){var Xe;if(ne<2||!W.objectStoreNames.contains(oi))return;const vt=$e.objectStore(oi),kt=yield vt.index("fcmSenderId").get(C);if(yield vt.clear(),kt)if(2===ne){const dt=kt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;D={token:dt.fcmToken,createTime:null!==(Xe=dt.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:xr(dt.vapidKey)}}}else if(3===ne){const dt=kt;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:xr(dt.auth),p256dh:xr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:xr(dt.vapidKey)}}}else if(4===ne){const dt=kt;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:xr(dt.auth),p256dh:xr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:xr(dt.vapidKey)}}}}),function(ne,le,$e,Xe){return F.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Mr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),xl(D)?D:null;var F}),od.apply(this,arguments)}function xl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ui="firebase-messaging-store";let Qh=null;function tn(){return Qh||(Qh=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ui)}})),Qh}function Ra(C){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(C){const D=tr(C),F=yield(yield tn()).transaction(Ui).objectStore(Ui).get(D);if(F)return F;{const W=yield Sl(C.appConfig.senderId);if(W)return yield zt(C,W),W}})).apply(this,arguments)}function zt(C,D){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(C,D){const M=tr(C),W=(yield tn()).transaction(Ui,"readwrite");return yield W.objectStore(Ui).put(D,M),yield W.done,D})).apply(this,arguments)}function gu(C){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*(C){const D=tr(C),F=(yield tn()).transaction(Ui,"readwrite");yield F.objectStore(Ui).delete(D),yield F.done})).apply(this,arguments)}function tr({appConfig:C}){return C.appId}const dn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bi(C,D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(C,D){var M;const F=yield Zo(C),W=Us(D),ne={method:"POST",headers:F,body:JSON.stringify(W)};let le;try{le=yield(yield fetch(ji(C.appConfig),ne)).json()}catch($e){throw dn.create("token-subscribe-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(le.error)throw dn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw dn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function uo(C,D){return us.apply(this,arguments)}function us(){return(us=(0,O.Z)(function*(C,D){var M;const F=yield Zo(C),W=Us(D.subscriptionOptions),ne={method:"PATCH",headers:F,body:JSON.stringify(W)};let le;try{le=yield(yield fetch(`${ji(C.appConfig)}/${D.token}`,ne)).json()}catch($e){throw dn.create("token-update-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(le.error)throw dn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw dn.create("token-update-no-token");return le.token})).apply(this,arguments)}function Oa(C,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(C,D){var M;const W={method:"DELETE",headers:yield Zo(C)};try{const le=yield(yield fetch(`${ji(C.appConfig)}/${D}`,W)).json();if(le.error)throw dn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(ne){throw dn.create("token-unsubscribe-failed",{errorInfo:null===(M=ne)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ji({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Zo(C){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Us({p256dh:C,auth:D,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:D,p256dh:C}};return F!==so&&(W.web.applicationPubKey=F),W}const Rl=6048e5;function Pa(C){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,O.Z)(function*(C){const D=yield Wo(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:xr(D.getKey("auth")),p256dh:xr(D.getKey("p256dh"))},F=yield Ra(C.firebaseDependencies);if(F){if(_u(F.subscriptionOptions,M))return Date.now()>=F.createTime+Rl?Ol(C,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Oa(C.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Ae(C.firebaseDependencies,M)}return Ae(C.firebaseDependencies,M)})).apply(this,arguments)}function mu(C){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(C){const D=yield Ra(C.firebaseDependencies);D&&(yield Oa(C.firebaseDependencies,D.token),yield gu(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ol(C,D){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(C,D){try{const M=yield uo(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield zt(C.firebaseDependencies,F),M}catch(M){throw yield mu(C),M}})).apply(this,arguments)}function Ae(C,D){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(C,D){const F={token:yield Bi(C,D),createTime:Date.now(),subscriptionOptions:D};return yield zt(C,F),F.token})).apply(this,arguments)}function Wo(C,D){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sd(D)})})).apply(this,arguments)}function _u(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function lo(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ai(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const F=D.notification.body;F&&(C.notification.body=F);const W=D.notification.image;W&&(C.notification.image=W)}(D,C),function Pl(C,D){!D.data||(C.data=D.data)}(D,C),function Fl(C,D){var M,F,W,ne,le;if(!D.fcmOptions&&!(null===(M=D.notification)||void 0===M?void 0:M.click_action))return;C.fcmOptions={};const $e=null!==(W=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(ne=D.notification)||void 0===ne?void 0:ne.click_action;$e&&(C.fcmOptions.link=$e);const Xe=null===(le=D.fcmOptions)||void 0===le?void 0:le.analytics_label;Xe&&(C.fcmOptions.analyticsLabel=Xe)}(D,C),D}function Ll(C){return"object"==typeof C&&!!C&&$o in C}function ad(C,D){const M=[];for(let F=0;F<C.length;F++)M.push(C.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function ls(C){return dn.create("missing-app-config-values",{valueName:C})}ad("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ad("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pr{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Kp(C){if(!C||!C.options)throw ls("App Configuration Object");if(!C.name)throw ls("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const F of D)if(!M[F])throw ls(F);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ui(C){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(rd,{scope:er}),C.swRegistration.update().catch(()=>{})}catch(M){throw dn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Bs(C,D){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield ui(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Vl(C,D){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=so)})).apply(this,arguments)}function Ul(){return(Ul=(0,O.Z)(function*(C,D){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield Vl(C,null==D?void 0:D.vapidKey),yield Bs(C,null==D?void 0:D.serviceWorkerRegistration),Pa(C)})).apply(this,arguments)}function Fa(C,D,M){return bu.apply(this,arguments)}function bu(){return(bu=(0,O.Z)(function*(C,D,M){const F=Iu(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[$o],message_name:M[id],message_time:M[Yh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Iu(C){switch(C){case Ho.NOTIFICATION_CLICKED:return"notification_open";case Ho.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ld(){return(ld=(0,O.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Ho.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(lo(M)):C.onMessageHandler.next(lo(M)));const F=M.data;Ll(F)&&"1"===F[ka]&&(yield Fa(C,M.messageType,F))})).apply(this,arguments)}const Cu="@firebase/messaging",cd=C=>{const D=new pr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function ud(C,D){return ld.apply(this,arguments)}(D,M)),D},Ko=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function Eu(C,D){return Ul.apply(this,arguments)}(D,F)}};function Du(){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dd(){(0,se._registerComponent)(new pe.wA("messaging",cd,"PUBLIC")),(0,se._registerComponent)(new pe.wA("messaging-internal",Ko,"PRIVATE")),(0,se.registerVersion)(Cu,"0.9.15"),(0,se.registerVersion)(Cu,"0.9.15","esm2017")}();const fd="analytics",Qp="firebase_id",cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fo="https://www.googletagmanager.com/gtag/js",Un=new de.Yd("@firebase/analytics");function pd(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function Jp(C,D){const M=document.createElement("script");M.src=`${fo}?l=${C}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Yo(C,D,M,F,W,ne){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,O.Z)(function*(C,D,M,F,W,ne){const le=F[W];try{if(le)yield D[le];else{const Xe=(yield pd(M)).find(vt=>vt.measurementId===W);Xe&&(yield D[Xe.appId])}}catch($e){Un.error($e)}C("config",W,ne)})).apply(this,arguments)}function Xp(C,D,M,F,W){return ds.apply(this,arguments)}function ds(){return(ds=(0,O.Z)(function*(C,D,M,F,W){try{let ne=[];if(W&&W.send_to){let le=W.send_to;Array.isArray(le)||(le=[le]);const $e=yield pd(M);for(const Xe of le){const vt=$e.find(dt=>dt.measurementId===Xe),kt=vt&&D[vt.appId];if(!kt){ne=[];break}ne.push(kt)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),C("event",F,W||{})}catch(ne){Un.error(ne)}})).apply(this,arguments)}function nn(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(fo))return D;return null}const st=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ua=new class vn{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function gd(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Qo(C){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(C){var D;const{appId:M,apiKey:F}=C,W={method:"GET",headers:gd(F)},ne=cs.replace("{app-id}",M),le=yield fetch(ne,W);if(200!==le.status&&304!==le.status){let $e="";try{const Xe=yield le.json();(null===(D=Xe.error)||void 0===D?void 0:D.message)&&($e=Xe.error.message)}catch(Xe){}throw st.create("config-fetch-failed",{httpStatus:le.status,responseMessage:$e})}return le.json()})).apply(this,arguments)}function wn(C){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(C,D=Ua,M){const{appId:F,apiKey:W,measurementId:ne}=C.options;if(!F)throw st.create("no-app-id");if(!W){if(ne)return{measurementId:ne,appId:F};throw st.create("no-api-key")}const le=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new jl;return setTimeout((0,O.Z)(function*(){$e.abort()}),void 0!==M?M:6e4),$i({appId:F,apiKey:W,measurementId:ne},le,$e,D)})).apply(this,arguments)}function $i(C,D,M){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},F,W=Ua){var ne,le;const{appId:$e,measurementId:Xe}=C;try{yield md(F,D)}catch(vt){if(Xe)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null===(ne=vt)||void 0===ne?void 0:ne.message}]`),{appId:$e,measurementId:Xe};throw vt}try{const vt=yield Qo(C);return W.deleteThrottleMetadata($e),vt}catch(vt){const kt=vt;if(!yd(kt)){if(W.deleteThrottleMetadata($e),Xe)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null==kt?void 0:kt.message}]`),{appId:$e,measurementId:Xe};throw vt}const dt=503===Number(null===(le=null==kt?void 0:kt.customData)||void 0===le?void 0:le.httpStatus)?(0,re.$s)(M,W.intervalMillis,30):(0,re.$s)(M,W.intervalMillis),ln={throttleEndTimeMillis:Date.now()+dt,backoffCount:M+1};return W.setThrottleMetadata($e,ln),Un.debug(`Calling attemptFetch again in ${dt} millis`),$i(C,ln,F,W)}})).apply(this,arguments)}function md(C,D){return new Promise((M,F)=>{const W=Math.max(D-Date.now(),0),ne=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(ne),F(st.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function yd(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class jl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function $l(){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(){var C;if(!(0,re.hl)())return Un.warn(st.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Un.warn(st.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(C,D,M,F,W,ne,le){var $e;const Xe=wn(C);Xe.then(Wr=>{M[Wr.measurementId]=Wr.appId,C.options.measurementId&&Wr.measurementId!==C.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Wr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wr=>Un.error(Wr)),D.push(Xe);const vt=$l().then(Wr=>{if(Wr)return F.getId()}),[kt,dt]=yield Promise.all([Xe,vt]);nn()||Jp(ne,kt.measurementId),W("js",new Date);const ln=null!==($e=null==le?void 0:le.config)&&void 0!==$e?$e:{};return ln.origin="firebase",ln.update=!0,null!=dt&&(ln[Qp]=dt),W("config",kt.measurementId,ln),kt.measurementId})).apply(this,arguments)}class mo{constructor(D){this.app=D}_delete(){return delete rr[this.app.options.appId],Promise.resolve()}}let rr={},yo=[];const _o={};let Xo,qs,Jo="dataLayer",vo=!1;function hs(C,D,M){!function Ba(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=st.create("invalid-analytics-context",{errorInfo:D});Un.warn(M.message)}}();const F=C.options.appId;if(!F)throw st.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw st.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=rr[F])throw st.create("already-exists",{id:F});if(!vo){!function po(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Jo);const{wrappedGtag:ne,gtagCore:le}=function eg(C,D,M,F,W){let ne=function(...le){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(ne=window[W]),window[W]=function Au(C,D,M,F){function ne(){return(ne=(0,O.Z)(function*(le,$e,Xe){try{"event"===le?yield Xp(C,D,M,$e,Xe):"config"===le?yield Yo(C,D,M,F,$e,Xe):C("set",$e)}catch(vt){Un.error(vt)}})).apply(this,arguments)}return function W(le,$e,Xe){return ne.apply(this,arguments)}}(ne,C,D,M),{gtagCore:ne,wrappedGtag:window[W]}}(rr,yo,_o,Jo,"gtag");qs=ne,Xo=le,vo=!0}return rr[F]=function Hs(C,D,M,F,W,ne,le){return go.apply(this,arguments)}(C,yo,_o,D,Xo,Jo,M),new mo(C)}function jn(){return(jn=(0,O.Z)(function*(C,D,M,F,W){if(W&&W.global)C("event",M,F);else{const ne=yield D;C("event",M,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function qi(){return Su.apply(this,arguments)}function Su(){return(Su=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}const Rr="@firebase/analytics";!function zs(){(0,se._registerComponent)(new pe.wA(fd,(D,{options:M})=>hs(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new pe.wA("analytics-internal",function C(D){try{const M=D.getProvider(fd).getImmediate();return{logEvent:(F,W,ne)=>function ea(C,D,M,F){C=(0,re.m9)(C),function wo(C,D,M,F,W){return jn.apply(this,arguments)}(qs,rr[C.app.options.appId],D,M,F).catch(W=>Un.error(W))}(M,F,W,ne)}}catch(M){throw st.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Rr,"0.7.11"),(0,se.registerVersion)(Rr,"0.7.11","esm2017")}();var vd=N(4408),Zl=N(7565);const ja=new class kn extends Zl.v{}(class Zi extends vd.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var wd=N(4986),ef=N(8505),gr=N(5363),Nr=N(9468);const $a=new c.GfV("7.4.1"),ta="__angularfire_symbol__analyticsIsSupportedValue",ps="__angularfire_symbol__analyticsIsSupported",Ws="__angularfire_symbol__remoteConfigIsSupportedValue",gs="__angularfire_symbol__remoteConfigIsSupported",na="__angularfire_symbol__messagingIsSupportedValue",Mt="__angularfire_symbol__messagingIsSupported";function ia(C,D,M){if(D){if(1===D.length)return D[0];const ne=D.filter(le=>le.app===M);if(1===ne.length)return ne[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[ps]||(globalThis[ps]=qi().then(C=>globalThis[ta]=C).catch(()=>globalThis[ta]=!1)),globalThis[Mt]||(globalThis[Mt]=Du().then(C=>globalThis[na]=C).catch(()=>globalThis[na]=!1)),globalThis[gs]||(globalThis[gs]=pu().then(C=>globalThis[Ws]=C).catch(()=>globalThis[Ws]=!1));const ng=(C,D)=>{const M=D?[D]:(0,ee.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(C).instances.forEach(le=>{F.includes(le)||F.push(le)})}),F};function ms(){}class Ei{constructor(D,M=ja){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const W=this.zone;return this.delegate.schedule(function(le){W.runGuarded(()=>{D.apply(this,[le])})},M,F)}}class Mu{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)),M.pipe((0,ef.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bd=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ei(Zone.current)),this.insideAngular=M.run(()=>new Ei(Zone.current,wd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function zi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ir(C){return C.pipe((0,gr.Q)(zi().outsideAngular))}function tf(C){return zi(),function Ks(C){return function(M){return(M=M.lift(new Mu(C.ngZone))).pipe((0,Nr.R)(C.outsideAngular),(0,gr.Q)(C.insideAngular))}}(zi())(C)}},2090:(Ke,_e,N)=>{N.d(_e,{$s:()=>ks,BH:()=>Ge,G6:()=>je,L:()=>ae,LL:()=>ue,Mn:()=>De,Sg:()=>ke,UG:()=>ve,US:()=>pe,ZB:()=>H,ZR:()=>me,b$:()=>it,d:()=>Me,eu:()=>Ee,hl:()=>$,jU:()=>Ce,m9:()=>ct,ne:()=>gi,pd:()=>Ms,r3:()=>Dr,ru:()=>Ye,tV:()=>he,uI:()=>nt,vZ:()=>ti,w1:()=>Ie,xO:()=>Tr,xb:()=>Ot,z$:()=>Se,zI:()=>Z,zd:()=>Ri});const se=function(z){const V=[];let Q=0;for(let Y=0;Y<z.length;Y++){let L=z.charCodeAt(Y);L<128?V[Q++]=L:L<2048?(V[Q++]=L>>6|192,V[Q++]=63&L|128):55296==(64512&L)&&Y+1<z.length&&56320==(64512&z.charCodeAt(Y+1))?(L=65536+((1023&L)<<10)+(1023&z.charCodeAt(++Y)),V[Q++]=L>>18|240,V[Q++]=L>>12&63|128,V[Q++]=L>>6&63|128,V[Q++]=63&L|128):(V[Q++]=L>>12|224,V[Q++]=L>>6&63|128,V[Q++]=63&L|128)}return V},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,V){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let L=0;L<z.length;L+=3){const we=z[L],Ue=L+1<z.length,et=Ue?z[L+1]:0,It=L+2<z.length,Zt=It?z[L+2]:0;let An=(15&et)<<2|Zt>>6,Rs=63&Zt;It||(Rs=64,Ue||(An=64)),Y.push(Q[we>>2],Q[(3&we)<<4|et>>4],Q[An],Q[Rs])}return Y.join("")},encodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(z):this.encodeByteArray(se(z),V)},decodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(z):function(z){const V=[];let Q=0,Y=0;for(;Q<z.length;){const L=z[Q++];if(L<128)V[Y++]=String.fromCharCode(L);else if(L>191&&L<224){const we=z[Q++];V[Y++]=String.fromCharCode((31&L)<<6|63&we)}else if(L>239&&L<365){const It=((7&L)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;V[Y++]=String.fromCharCode(55296+(It>>10)),V[Y++]=String.fromCharCode(56320+(1023&It))}else{const we=z[Q++],Ue=z[Q++];V[Y++]=String.fromCharCode((15&L)<<12|(63&we)<<6|63&Ue)}}return V.join("")}(this.decodeStringToByteArray(z,V))},decodeStringToByteArray(z,V){this.init_();const Q=V?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let L=0;L<z.length;){const we=Q[z.charAt(L++)],et=L<z.length?Q[z.charAt(L)]:0;++L;const Zt=L<z.length?Q[z.charAt(L)]:64;++L;const Nt=L<z.length?Q[z.charAt(L)]:64;if(++L,null==we||null==et||null==Zt||null==Nt)throw Error();Y.push(we<<2|et>>4),64!==Zt&&(Y.push(et<<4&240|Zt>>2),64!==Nt&&Y.push(Zt<<6&192|Nt))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ae=function(z){return function(z){const V=se(z);return pe.encodeByteArray(V,!0)}(z).replace(/\./g,"")},he=function(z){try{return pe.decodeString(z,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function H(z,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return V}for(const Q in V)!V.hasOwnProperty(Q)||!K(Q)||(z[Q]=H(z[Q],V[Q]));return z}function K(z){return"__proto__"!==z}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,Q)=>{this.resolve=V,this.reject=Q})}wrapCallback(V){return(Q,Y)=>{Q?this.reject(Q):this.resolve(Y),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(Q):V(Q,Y))}}}function ke(z,V){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=V||"demo-project",L=z.iat||0,we=z.sub||z.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:L,exp:L+3600,auth_time:L,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ue)),""].join(".")}function Se(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Se().indexOf("Electron/")>=0}function Ie(){const z=Se();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function De(){return Se().indexOf("MSAppHost/")>=0}function je(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function Ee(){return new Promise((z,V)=>{try{let Q=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",L=self.indexedDB.open(Y);L.onsuccess=()=>{L.result.close(),Q||self.indexedDB.deleteDatabase(Y),z(!0)},L.onupgradeneeded=()=>{Q=!1},L.onerror=()=>{var we;V((null===(we=L.error)||void 0===we?void 0:we.message)||"")}}catch(Q){V(Q)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(V,Q,Y){super(Q),this.code=V,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(V,Q,Y){this.service=V,this.serviceName=Q,this.errors=Y}create(V,...Q){const Y=Q[0]||{},L=`${this.service}/${V}`,we=this.errors[V],Ue=we?function Pe(z,V){return z.replace(lt,(Q,Y)=>{const L=V[Y];return null!=L?String(L):`<${Y}?>`})}(we,Y):"Error";return new me(L,`${this.serviceName}: ${Ue} (${L}).`,Y)}}const lt=/\{\$([^}]+)}/g;function Dr(z,V){return Object.prototype.hasOwnProperty.call(z,V)}function Ot(z){for(const V in z)if(Object.prototype.hasOwnProperty.call(z,V))return!1;return!0}function ti(z,V){if(z===V)return!0;const Q=Object.keys(z),Y=Object.keys(V);for(const L of Q){if(!Y.includes(L))return!1;const we=z[L],Ue=V[L];if(cr(we)&&cr(Ue)){if(!ti(we,Ue))return!1}else if(we!==Ue)return!1}for(const L of Y)if(!Q.includes(L))return!1;return!0}function cr(z){return null!==z&&"object"==typeof z}function Tr(z){const V=[];for(const[Q,Y]of Object.entries(z))Array.isArray(Y)?Y.forEach(L=>{V.push(encodeURIComponent(Q)+"="+encodeURIComponent(L))}):V.push(encodeURIComponent(Q)+"="+encodeURIComponent(Y));return V.length?"&"+V.join("&"):""}function Ri(z){const V={};return z.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[L,we]=Y.split("=");V[decodeURIComponent(L)]=decodeURIComponent(we)}}),V}function Ms(z){const V=z.indexOf("?");if(!V)return"";const Q=z.indexOf("#",V);return z.substring(V,Q>0?Q:void 0)}function gi(z,V){const Q=new wt(z,V);return Q.subscribe.bind(Q)}class wt{constructor(V,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{V(this)}).catch(Y=>{this.error(Y)})}next(V){this.forEachObserver(Q=>{Q.next(V)})}error(V){this.forEachObserver(Q=>{Q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,Q,Y){let L;if(void 0===V&&void 0===Q&&void 0===Y)throw new Error("Missing Observer.");L=function fn(z,V){if("object"!=typeof z||null===z)return!1;for(const Q of V)if(Q in z&&"function"==typeof z[Q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:Q,complete:Y},void 0===L.next&&(L.next=yn),void 0===L.error&&(L.error=yn),void 0===L.complete&&(L.complete=yn);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?L.error(this.finalError):L.complete()}catch(Ue){}}),this.observers.push(L),we}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,V)}sendOne(V,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{Q(this.observers[V])}catch(Y){"undefined"!=typeof console&&console.error&&console.error(Y)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function ks(z,V=1e3,Q=2){const Y=V*Math.pow(Q,z),L=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+L)}function ct(z){return z&&z._delegate?z._delegate:z}},2997:(Ke,_e,N)=>{var c=N(5e3);let ee=null;function O(){return ee}const de=new c.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function he(){return(0,c.LFG)(H)}()},providedIn:"platform"}),n})();const G=new c.OlP("Location Initialized");let H=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ge(){return new H((0,c.LFG)(de))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,c.LFG)(de).location;return new it((0,c.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new c.OlP("appBaseHref");let it=(()=>{class n extends ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+nt(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+nt(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae),c.LFG(Ye,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+nt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+nt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae),c.LFG(Ye,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Se(je(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=nt,n.joinWithSlash=ke,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(c.LFG(ve),c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function De(){return new Ie((0,c.LFG)(ve),(0,c.LFG)(ae))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var Ee=(()=>((Ee=Ee||{})[Ee.Decimal=0]="Decimal",Ee[Ee.Percent=1]="Percent",Ee[Ee.Currency=2]="Currency",Ee[Ee.Scientific=3]="Scientific",Ee))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function Ot(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===ue.CurrencyDecimal)return t[c.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[c.wAp.NumberSymbols][ue.Group]}return r}const Sr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Oi(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let qr=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Os{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Os(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),io(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{io(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function io(n,e){n.context.$implicit=e.item}let cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new en,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class en{constructor(){this.$implicit=null,this.ngIf=null}}function hu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function fr(n,e){return new c.vHH(2100,"")}class Fs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Qc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const qp=new Qc,as=new Fs;let Jc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return qp;if((0,c.F4k)(t))return as;throw fr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),er=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function Vi(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function Ze(n,e,t){return function Bo(n,e,t,r,s,u,d=!1){let m="",_=!1;if(isFinite(n)){let b=function Ni(n){let r,s,u,d,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],d=0;u<=m;u++,d++)r[d]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(b=function Gr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let A=e.minInt,k=e.minFrac,U=e.maxFrac;if(u){const _t=u.match(Sr);if(null===_t)throw new Error(`${u} is not a valid digit info`);const gt=_t[1],Ve=_t[3],We=_t[5];null!=gt&&(A=Oi(gt)),null!=Ve&&(k=Oi(Ve)),null!=We?U=Oi(We):null!=Ve&&k>U&&(U=k)}!function Sn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let d=u+n.integerLen,m=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let k=d;k<r.length;k++)r[k]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let k=1;k<d;k++)r[k]=0}if(m>=5)if(d-1<0){for(let k=0;k>d;k--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const b=e+n.integerLen,A=r.reduceRight(function(k,U,B,X){return X[B]=(U+=k)<10?U:U-10,_&&(0===X[B]&&B>=b?X.pop():_=!1),U>=10?1:0},0);A&&(r.unshift(A),n.integerLen++)}(b,k,U);let B=b.digits,X=b.integerLen;const xe=b.exponent;let Oe=[];for(_=B.every(_t=>!_t);X<A;X++)B.unshift(0);for(;X<0;X++)B.unshift(0);X>0?Oe=B.splice(X,B.length):(Oe=B,B=[0]);const pt=[];for(B.length>=e.lgSize&&pt.unshift(B.splice(-e.lgSize,B.length).join(""));B.length>e.gSize;)pt.unshift(B.splice(-e.gSize,B.length).join(""));B.length&&pt.unshift(B.join("")),m=pt.join(Ot(t,r)),Oe.length&&(m+=Ot(t,s)+Oe.join("")),xe&&(m+=Ot(t,ue.Exponential)+"+"+xe)}else m=Ot(t,ue.Infinity);return m=n<0&&!_?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,function Qt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=d[0],_=d[1]||"";t.posPre=m.substr(0,m.indexOf("#"));for(let A=0;A<_.length;A++){const k=_.charAt(A);"0"===k?t.minFrac=t.maxFrac=A+1:"#"===k?t.maxFrac=A+1:t.posSuf+=k}const b=m.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const A=s.length-t.posPre.length-t.posSuf.length,k=u.indexOf("#");t.negPre=u.substr(0,k).replace(/'/g,""),t.negSuf=u.substr(k+A).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ss(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,Ee.Percent),Ot(e,ue.MinusSign)),e,ue.Group,ue.Decimal,t,!0).replace(new RegExp("%","g"),Ot(e,ue.PercentSign))}(function $o(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw fr()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"percent",type:n,pure:!0}),n})();let ka=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Go(n){return"server"===n}let xl=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new qo((0,c.LFG)(de),window)}),n})();class qo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ml(this.window.history)||Ml(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ml(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ao extends class Ra extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new ao)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Na(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function Vs(n){gu=gu||document.createElement("a"),gu.setAttribute("href",n);const e=gu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Sa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let gu,zt=null;const tr=new c.OlP("TRANSITION_ID"),dn=[{provide:c.ip1,useFactory:function kl(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[tr,de,c.zs3],multi:!0}];class Bi{static init(){(0,c.VLi)(new Bi)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(_){d=d||_,u--,0==u&&r(d)};s.forEach(function(_){_.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let nr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const uo=new c.OlP("EventManagerPlugins");let us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(uo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Oa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let _i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ji=(()=>{class n extends _i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zo))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Zo(n){O().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Us=/%COMP%/g;function zo(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?zo(n,s,t):(s=s.replace(Us,n),t.push(s))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wo=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new an(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ai(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Pl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=zo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(us),c.LFG(ji),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class an{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Et[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Et[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Et[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class ai extends an{constructor(e,t,r,s){super(e),this.component=r;const u=zo(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function yu(n){return"_ngcontent-%COMP%".replace(Us,n)}(s+"-"+r.id),this.hostAttr=function Ol(n){return"_nghost-%COMP%".replace(Us,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Pl extends an{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=zo(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fl=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ll=["alt","control","meta","shift"],Kp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ls={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ui=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="";if(Ll.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),d+=_+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=d,m}static getEventFullKey(t){let r="",s=function vu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ls.hasOwnProperty(e)&&(e=ls[e]))}return Kp[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Ll.forEach(u=>{u!=s&&pr[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Bs(){ao.makeCurrent(),Bi.init()},multi:!0},{provide:de,useFactory:function Vl(){return(0,c.RDi)(document),document},deps:[]}]),Ul=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function vi(){return new c.qLn},deps:[]},{provide:uo,useClass:Fl,multi:!0,deps:[de,c.R0b,c.Lbi]},{provide:uo,useClass:ui,multi:!0,deps:[de]},{provide:Wo,useClass:Wo,deps:[us,ji,c.AFp]},{provide:c.FYo,useExisting:Wo},{provide:_i,useExisting:ji},{provide:ji,useClass:ji,deps:[de]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:us,useClass:us,deps:[uo,c.R0b]},{provide:class tn{},useClass:nr,deps:[]}];let Fa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:tr,useExisting:c.AFp},dn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Ul,imports:[ka,c.hGG]}),n})();"undefined"!=typeof window&&window;var nn=N(8996),Va=N(3269);function st(...n){const e=(0,Va.yG)(n);return(0,nn.D)(n,e)}var kr=N(7579);class li extends kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var vn=N(9751);const{isArray:Ua}=Array,{getPrototypeOf:gd,prototype:Qo,keys:js}=Object;function wn(n){if(1===n.length){const e=n[0];if(Ua(e))return{args:e,keys:null};if(function $s(n){return n&&"object"==typeof n&&gd(n)===Qo}(e)){const t=js(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var $i=N(4671),yt=N(4004);const{isArray:md}=Array;function jl(n){return(0,yt.U)(e=>function yd(n,e){return md(e)?n(...e):n(e)}(n,e))}function $l(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Bn=N(5403),Hs=N(9672);function go(...n){const e=(0,Va.yG)(n),t=(0,Va.jO)(n),{args:r,keys:s}=wn(n);if(0===r.length)return(0,nn.D)([],e);const u=new vn.y(function mo(n,e,t=$i.y){return r=>{rr(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let _=0;_<s;_++)rr(e,()=>{const b=(0,nn.D)(n[_],e);let A=!1;b.subscribe((0,Bn.x)(r,k=>{u[_]=k,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>$l(s,d):$i.y));return t?u.pipe(jl(t)):u}function rr(n,e,t){n?(0,Hs.f)(t,n,e):e()}var yo=N(576);function _o(n,e){const t=(0,yo.m)(n)?n:()=>n,r=s=>s.error(t());return new vn.y(e?s=>e.schedule(r,0,s):r)}const Gs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xo=N(8189);function vo(...n){return function qs(){return(0,Xo.J)(1)}()((0,nn.D)(n,(0,Va.yG)(n)))}var Hl=N(8421);function Ba(n){return new vn.y(e=>{(0,Hl.Xf)(n()).subscribe(e)})}var hs=N(515),wo=N(727),jn=N(4482);function Gl(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Bn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Zs extends vn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Bn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wo.w0.EMPTY)}return e}refCount(){return Gl()(this)}}function un(n,e){return(0,jn.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,Bn.x)(r,_=>{null==s||s.unsubscribe();let b=0;const A=u++;(0,Hl.Xf)(n(_,A)).subscribe(s=(0,Bn.x)(r,k=>r.next(e?e(_,k,A,b++):k),()=>{s=null,m()}))},()=>{d=!0,m()}))})}var Hi=N(5698);function Eo(...n){const e=(0,Va.yG)(n);return(0,jn.e)((t,r)=>{(e?vo(n,t,e):vo(n,t)).subscribe(r)})}function fs(n,e,t,r,s){return(u,d)=>{let m=t,_=e,b=0;u.subscribe((0,Bn.x)(d,A=>{const k=b++;_=m?n(_,A,k):(m=!0,A),r&&d.next(_)},s&&(()=>{m&&d.next(_),d.complete()})))}}function Gi(n,e){return(0,jn.e)(fs(n,e,arguments.length>=2,!0))}function Wn(n,e){return(0,jn.e)((t,r)=>{let s=0;t.subscribe((0,Bn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function wi(n){return(0,jn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Bn.x)(t,void 0,void 0,d=>{u=(0,Hl.Xf)(n(d,wi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Mn=N(5577);function qi(n,e){return(0,yo.m)(e)?(0,Mn.z)(n,e,1):(0,Mn.z)(n,1)}function Su(n){return n<=0?()=>hs.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe((0,Bn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function ql(n=pn){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,Bn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function pn(){return new Gs}function Xh(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,Bn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function tg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((s,u)=>n(s,u,r)):$i.y,Su(1),t?Xh(e):ql(()=>new Gs))}function ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((s,u)=>n(s,u,r)):$i.y,(0,Hi.q)(1),t?Xh(e):ql(()=>new Gs))}var Rr=N(8505);class zs{constructor(e,t){this.id=e,this.url=t}}class vd extends zs{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zi extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zl extends zs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kn extends zs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ja extends zs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xu extends zs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wd extends zs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ef extends zs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gr extends zs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $a{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ta{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ps{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ws{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class Ed{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ra(n){return new Ed(n)}const mr="ngNavigationCancelingError";function Ha(n){const e=Error("NavigationCancelingError: "+n);return e[mr]=!0,e}function ng(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ei(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Mu(n[s],e[s]))return!1;return!0}function Mu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function bd(n){return Array.prototype.concat.apply([],n)}function zi(n){return n.length>0?n[n.length-1]:null}function sn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ir(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,nn.D)(Promise.resolve(n)):st(n)}const tf={exact:function C(n,e,t){if(!vt(n.segments,e.segments)||!W(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:M},Ks={exact:function Ga(n,e){return Ei(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mu(n[t],e[t]))},ignored:()=>!0};function sa(n,e,t){return tf[t.paths](n.root,e.root,t.matrixParams)&&Ks[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!vt(s,t)||e.hasChildren()||!W(s,t,r))}if(n.segments.length===t.length){if(!vt(n.segments,t)||!W(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!M(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vt(n.segments,s)&&W(n.segments,s,r)&&n.children[Mt])&&F(n.children[Mt],e,u,r)}}function W(n,e,t){return e.every((r,s)=>Ks[t](n[s].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ra(this.queryParams)),this._queryParamMap}toString(){return Wr.serialize(this)}}class le{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ys(this)}}class $e{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ra(this.parameters)),this._parameterMap}toString(){return aa(this)}}function vt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class dt{}class ln{parse(e){const t=new rg(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ci(e.root,!0)}`,r=function nf(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${_s(t)}=${_s(s)}`).join("&"):`${_s(t)}=${_s(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function oa(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wr=new ln;function ys(n){return n.segments.map(e=>aa(e)).join("/")}function ci(n,e){if(!n.hasChildren())return ys(n);if(e){const t=n.children[Mt]?ci(n.children[Mt],!1):"",r=[];return sn(n.children,(s,u)=>{u!==Mt&&r.push(`${u}:${ci(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kt(n,e){let t=[];return sn(n.children,(r,s)=>{s===Mt&&(t=t.concat(e(r,s)))}),sn(n.children,(r,s)=>{s!==Mt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Mt?[ci(n.children[Mt],!1)]:[`${s}:${ci(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${ys(n)}/${t[0]}`:`${ys(n)}/(${t.join("//")})`}}function di(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _s(n){return di(n).replace(/%3B/gi,";")}function bi(n){return di(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ii(n){return decodeURIComponent(n)}function vs(n){return Ii(n.replace(/\+/g,"%20"))}function aa(n){return`${bi(n.path)}${function Cd(n){return Object.keys(n).map(e=>`;${bi(e)}=${bi(n[e])}`).join("")}(n.parameters)}`}const rf=/^[^\/()?;=#]+/;function Dd(n){const e=n.match(rf);return e?e[0]:""}const ku=/^[^=?&#]+/,sf=/^[^&#]+/;class rg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new le(e,t)),r}parseSegment(){const e=Dd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new $e(Ii(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Dd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Dd(this.remaining);s&&(r=s,this.capture(r))}e[Ii(t)]=Ii(r)}parseQueryParam(e){const t=function Wl(n){const e=n.match(ku);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function E0(n){const e=n.match(sf);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=vs(t),u=vs(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Dd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Mt]:new le([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class af{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ig(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ig(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ru(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ru(e,this._root).map(t=>t.value)}}function ig(n,e){if(n===e.value)return e;for(const t of e.children){const r=ig(n,t);if(r)return r}return null}function Ru(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ru(n,t);if(r.length)return r.unshift(e),r}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Kl extends af{constructor(e,t){super(e),this.snapshot=t,Sd(this,e)}toString(){return this.snapshot.toString()}}function Td(n,e){const t=function Ou(n,e){const d=new Co([],{},{},"",{},Mt,e,null,n.root,-1,{});return new Ad("",new bo(d,[]))}(n,e),r=new li([new $e("",{})]),s=new li({}),u=new li({}),d=new li({}),m=new li(""),_=new Io(r,s,d,m,u,Mt,e,t.root);return _.snapshot=t.root,new Kl(new bo(_,[]),t)}class Io{constructor(e,t,r,s,u,d,m,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>ra(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>ra(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function b0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Co{constructor(e,t,r,s,u,d,m,_,b,A,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ra(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ra(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ad extends af{constructor(e,t){super(t),this.url=e,Sd(this,t)}toString(){return uf(this._root)}}function Sd(n,e){e.value._routerState=n,e.children.forEach(t=>Sd(n,t))}function uf(n){const e=n.children.length>0?` { ${n.children.map(uf).join(", ")} } `:"";return`${n.value}${e}`}function xd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ei(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ei(e.params,t.params)||n.params.next(t.params),function ms(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ei(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ei(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Md(n,e){const t=Ei(n.params,e.params)&&function Xe(n,e){return vt(n,e)&&n.every((t,r)=>Ei(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Md(n.parent,e.parent))}function Yl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function vy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Yl(n,r,s);return Yl(n,r)})}(n,e,t);return new bo(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Yl(n,m)),d}}const r=function wy(n){return new Io(new li(n.url),new li(n.params),new li(n.queryParams),new li(n.fragment),new li(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Yl(n,u));return new bo(r,s)}}function Ci(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Do(n){return"object"==typeof n&&null!=n&&n.outlets}function Ql(n,e,t,r,s){let u={};if(r&&sn(r,(m,_)=>{u[_]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new ne(t,u,s);const d=by(n,e,t);return new ne(d,u,s)}function by(n,e,t){const r={};return sn(n.children,(s,u)=>{r[u]=s===e?t:by(s,e,t)}),new le(n.segments,r)}class ag{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ci(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Do);if(s&&s!==zi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lg(n,e,t){if(n||(n=new le([],{})),0===n.segments.length&&n.hasChildren())return Rd(n,e,t);const r=function Iy(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(Do(m))break;const _=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!cf(_,b,d))return u;r+=2}else{if(!cf(_,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new le(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new le(n.segments.slice(r.pathIndex),n.children),Rd(u,0,s)}return r.match&&0===s.length?new le(n.segments,{}):r.match&&!n.hasChildren()?Cy(n,e,t):r.match?Rd(n,0,s):Cy(n,e,t)}function Rd(n,e,t){if(0===t.length)return new le(n.segments,{});{const r=function ug(n){return Do(n[0])?n[0].outlets:{[Mt]:n}}(t),s={};return sn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=lg(n.children[d],e,u))}),sn(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new le(n.segments,s)}}function Cy(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Do(u)){const _=qa(u.outlets);return new le(r,_)}if(0===s&&Ci(t[0])){r.push(new $e(n.segments[e].path,Jl(t[0]))),s++;continue}const d=Do(u)?u.outlets[Mt]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&Ci(m)?(r.push(new $e(d,Jl(m))),s+=2):(r.push(new $e(d,{})),s++)}return new le(r,{})}function qa(n){const e={};return sn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Cy(new le([],{}),0,t))}),e}function Jl(n){const e={};return sn(n,(t,r)=>e[r]=`${t}`),e}function cf(n,e,t){return n==t.path&&Ei(e,t.parameters)}class Xl{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Nu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),sn(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Nu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Nu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Nu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new gs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ps(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(xd(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),xd(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function Nd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),_=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=s,d.resolver=_,d.outlet&&d.outlet.activateWith(s,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Od{constructor(e,t){this.routes=e,this.module=t}}function To(n){return"function"==typeof n}function Pu(n){return n instanceof ne}const Pd=Symbol("INITIAL_VALUE");function Fd(){return un(n=>go(n.map(e=>e.pipe((0,Hi.q)(1),Eo(Pd)))).pipe(Gi((e,t)=>{let r=!1;return t.reduce((s,u,d)=>s!==Pd?s:(u===Pd&&(r=!0),r||!1!==u&&d!==t.length-1&&!Pu(u)?s:u),e)},Pd),Wn(e=>e!==Pd),(0,yt.U)(e=>Pu(e)?e:!0===e),(0,Hi.q)(1)))}class dg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fu,this.attachRef=null}}class Fu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new dg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let tc=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,_=new Dy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Dy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Io?this.route:e===Fu?this.childContexts:this.parent.get(e,t)}}let hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[tc],encapsulation:2}),n})();function nc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Lu(r,Ty(e,r))}}function Lu(n,e){n.children&&nc(n.children,e)}function Ty(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function rc(n){const e=n.children&&n.children.map(rc),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=hg),t}function Kr(n){return n.outlet||Mt}function Rn(n,e){const t=n.filter(r=>Kr(r)===e);return t.push(...n.filter(r=>Kr(r)!==e)),t}const fg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ld(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},fg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ng)(t,n,e);if(!u)return Object.assign({},fg);const d={};sn(u.posParams,(_,b)=>{d[b]=_.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Za(n,e,t,r,s="corrected"){if(t.length>0&&function Sy(n,e,t){return t.some(r=>ua(n,e,r)&&Kr(r)!==Mt)}(n,t,r)){const d=new le(e,function Ay(n,e,t,r){const s={};s[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Kr(u)!==Mt){const d=new le([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Kr(u)]=d}return s}(n,e,r,new le(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function xy(n,e,t){return t.some(r=>ua(n,e,r))}(n,t,r)){const d=new le(n.segments,function pg(n,e,t,r,s,u){const d={};for(const m of r)if(ua(n,t,m)&&!s[Kr(m)]){const _=new le([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Kr(m)]=_}return Object.assign(Object.assign({},s),d)}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new le(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ua(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gg(n,e,t,r){return!!(Kr(n)===r||r!==Mt&&ua(e,t,n))&&("**"===n.path||Ld(e,n,t).matched)}function mg(n,e,t){return 0===e.length&&!n.children[t]}class ff{constructor(e){this.segmentGroup=e||null}}class Vu{constructor(e){this.urlTree=e}}function Kn(n){return _o(new ff(n))}function Vd(n){return _o(new Vu(n))}class Uu{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Za(this.urlTree.root,[],[],this.config).segmentGroup,t=new le(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,yt.U)(u=>this.createUrlTree(ic(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wi(u=>{if(u instanceof Vu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ff?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,yt.U)(s=>this.createUrlTree(ic(s),e.queryParams,e.fragment))).pipe(wi(s=>{throw s instanceof ff?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new le([],{[Mt]:e}):e;return new ne(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(u=>new le([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,nn.D)(s).pipe(qi(u=>{const d=r.children[u],m=Rn(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,yt.U)(_=>({segment:_,outlet:u})))}),Gi((u,d)=>(u[d.outlet]=d.segment,u),{}),tg())}expandSegment(e,t,r,s,u,d){return(0,nn.D)(r).pipe(qi(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(wi(b=>{if(b instanceof ff)return st(null);throw b}))),ea(m=>!!m),wi((m,_)=>{if(m instanceof Gs||"EmptyError"===m.name)return mg(t,s,u)?st(new le([],{})):Kn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return gg(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):Kn(t):Kn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Vd(u):this.lineralizeSegments(r,u).pipe((0,Mn.z)(d=>{const m=new le(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:_,remainingSegments:b,positionalParamSegments:A}=Ld(t,s,u);if(!m)return Kn(t);const k=this.applyRedirectCommands(_,s.redirectTo,A);return s.redirectTo.startsWith("/")?Vd(k):this.lineralizeSegments(s,k).pipe((0,Mn.z)(U=>this.expandSegment(e,t,r,U.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(k=>(r._loadedConfig=k,new le(s,{})))):st(new le(s,{}));const{matched:d,consumedSegments:m,remainingSegments:_}=Ld(t,r,s);return d?this.getChildConfig(e,r,s).pipe((0,Mn.z)(A=>{const k=A.module,U=A.routes,{segmentGroup:B,slicedSegments:X}=Za(t,m,_,U),xe=new le(B.segments,B.children);if(0===X.length&&xe.hasChildren())return this.expandChildren(k,U,xe).pipe((0,yt.U)(gt=>new le(m,gt)));if(0===U.length&&0===X.length)return st(new le(m,{}));const Oe=Kr(r)===u;return this.expandSegment(k,xe,U,X,Oe?Mt:u,!0).pipe((0,yt.U)(_t=>new le(m.concat(_t.segments),_t.children)))})):Kn(t)}getChildConfig(e,t,r){return t.children?st(new Od(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Mn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,yt.U)(u=>(t._loadedConfig=u,u))):function Ud(n){return _o(Ha(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new Od([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?st(s.map(d=>{const m=e.get(d);let _;if(function D0(n){return n&&To(n.canLoad)}(m))_=m.canLoad(t,r);else{if(!To(m))throw new Error("Invalid CanLoad guard");_=m(t,r)}return ir(_)})).pipe(Fd(),(0,Rr.b)(d=>{if(!Pu(d))return;const m=Ha(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,yt.U)(d=>!0===d)):st(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return st(r);if(s.numberOfChildren>1||!s.children[Mt])return _o(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return sn(t.children,(m,_)=>{d[_]=this.createSegmentGroup(e,m,r,s)}),new le(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function ic(n){const e={};for(const r of Object.keys(n.children)){const u=ic(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function gf(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new le(n.segments.concat(e.segments),e.children)}return n}(new le(n.segments,e))}class Yr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class la{constructor(e,t){this.component=e,this.route=t}}function mf(n,e,t){const r=n._root;return sc(r,e?e._root:null,t,[r.value])}function za(n,e,t){const r=function yf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function sc(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Nu(e);return n.children.forEach(d=>{(function Bd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function Ry(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vt(n.url,e.url)||!Ei(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Md(n,e)||!Ei(n.queryParams,e.queryParams);default:return!Md(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new Yr(r)):(u.data=d.data,u._resolvedData=d._resolvedData),sc(n,e,u.component?m?m.children:null:t,r,s),_&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new la(m.outlet.component,d))}else d&&Ki(e,m,s),s.canActivateChecks.push(new Yr(r)),sc(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),sn(u,(d,m)=>Ki(d,t.getContext(m),s)),s}function Ki(n,e,t){const r=Nu(n),s=n.value;sn(r,(u,d)=>{Ki(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new la(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class Py{}function ws(n){return new vn.y(e=>e.error(n))}class _g{constructor(e,t,r,s,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Za(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new Co([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new bo(r,t),u=new Ad(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=sg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Rn(e,u),_=this.processSegmentGroup(m,d,u);if(null===_)return null;r.push(..._)}const s=wg(r);return function vg(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,s);if(null!==d)return d}return mg(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!gg(e,t,r,s))return null;let u,d=[],m=[];if("**"===e.path){const B=r.length>0?zi(r).parameters:{};u=new Co(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Kr(e),e.component,e,Eg(t),Wa(t)+r.length,f(e))}else{const B=Ld(t,e,r);if(!B.matched)return null;d=B.consumedSegments,m=B.remainingSegments,u=new Co(d,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Kr(e),e.component,e,Eg(t),Wa(t)+d.length,f(e))}const _=function Fy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Za(t,d,m,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const B=this.processChildren(_,b);return null===B?null:[new bo(u,B)]}if(0===_.length&&0===A.length)return[new bo(u,[])];const k=Kr(e)===s,U=this.processSegment(_,b,A,k?Mt:s);return null===U?null:[new bo(u,U)]}}function wf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wg(n){const e=[],t=new Set;for(const r of n){if(!wf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=wg(r.children);e.push(new bo(r.value,s))}return e.filter(r=>!t.has(r))}function Eg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Wa(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function q(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return un(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,yt.U)(()=>e)):st(e)})}class ht extends class mt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const En=new c.OlP("ROUTES");class fi{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Od(bd(d.injector.get(En,void 0,c.XFs.Self|c.XFs.Optional)).map(rc),d)}),wi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Zs(s,()=>new kr.x).pipe(Gl()),t._loader$}loadModuleFactory(e){return ir(e()).pipe((0,Mn.z)(t=>t instanceof c.YKP?st(t):(0,nn.D)(this.compiler.compileModuleAsync(t))))}}class Ef{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function bg(n){throw n}function Ka(n,e,t){return e.parse("/")}function ac(n,e){return st(null)}const Hd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ig={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $n=(()=>{class n{constructor(t,r,s,u,d,m,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kr.x,this.errorHandler=bg,this.malformedUriErrorHandler=Ka,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ac,afterPreactivation:ac},this.urlHandlingStrategy=new Ef,this.routeReuseStrategy=new ht,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const k=d.get(c.R0b);this.isNgZoneEnabled=k instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function zl(){return new ne(new le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fi(d,m,U=>this.triggerEvent(new Nr(U)),U=>this.triggerEvent(new $a(U))),this.routerState=Td(this.currentUrlTree,this.rootComponentType),this.transitions=new li({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Wn(s=>0!==s.id),(0,yt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),un(s=>{let u=!1,d=!1;return st(s).pipe((0,Rr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),un(m=>{const _=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return If(m.source)&&(this.browserUrlTree=m.extractedUrl),st(m).pipe(un(k=>{const U=this.transitions.getValue();return r.next(new vd(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),U!==this.transitions.getValue()?hs.E:Promise.resolve(k)}),function My(n,e,t,r){return un(s=>function sr(n,e,t,r,s){return new Uu(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,yt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Rr.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function g(n,e,t,r,s){return(0,Mn.z)(u=>function oc(n,e,t,r,s="emptyOnly",u="legacy"){try{const d=new _g(n,e,t,r,s,u).recognize();return null===d?ws(new Py):st(d)}catch(d){return ws(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,yt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rr.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(B,k)}this.browserUrlTree=k.urlAfterRedirects}const U=new ja(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(U)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:B,source:X,restoredState:xe,extras:Oe}=m,pt=new vd(U,this.serializeUrl(B),X,xe);r.next(pt);const _t=Td(B,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},m),{targetSnapshot:_t,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),hs.E}),Le(m=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:k,extras:{skipLocationChange:U,replaceUrl:B}}=m;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:k,skipLocationChange:!!U,replaceUrl:!!B})}),(0,Rr.b)(m=>{const _=new xu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(_)}),(0,yt.U)(m=>Object.assign(Object.assign({},m),{guards:mf(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function jd(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function Ny(n,e,t,r){return(0,nn.D)(n).pipe((0,Mn.z)(s=>function vf(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const _=za(m,e,s);let b;if(function hf(n){return n&&To(n.canDeactivate)}(_))b=ir(_.canDeactivate(n,e,t,r));else{if(!To(_))throw new Error("Invalid CanDeactivate guard");b=ir(_(n,e,t,r))}return b.pipe(ea())})).pipe(Fd()):st(!0)}(s.component,s.route,t,e,r)),ea(s=>!0!==s,!0))}(d,r,s,n).pipe((0,Mn.z)(m=>m&&function cg(n){return"boolean"==typeof n}(m)?function Oy(n,e,t,r){return(0,nn.D)(e).pipe(qi(s=>vo(function yg(n,e){return null!==n&&e&&e(new ta(n)),st(!0)}(s.route.parent,r),function $d(n,e){return null!==n&&e&&e(new Ws(n)),st(!0)}(s.route,r),function _f(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function ky(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ba(()=>st(d.guards.map(_=>{const b=za(_,d.node,t);let A;if(function df(n){return n&&To(n.canActivateChild)}(b))A=ir(b.canActivateChild(r,n));else{if(!To(b))throw new Error("Invalid CanActivateChild guard");A=ir(b(r,n))}return A.pipe(ea())})).pipe(Fd())));return st(u).pipe(Fd())}(n,s.path,t),function hi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const s=r.map(u=>Ba(()=>{const d=za(u,e,t);let m;if(function ec(n){return n&&To(n.canActivate)}(d))m=ir(d.canActivate(e,n));else{if(!To(d))throw new Error("Invalid CanActivate guard");m=ir(d(e,n))}return m.pipe(ea())}));return st(s).pipe(Fd())}(n,s.route,t))),ea(s=>!0!==s,!0))}(r,u,n,e):st(m)),(0,yt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Rr.b)(m=>{if(Pu(m.guardsResult)){const b=Ha(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const _=new wd(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(_)}),Wn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Le(m=>{if(m.guards.canActivateChecks.length)return st(m).pipe((0,Rr.b)(_=>{const b=new ef(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),un(_=>{let b=!1;return st(_).pipe(function w(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return st(t);let u=0;return(0,nn.D)(s).pipe(qi(d=>function T(n,e,t,r){return function R(n,e,t,r){const s=q(n);if(0===s.length)return st({});const u={};return(0,nn.D)(s).pipe((0,Mn.z)(d=>function ce(n,e,t,r){const s=za(n,e,r);return ir(s.resolve?s.resolve(e,t):s(e,t))}(n[d],e,t,r).pipe((0,Rr.b)(m=>{u[d]=m}))),Su(1),(0,Mn.z)(()=>q(u).length===s.length?st(u):hs.E))}(n._resolve,n,e,r).pipe((0,yt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),sg(n,t).resolve),null)))}(d.route,r,n,e)),(0,Rr.b)(()=>u++),Su(1),(0,Mn.z)(d=>u===s.length?st(t):hs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Rr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Rr.b)(_=>{const b=new gr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),Le(m=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:k,extras:{skipLocationChange:U,replaceUrl:B}}=m;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:k,skipLocationChange:!!U,replaceUrl:!!B})}),(0,yt.U)(m=>{const _=function og(n,e,t){const r=Yl(n,e._root,t?t._root:void 0);return new Kl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:_})}),(0,Rr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new Xl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Rr.b)({next(){u=!0},complete(){u=!0}}),function _d(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),wi(m=>{if(d=!0,function ia(n){return n&&n[mr]}(m)){const _=Pu(m.url);_||(this.navigated=!0,this.restoreHistory(s,!0));const b=new Zl(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||If(s.source)};this.scheduleNavigation(A,"imperative",null,k,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new kn(s.id,this.serializeUrl(s.extractedUrl),m);r.next(_);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return hs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},d=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nc(t),this.config=t.map(rc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:_}=r,b=s||this.routerState.root,A=_?this.currentUrlTree.fragment:d;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function Ey(n,e,t,r,s){if(0===t.length)return Ql(e.root,e.root,e.root,r,s);const u=function I0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ag(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return sn(u.outlets,(_,b)=>{m[b]="string"==typeof _?_.split("/"):_}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,_)=>{0==_&&"."===m||(0==_&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new ag(t,e,r)}(t);if(u.toRoot())return Ql(e.root,e.root,new le([],{}),r,s);const d=function C0(n,e,t){if(n.isAbsolute)return new kd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new kd(u,u===e.root,0)}const r=Ci(n.commands[0])?0:1;return function lf(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new kd(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Rd(d.segmentGroup,d.index,u.commands):lg(d.segmentGroup,d.index,u.commands);return Ql(e.root,d.segmentGroup,m,r,s)}(b,this.currentUrlTree,t,k,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Pu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function bf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},Hd):!1===r?Object.assign({},Ig):r,Pu(t))return sa(this.currentUrlTree,t,s);const u=this.parseUrl(t);return sa(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){var m,_;if(this.disposed)return Promise.resolve(!1);let b,A,k;d?(b=d.resolve,A=d.reject,k=d.promise):k=new Promise((X,xe)=>{b=X,A=xe});const U=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),B=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:U,targetPageId:B,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(X=>Promise.reject(X))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new Zl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function If(n){return"imperative"!==n}let Cf=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new kr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ju(this.skipLocationChange),replaceUrl:ju(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ju(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($n),c.Y36(Io),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Ya=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new kr.x,this.subscription=t.events.subscribe(u=>{u instanceof Zi&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,d){if(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:ju(this.skipLocationChange),replaceUrl:ju(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ju(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($n),c.Y36(Io),c.Y36(ve))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function ju(n){return""===n||!!n}let A0=(()=>{class n{constructor(t,r,s,u,d,m){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof Zi&&this.update()})}ngAfterContentInit(){st(this.links.changes,this.linksWithHrefs.changes,st(null)).pipe((0,Xo.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,nn.D)(r).pipe((0,Xo.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function S0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($n),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Cf,8),c.Y36(Ya,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,Cf,5),c.Suo(s,Ya,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class Cg{}class Dg{preload(e,t){return st(null)}}let M0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new fi(s,r,_=>t.triggerEvent(new Nr(_)),_=>t.triggerEvent(new $a(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof Zi),qi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;s.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,nn.D)(s).pipe((0,Xo.J)(),(0,yt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Mn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($n),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Cg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ly=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof na&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new na(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=new c.OlP("ROUTER_CONFIGURATION"),Hu=new c.OlP("ROUTER_FORROOT_GUARD"),k0=[Ie,{provide:dt,useClass:ln},{provide:$n,useFactory:function O0(n,e,t,r,s,u,d={},m,_){const b=new $n(null,n,e,t,r,s,bd(u));return m&&(b.urlHandlingStrategy=m),_&&(b.routeReuseStrategy=_),function Uy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(A=>{var k,U;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(U=console.groupEnd)||void 0===U||U.call(console)}),b},deps:[dt,Fu,Ie,c.zs3,c.Sil,En,$u,[class Bu{},new c.FiY],[class Qe{},new c.FiY]]},Fu,{provide:Io,useFactory:function P0(n){return n.routerState.root},deps:[$n]},M0,Dg,class x0{preload(e,t){return t().pipe(wi(()=>st(null)))}},{provide:$u,useValue:{enableTracing:!1}}];function R0(){return new c.PXZ("Router",$n)}let Tg=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[k0,Vy(t),{provide:Hu,useFactory:N0,deps:[[$n,new c.FiY,new c.tp0]]},{provide:$u,useValue:r||{}},{provide:ve,useFactory:$I,deps:[ae,[new c.tBr(Ye),new c.FiY],$u]},{provide:Ly,useFactory:Ag,deps:[$n,xl,$u]},{provide:Cg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Dg},{provide:c.PXZ,multi:!0,useFactory:R0},[Gd,{provide:c.ip1,multi:!0,useFactory:Sg,deps:[Gd]},{provide:xg,useFactory:F0,deps:[Gd]},{provide:c.tb,multi:!0,useExisting:xg}]]}}static forChild(t){return{ngModule:n,providers:[Vy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hu,8),c.LFG($n,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Ag(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ly(n,e,t)}function $I(n,e,t={}){return t.useHash?new Me(n,e):new it(n,e)}function N0(n){return"guarded"}function Vy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:En,multi:!0,useValue:n}]}let Gd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new kr.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get($n),d=this.injector.get($u);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get($u),s=this.injector.get(M0),u=this.injector.get(Ly),d=this.injector.get($n),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),s.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Sg(n){return n.appInitializer.bind(n)}function F0(n){return n.bootstrapListener.bind(n)}const xg=new c.OlP("Router Initializer"),GI=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:104,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18,"Latest"),c.qZA(),c.TgZ(19,"div",11)(20,"a",12),c._UZ(21,"img",13),c.TgZ(22,"div",14)(23,"div",15)(24,"div",16),c.O4$(),c.TgZ(25,"svg",17),c._UZ(26,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(27,"div",19)(28,"h2",20),c._uU(29," Game Highlighting Clip "),c.qZA(),c.TgZ(30,"p",21),c._uU(31," Luis Ramirez \xb7 "),c.TgZ(32,"span",22),c._uU(33,"March 31, 2020"),c.qZA()()()(),c.TgZ(34,"a",12),c._UZ(35,"img",23),c.TgZ(36,"div",14)(37,"div",15)(38,"div",16),c.O4$(),c.TgZ(39,"svg",17),c._UZ(40,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(41,"div",19)(42,"h2",20),c._uU(43," Game Highlighting Clip "),c.qZA(),c.TgZ(44,"p",21),c._uU(45," Luis Ramirez \xb7 "),c.TgZ(46,"span",22),c._uU(47,"March 31, 2020"),c.qZA()()()(),c.TgZ(48,"a",12),c._UZ(49,"img",24),c.TgZ(50,"div",14)(51,"div",15)(52,"div",16),c.O4$(),c.TgZ(53,"svg",17),c._UZ(54,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(55,"div",19)(56,"h2",20),c._uU(57," Game Highlighting Clip "),c.qZA(),c.TgZ(58,"p",21),c._uU(59," Luis Ramirez \xb7 "),c.TgZ(60,"span",22),c._uU(61,"March 31, 2020"),c.qZA()()()(),c.TgZ(62,"a",12),c._UZ(63,"img",23),c.TgZ(64,"div",14)(65,"div",15)(66,"div",16),c.O4$(),c.TgZ(67,"svg",17),c._UZ(68,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(69,"div",19)(70,"h2",20),c._uU(71," Game Highlighting Clip "),c.qZA(),c.TgZ(72,"p",21),c._uU(73," Luis Ramirez \xb7 "),c.TgZ(74,"span",22),c._uU(75,"March 31, 2020"),c.qZA()()()(),c.TgZ(76,"a",12),c._UZ(77,"img",24),c.TgZ(78,"div",14)(79,"div",15)(80,"div",16),c.O4$(),c.TgZ(81,"svg",17),c._UZ(82,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(83,"div",19)(84,"h2",20),c._uU(85," Game Highlighting Clip "),c.qZA(),c.TgZ(86,"p",21),c._uU(87," Luis Ramirez \xb7 "),c.TgZ(88,"span",22),c._uU(89,"March 31, 2020"),c.qZA()()()(),c.TgZ(90,"a",12),c._UZ(91,"img",13),c.TgZ(92,"div",14)(93,"div",15)(94,"div",16),c.O4$(),c.TgZ(95,"svg",17),c._UZ(96,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(97,"div",19)(98,"h2",20),c._uU(99," Game Highlighting Clip "),c.qZA(),c.TgZ(100,"p",21),c._uU(101," Luis Ramirez \xb7 "),c.TgZ(102,"span",22),c._uU(103,"March 31, 2020"),c.qZA()()()()()())},styles:[""]}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(t,r){1&t&&(c.TgZ(0,"p",0),c._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),c.qZA())},styles:[""]}),n})()},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.id=""}ngOnInit(){this.route.params.subscribe(t=>{console.log(t),this.id=t.id})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Io))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],decls:57,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Uploaded By Luis on "),c.TgZ(6,"span"),c._uU(7,"March 25, 2022"),c.qZA()(),c.TgZ(8,"div",4)(9,"video",5),c._UZ(10,"source",6),c.qZA()()()(),c.TgZ(11,"div",7)(12,"h2",8),c._uU(13,"More Clips"),c.qZA(),c.TgZ(14,"div",9)(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"div",4)(18,"div",12)(19,"div",13),c.O4$(),c.TgZ(20,"svg",14),c._UZ(21,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(22,"div",16)(23,"h2",17),c._uU(24," Game Highlighting Clip "),c.qZA(),c.TgZ(25,"p",18),c._uU(26," Luis Ramirez \xb7 "),c.TgZ(27,"span",19),c._uU(28,"March 31, 2020"),c.qZA()()()(),c.TgZ(29,"a",10),c._UZ(30,"img",20),c.TgZ(31,"div",4)(32,"div",12)(33,"div",13),c.O4$(),c.TgZ(34,"svg",14),c._UZ(35,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(36,"div",16)(37,"h2",17),c._uU(38," Game Highlighting Clip "),c.qZA(),c.TgZ(39,"p",18),c._uU(40," Luis Ramirez \xb7 "),c.TgZ(41,"span",19),c._uU(42,"March 31, 2020"),c.qZA()()()(),c.TgZ(43,"a",10),c._UZ(44,"img",21),c.TgZ(45,"div",4)(46,"div",12)(47,"div",13),c.O4$(),c.TgZ(48,"svg",14),c._UZ(49,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(50,"div",16)(51,"h2",17),c._uU(52," Game Highlighting Clip "),c.qZA(),c.TgZ(53,"p",18),c._uU(54," Luis Ramirez \xb7 "),c.TgZ(55,"span",19),c._uU(56,"March 31, 2020"),c.qZA()()()()()()),2&t&&(c.xp6(3),c.hij(" ",r.id," "))},styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA(),c.TgZ(15,"div",14)(16,"h2",15),c._uU(17,"Page not found"),c.qZA(),c.TgZ(18,"p"),c._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),c.qZA()())},styles:[""]}),n})()}];let U0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tg.forRoot(GI)],Tg]}),n})();var ge=N(5861),Df=N(4986),oS=N(5032);function By(n,e){return e?t=>vo(e.pipe((0,Hi.q)(1),function B0(){return(0,jn.e)((n,e)=>{n.subscribe((0,Bn.x)(e,oS.Z))})}()),t.pipe(By(n))):(0,Mn.z)((t,r)=>n(t,r).pipe((0,Hi.q)(1),function qI(n){return(0,yt.U)(()=>n)}(t)))}var ZI=N(3532);var j0=N(6451),kg=N(5363),KI=N(6063);class YI extends kr.x{constructor(e=1/0,t=1/0,r=KI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)m=_;m&&r.splice(0,m+1)}}}var QI=N(3099);function jy(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,QI.B)({connector:()=>new YI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function $0(n,e){return(0,yo.m)(e)?un(()=>n,e):un(()=>n)}var $y=N(9468),bn=N(5813),ft=N(2011);N(5867);var Es=N(9681),Gu=N(4859),Tt=N(2090),qu=N(1877);const z0=new Map,eC={activated:!1,tokenObservers:[]},tC={initialized:!1,enabled:!1};function yr(n){return z0.get(n)||eC}function ca(n,e){z0.set(n,e)}function Ng(){return tC}class lS{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Tt.BH,yield function cS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yi=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rC(n){if(!yr(n).activated)throw Yi.create("use-before-activation",{appName:n.name})}function J0(n,e){return da.apply(this,arguments)}function da(){return(da=(0,ge.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const B=yield d.getHeartbeatsHeader();B&&(u["X-Firebase-Client"]=B)}const m={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,m)}catch(B){throw Yi.create("fetch-network-error",{originalErrorMessage:null===(r=B)||void 0===r?void 0:r.message})}if(200!==_.status)throw Yi.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(B){throw Yi.create("fetch-parse-error",{originalErrorMessage:null===(s=B)||void 0===s?void 0:s.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const k=1e3*Number(A[1]),U=Date.now();return{token:b.token,expireTimeMillis:U+k,issuedAtTimeMillis:U}})).apply(this,arguments)}function X0(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const uc="firebase-app-check-store";let xo=null;function Jy(){return xo||(xo=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(Yi.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(uc,{keyPath:"compositeKey"})}}catch(r){e(Yi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),xo)}function e_(){return(e_=(0,ge.Z)(function*(n,e){const r=(yield Jy()).transaction(uc,"readwrite"),u=r.objectStore(uc).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=_=>{d()},r.onerror=_=>{var b;m(Yi.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const ha=new qu.Yd("@firebase/app-check");function iw(n,e){return(0,Tt.hl)()?function Xy(n,e){return function rw(n,e){return e_.apply(this,arguments)}(function Pg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ha.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lg(){return Ng().enabled}function Vg(){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,ge.Z)(function*(){const n=Ng();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const aC={error:"UNKNOWN_ERROR"};function ow(n){return Tt.US.encodeString(JSON.stringify(n),!1)}function t_(n){return jg.apply(this,arguments)}function jg(){return(jg=(0,ge.Z)(function*(n,e=!1){const t=n.app;rC(t);const r=yr(t);let u,s=r.token;if(!s){const _=yield r.cachedTokenPromise;_&&pi(_)&&(s=_)}if(!e&&s&&pi(s))return{token:s.token};let m,d=!1;if(Lg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=J0(X0(t,yield Vg()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const _=yield r.exchangeTokenPromise;return yield iw(t,_),ca(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),s=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?ha.warn(_.message):ha.error(_),u=_}return s?(m={token:s.token},ca(t,Object.assign(Object.assign({},r),{token:s})),yield iw(t,s)):m=lC(u),d&&aw(t,m),m})).apply(this,arguments)}function n_(n,e){const t=yr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ca(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function r_(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function uC(n){const{app:e}=n;return new lS((0,ge.Z)(function*(){let r;if(r=yr(e).token?yield t_(n,!0):yield t_(n),r.error)throw r.error}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ca(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function aw(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function pi(n){return n.expireTimeMillis-Date.now()>0}function lC(n){return{token:ow(aC),error:n}}class cC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)n_(this.app,t.next);return Promise.resolve()}}const qg="app-check-internal";!function _C(){(0,Es._registerComponent)(new Gu.wA("app-check",n=>function hS(n,e){return new cC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qg).initialize()})),(0,Es._registerComponent)(new Gu.wA(qg,n=>function fS(n){return{getToken:e=>t_(n,e),addTokenListener:e=>function $g(n,e,t,r){const{app:s}=n,u=yr(s),d={next:t,error:r,type:e};if(ca(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&pi(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),r_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>r_(n))}(n,"INTERNAL",e),removeTokenListener:e=>n_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Es.registerVersion)("@firebase/app-check","0.5.10")}();class zd{constructor(){return(0,bn.vb)("app-check")}}"undefined"!=typeof window&&window;var Ja=N(127);const yw=new c.OlP("angularfire2.auth.use-emulator"),CC=new c.OlP("angularfire2.auth.settings"),Zg=new c.OlP("angularfire2.auth.tenant-id"),d_=new c.OlP("angularfire2.auth.langugage-code"),zg=new c.OlP("angularfire2.auth.use-device-language"),Wd=new c.OlP("angularfire.auth.persistence"),_w=(n,e,t,r,s,u,d,m)=>(0,ft.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))_.settings[b]=A;return m&&_.setPersistence(m),_},[t,r,s,u,d,m]);let ko=(()=>{class n{constructor(t,r,s,u,d,m,_,b,A,k,U,B){const X=new kr.x,xe=st(void 0).pipe((0,kg.Q)(d.outsideAngular),un(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,3677)))),(0,yt.U)(()=>(0,ft.on)(t,u,r)),(0,yt.U)(Oe=>_w(Oe,u,m,b,A,k,_,U)),jy({bufferSize:1,refCount:!1}));if(Go(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{xe.pipe(ea()).subscribe();const pt=xe.pipe(un(Ve=>Ve.getRedirectResult().then(We=>We,()=>null)),bn.iC,jy({bufferSize:1,refCount:!1})),_t=xe.pipe(un(Ve=>new vn.y(We=>({unsubscribe:u.runOutsideAngular(()=>Ve.onAuthStateChanged(xt=>We.next(xt),xt=>We.error(xt),()=>We.complete()))})))),gt=xe.pipe(un(Ve=>new vn.y(We=>({unsubscribe:u.runOutsideAngular(()=>Ve.onIdTokenChanged(xt=>We.next(xt),xt=>We.error(xt),()=>We.complete()))}))));this.authState=pt.pipe($0(_t),(0,$y.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.user=pt.pipe($0(gt),(0,$y.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.idToken=this.user.pipe(un(Ve=>Ve?(0,nn.D)(Ve.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(un(Ve=>Ve?(0,nn.D)(Ve.getIdTokenResult()):st(null))),this.credential=(0,j0.T)(pt,X,this.authState.pipe(Wn(Ve=>!Ve))).pipe((0,yt.U)(Ve=>(null==Ve?void 0:Ve.user)?Ve:null),(0,$y.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular))}return(0,ft.pX)(this,xe,u,{spy:{apply:(Oe,pt,_t)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&_t.then(gt=>X.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ft.Dh),c.LFG(ft.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(bn.HU),c.LFG(yw,8),c.LFG(CC,8),c.LFG(Zg,8),c.LFG(d_,8),c.LFG(zg,8),c.LFG(Wd,8),c.LFG(zd,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vw=(()=>{class n{constructor(){Ja.Z.registerVersion("angularfire",bn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ko]}),n})();function Wg(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Bn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function DC(n,e){return n===e}N(3677);var Je,bw=N(3942),TC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fa={},Kg=Kg||{},St=TC||self;function Yg(){}function Ku(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var h_="closure_uid_"+(1e9*Math.random()>>>0),SC=0;function pa(n,e,t){return n.call.apply(n.bind,arguments)}function f_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Or(n,e,t){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:f_).apply(null,arguments)}function Mf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Xa(){this.s=this.s,this.o=this.o}var MC={};Xa.prototype.s=!1,Xa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function AC(n){return Object.prototype.hasOwnProperty.call(n,h_)&&n[h_]||(n[h_]=++SC)}(this);delete MC[n]}},Xa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Iw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Cw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function kC(n){return Array.prototype.concat.apply([],arguments)}function Qg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jg(n){return/^[\s\xa0]*$/.test(n)}var Qr,Tw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qi(n,e){return-1!=n.indexOf(e)}function Aw(n,e){return n<e?-1:n>e?1:0}e:{var Sw=St.navigator;if(Sw){var p_=Sw.userAgent;if(p_){Qr=p_;break e}}Qr=""}function Xg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function RC(n){const e={};for(const t in n)e[t]=n[t];return e}var Ys="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function NC(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Ys.length;u++)t=Ys[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xw(n){return xw[" "](n),n}xw[" "]=Yg;var Kd,n,kw=Qi(Qr,"Opera"),lc=Qi(Qr,"Trident")||Qi(Qr,"MSIE"),Rw=Qi(Qr,"Edge"),Nw=Rw||lc,g_=Qi(Qr,"Gecko")&&!(Qi(Qr.toLowerCase(),"webkit")&&!Qi(Qr,"Edge"))&&!(Qi(Qr,"Trident")||Qi(Qr,"MSIE"))&&!Qi(Qr,"Edge"),m_=Qi(Qr.toLowerCase(),"webkit")&&!Qi(Qr,"Edge");function Ow(){var n=St.document;return n?n.documentMode:void 0}e:{var y_="",__=(n=Qr,g_?/rv:([^\);]+)(\)|;)/.exec(n):Rw?/Edge\/([\d\.]+)/.exec(n):lc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):m_?/WebKit\/(\S+)/.exec(n):kw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(__&&(y_=__?__[1]:""),lc){var v_=Ow();if(null!=v_&&v_>parseFloat(y_)){Kd=String(v_);break e}}Kd=y_}var OC={};var Yd=St.document&&lc&&(Ow()||parseInt(Kd,10))||void 0,FC=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Yg,e),St.removeEventListener("test",Yg,e)}catch(t){}return n}();function or(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Rf(n,e){if(or.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(g_){e:{try{xw(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rf.Z.h.call(this)}}or.prototype.h=function(){this.defaultPrevented=!0},Pr(Rf,or);var LC={2:"touch",3:"pen",4:"mouse"};Rf.prototype.h=function(){Rf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cc="closure_listenable_"+(1e6*Math.random()|0),ga=0;function Nf(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++ga,this.ca=this.fa=!1}function _r(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ma(n){this.src=n,this.g={},this.h=0}function Qd(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Iw(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(_r(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ji(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}ma.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Ji(n,e,r,s);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Nf(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var Of="closure_lm_"+(1e6*Math.random()|0),Yu={};function dc(n,e,t,r,s){if(r&&r.once)return fc(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)dc(n,e[u],t,r,s);return null}return t=nm(t),n&&n[cc]?n.N(e,t,xf(r)?!!r.capture:!!r,s):hc(n,e,t,!1,r,s)}function hc(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=xf(s)?!!s.capture:!!s,m=em(n);if(m||(n[Of]=m=new ma(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function Jd(){var e=Xd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)FC||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(gc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fc(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)fc(n,e[u],t,r,s);return null}return t=nm(t),n&&n[cc]?n.O(e,t,xf(r)?!!r.capture:!!r,s):hc(n,e,t,!0,r,s)}function pc(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)pc(n,e[u],t,r,s);else r=xf(r)?!!r.capture:!!r,t=nm(t),n&&n[cc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ji(u=n.g[e],t,r,s))&&(_r(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=em(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ji(e,t,r,s)),(t=-1<n?e[n]:null)&&Qu(t))}function Qu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[cc])Qd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=em(e))?(Qd(t,n),0==t.h&&(t.src=null,e[Of]=null)):_r(n)}}}function gc(n){return n in Yu?Yu[n]:Yu[n]="on"+n}function Xd(n,e){if(n.ca)n=!0;else{e=new Rf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Qu(n),n=t.call(r,e)}return n}function em(n){return(n=n[Of])instanceof ma?n:null}var tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(n){return"function"==typeof n?n:(n[tm]||(n[tm]=function(e){return n.handleEvent(e)}),n[tm])}function vr(){Xa.call(this),this.i=new ma(this),this.P=this,this.I=null}function Fr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new or(e,n);else if(e instanceof or)e.target=e.target||n;else{var s=e;NC(e=new or(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=Pf(d,r,!0,e)&&s}if(s=Pf(d=e.g=n,r,!0,e)&&s,s=Pf(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Pf(d=e.g=t[u],r,!1,e)&&s}function Pf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,_=d.ia||d.src;d.fa&&Qd(n.i,d),s=!1!==m.call(_,r)&&s}}return s&&!r.defaultPrevented}Pr(vr,Xa),vr.prototype[cc]=!0,vr.prototype.removeEventListener=function(n,e,t,r){pc(this,n,e,t,r)},vr.prototype.M=function(){if(vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_r(t[r]);delete n.g[e],n.h--}}this.I=null},vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rm=St.JSON.stringify;function Pw(){var n=b_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sm,Lw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Vw,n=>n.reset());class Vw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VC(n){St.setTimeout(()=>{throw n},0)}function im(n,e){sm||function UC(){var n=St.Promise.resolve(void 0);sm=function(){n.then(BC)}}(),E_||(sm(),E_=!0),b_.add(n,e)}var E_=!1,b_=new class Fw{constructor(){this.h=this.g=null}add(e,t){const r=Lw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function BC(){for(var n;n=Pw();){try{n.h.call(n.g)}catch(t){VC(t)}var e=Lw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}E_=!1}function Ff(n,e){vr.call(this),this.h=n||1,this.g=e||St,this.j=Or(this.kb,this),this.l=Date.now()}function I_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function C_(n,e,t){if("function"==typeof n)t&&(n=Or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Or(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function jC(n){n.g=C_(()=>{n.g=null,n.i&&(n.i=!1,jC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pr(Ff,vr),(Je=Ff.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fr(this,"tick"),this.da&&(I_(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){Ff.Z.M.call(this),I_(this),delete this.g};class $C extends Xa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jC(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(n){Xa.call(this),this.h=n,this.g={}}Pr(mc,Xa);var om=[];function Uw(n,e,t,r){Array.isArray(t)||(t&&(om[0]=t.toString()),t=om);for(var s=0;s<t.length;s++){var u=dc(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function HC(n){Xg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qu(e)},n),n.g={}}function D_(){this.g=!0}function yc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return rm(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}mc.prototype.M=function(){mc.Z.M.call(this),HC(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},D_.prototype.Aa=function(){this.g=!1},D_.prototype.info=function(){};var Qs={},Bw=null;function Lf(){return Bw=Bw||new vr}function jw(n){or.call(this,Qs.Ma,n)}function eh(n){const e=Lf();Fr(e,new jw(e,n))}function Vf(n,e){or.call(this,Qs.STAT_EVENT,n),this.stat=e}function Di(n){const e=Lf();Fr(e,new Vf(e,n))}function T_(n,e){or.call(this,Qs.Na,n),this.size=e}function Uf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Qs.Ma="serverreachability",Pr(jw,or),Qs.STAT_EVENT="statevent",Pr(Vf,or),Qs.Na="timingevent",Pr(T_,or);var am={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$w={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function A_(){}function S_(){}A_.prototype.h=null;var jf,Bf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function um(){or.call(this,"d")}function lm(){or.call(this,"c")}function x_(){}function _c(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new mc(this),this.P=bS,this.W=new Ff(n=Nw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gw}function Gw(){this.i=null,this.g="",this.h=!1}Pr(um,or),Pr(lm,or),Pr(x_,A_),x_.prototype.g=function(){return new XMLHttpRequest},x_.prototype.i=function(){return{}},jf=new x_;var bS=45e3,vc={},$f={};function Hf(n,e,t){n.K=1,n.v=zf(_a(e)),n.s=t,n.U=!0,cm(n,null)}function cm(n,e){n.F=Date.now(),wc(n),n.A=_a(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ar(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Gw,n.g=hE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $C(Or(n.Ia,n,n.g),n.O)),Uw(n.V,n.g,"readystatechange",n.gb),e=n.H?RC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),eh(1),function wS(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),_=0;_<m.length;_++){var b=m[_].split("=");if(1<b.length){var A=b[0];b=b[1];var k=A.split("_");d=2<=k.length&&"type"==k[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function qw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Gf(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=dm(n,t),s==$f){4==e&&(n.o=4,Di(14),r=!1),yc(n.j,n.m,null,"[Incomplete Response]");break}if(s==vc){n.o=4,Di(15),yc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}yc(n.j,n.m,s,null),fm(n,s)}qw(n)&&s!=$f&&s!=vc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),K_(e),e.L=!0,Di(11))):(yc(n.j,n.m,t,"[Invalid Chunked Response]"),ya(n),Ju(n))}function dm(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?$f:(t=Number(e.substring(t,r)),isNaN(t)?vc:(r+=1)+t>e.length?$f:(e=e.substr(r,t),n.C=r+t,e))}function wc(n){n.Y=Date.now()+n.P,ZC(n,n.P)}function ZC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uf(Or(n.eb,n),e)}function hm(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function Ju(n){0==n.l.G||n.I||uE(n.l,n)}function ya(n){hm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,I_(n.W),HC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function fm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||tl(t.i,n)))if(t.I=n.N,!n.J&&tl(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Uf(Or(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Em(t),uh(t)}W_(t),Di(18)}if(1>=L_(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Ic(t,11)}else if((n.J||t.g==n)&&Em(t),!Jg(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const k=b[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const U=b[5];null!=U&&"number"==typeof U&&0<U&&(t.K=r=1.5*U,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const X=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var u=r.i;!u.g&&(Qi(X,"spdy")||Qi(X,"quic")||Qi(X,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(V_(u,u.h),u.h=null))}if(r.D){const xe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,gn(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=dE(r,r.H?r.la:null,r.W),d.J){Xw(r.i,d);var m=d,_=r.K;_&&m.setTimeout(_),m.B&&(hm(m),wc(m)),r.g=d}else oE(r);0<t.l.length&&Yf(t)}else"stop"!=b[0]&&"close"!=b[0]||Ic(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Ic(t,7):ah(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}eh(4)}catch(b){}}function qf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ku(n)||"string"==typeof n)Cw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ku(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function Zw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ku(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ec(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ec)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function pm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];eu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)eu(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function eu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=_c.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==va(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const A=va(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>A)&&(3!=A||Nw||this.g&&(this.h.h||this.g.ga()||Kf(this.g)))){this.I||4!=A||7==e||eh(8==e||0>=k?3:2),hm(this);var t=this.g.ba();this.N=t;t:if(qw(this)){var r=Kf(this.g);n="";var s=r.length,u=4==va(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ya(this),Ju(this);var d="";break t}this.h.i=new St.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function GC(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,_=this.g;if((m=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jg(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Di(12),ya(this),Ju(this);break e}yc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fm(this,t)}this.U?(Gf(this,A,d),Nw&&this.i&&3==A&&(Uw(this.V,this.W,"tick",this.fb),this.W.start())):(yc(this.j,this.m,d,null),fm(this,d)),4==A&&ya(this),this.i&&!this.I&&(4==A?uE(this.l,this):(this.i=!1,wc(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Di(12)):(this.o=0,Di(13)),ya(this),Ju(this)}}}catch(A){}},Je.fb=function(){if(this.g){var n=va(this.g),e=this.g.ga();this.C<e.length&&(hm(this),Gf(this,n,e),this.i&&4!=n&&wc(this))}},Je.cancel=function(){this.I=!0,ya(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ES(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(eh(3),Di(17)),ya(this),this.o=2,Ju(this)):ZC(this,this.Y-n)},(Je=Ec.prototype).R=function(){pm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return pm(this),this.g.concat()},Je.get=function(n,e){return eu(this.h,n)?this.h[n]:e},Je.set=function(n,e){eu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var M_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xu){this.g=void 0!==e?e:n.g,th(this,n.j),this.s=n.s,Zf(this,n.i),gm(this,n.m),this.l=n.l,e=n.h;var t=new Wf;t.i=e.i,e.g&&(t.g=new Ec(e.g),t.h=e.h),k_(this,t),this.o=n.o}else n&&(t=String(n).match(M_))?(this.g=!!e,th(this,t[1]||"",!0),this.s=nh(t[2]||""),Zf(this,t[3]||"",!0),gm(this,t[4]),this.l=nh(t[5]||"",!0),k_(this,t[6]||"",!0),this.o=nh(t[7]||"")):(this.g=!!e,this.h=new Wf(null,this.g))}function _a(n){return new Xu(n)}function th(n,e,t){n.j=t?nh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zf(n,e,t){n.i=t?nh(e,!0):e}function gm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function k_(n,e,t){e instanceof Wf?(n.h=e,function WC(n,e){e&&!n.j&&(el(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(O_(this,r),ar(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=rh(e,Qw)),n.h=new Wf(e,n.g))}function gn(n,e,t){n.h.set(e,t)}function zf(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ww),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ww(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rh(e,N_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rh(e,N_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(rh(t,"/"==t.charAt(0)?Yw:Kw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rh(t,IS)),n.join("")};var N_=/[#\/\?@]/g,Kw=/[#\?:]/g,Yw=/[#\?]/g,Qw=/[#\?@]/g,IS=/#/g;function Wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function el(n){n.g||(n.g=new Ec,n.h=0,n.i&&function zC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function O_(n,e){el(n),e=bc(n,e),eu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,eu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&pm(n)))}function Jw(n,e){return el(n),e=bc(n,e),eu(n.g.h,e)}function ar(n,e,t){O_(n,e),0<t.length&&(n.i=null,n.g.set(bc(n,e),Qg(t)),n.h+=t.length)}function bc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function P_(n){this.l=n||YC,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ea&&St.g.Ea()&&St.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Wf.prototype).add=function(n,e){el(this),this.i=null,n=bc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){el(this),this.g.forEach(function(t,r){Cw(t,function(s){n.call(e,s,r,this)},this)},this)},Je.T=function(){el(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},Je.R=function(n){el(this);var e=[];if("string"==typeof n)Jw(this,n)&&(e=kC(e,this.g.get(bc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=kC(e,n[t])}return e},Je.set=function(n,e){return el(this),this.i=null,Jw(this,n=bc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=s;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var YC=10;function F_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function L_(n){return n.h?1:n.g?n.g.size:0}function tl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function V_(n,e){n.g?n.g.add(e):n.h=e}function Xw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function U_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Qg(n.i)}function B_(){}function eE(){this.g=new B_}function CS(n,e,t){const r=t||"";try{qf(n,function(s,u){let d=s;xf(s)&&(d=rm(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function ih(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Xi(n){this.l=n.$b||null,this.j=n.ib||!1}function mm(n,e){vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=j_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}P_.prototype.cancel=function(){if(this.i=U_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},B_.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},B_.prototype.parse=function(n){return St.JSON.parse(n,void 0)},Pr(Xi,A_),Xi.prototype.g=function(){return new mm(this.l,this.j)},Xi.prototype.i=function(n){return function(){return n}}({}),Pr(mm,vr);var j_=0;function Ro(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ti(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ai(n)}function Ai(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=mm.prototype).open=function(n,e){if(this.readyState!=j_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ai(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ti(this)),this.readyState=j_},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ro(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ti(this):Ai(this),3==this.readyState&&Ro(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,Ti(this))},Je.Ta=function(n){this.g&&(this.response=n,Ti(this))},Je.ha=function(){this.g&&Ti(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nE=St.JSON.parse;function Yn(n){vr.call(this),this.headers=new Ec,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rE,this.K=this.L=!1}Pr(Yn,vr);var rE="",QC=/^https?$/i,JC=["POST","PUT"];function $_(n){return"content-type"==n.toLowerCase()}function sh(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iE(n),ym(n)}function iE(n){n.D||(n.D=!0,Fr(n,"complete"),Fr(n,"error"))}function H_(n){if(n.h&&void 0!==Kg&&(!n.C[1]||4!=va(n)||2!=n.ba()))if(n.v&&4==va(n))C_(n.Fa,0,n);else if(Fr(n,"readystatechange"),4==va(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(M_)[1]||null;if(!s&&St.self&&St.self.location){var u=St.self.location.protocol;s=u.substr(0,u.length-1)}r=!QC.test(s?s.toLowerCase():"")}t=r}if(t)Fr(n,"complete"),Fr(n,"success");else{n.m=6;try{var d=2<va(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",iE(n)}}finally{ym(n)}}}function ym(n,e){if(n.g){G_(n);const t=n.g,r=n.C[0]?Yg:null;n.g=null,n.C=null,e||Fr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function G_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function va(n){return n.g?n.g.readyState:0}function Kf(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _m(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function eD(n){let e="";return Xg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gn(n,e,t))}function oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vm(n){this.za=0,this.l=[],this.h=new D_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oh("baseRetryDelayMs",5e3,n),this.$a=oh("retryDelaySeedMs",1e4,n),this.Ya=oh("forwardChannelMaxRetries",2,n),this.ra=oh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new P_(n&&n.concurrentRequestLimit),this.Ca=new eE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ah(n){if(q_(n),3==n.G){var e=n.V++,t=_a(n.F);gn(t,"SID",n.J),gn(t,"RID",e),gn(t,"TYPE","terminate"),lh(n,t),(e=new _c(n,n.h,e,void 0)).K=2,e.v=zf(_a(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=hE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),wc(e)}cE(n)}function uh(n){n.g&&(K_(n),n.g.cancel(),n.g=null)}function q_(n){uh(n),n.u&&(St.clearTimeout(n.u),n.u=null),Em(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function wm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Yf(n)}function Yf(n){F_(n.i)||n.m||(n.m=!0,im(n.Ha,n),n.C=0)}function Z_(n,e){var t;t=e?e.m:n.V++;const r=_a(n.F);gn(r,"SID",n.J),gn(r,"RID",t),gn(r,"AID",n.U),lh(n,r),n.o&&n.s&&_m(r,n.o,n.s),t=new _c(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=z_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),V_(n.i,t),Hf(t,r,e)}function lh(n,e){n.j&&qf({},function(t,r){gn(e,r,t)})}function z_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Or(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let _=0;_<t;_++){let b=s[_].h;const A=s[_].g;if(b-=u,0>b)u=Math.max(0,s[_].h-100),m=!1;else try{CS(A,d,"req"+b+"_")}catch(k){r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function oE(n){n.g||n.u||(n.Y=1,im(n.Ga,n),n.A=0)}function W_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uf(Or(n.Ga,n),lE(n,n.A)),n.A++,0))}function K_(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function aE(n){n.g=new _c(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_a(n.oa);gn(e,"RID","rpc"),gn(e,"SID",n.J),gn(e,"CI",n.N?"0":"1"),gn(e,"AID",n.U),lh(n,e),gn(e,"TYPE","xmlhttp"),n.o&&n.s&&_m(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=zf(_a(e)),t.s=null,t.U=!0,cm(t,n)}function Em(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function uE(n,e){var t=null;if(n.g==e){Em(n),K_(n),n.g=null;var r=2}else{if(!tl(n.i,e))return;t=e.D,Xw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Fr(r=Lf(),new T_(r,t,e,s)),Yf(n)}else oE(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function sE(n,e){return!(L_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uf(Or(n.Ha,n,e),lE(n,n.C)),n.C++,0)))}(n,e)||2==r&&W_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Ic(n,5);break;case 4:Ic(n,10);break;case 3:Ic(n,6);break;default:Ic(n,2)}}function lE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ic(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Or(n.jb,n);t||(t=new Xu("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||th(t,"https"),zf(t)),function tE(n,e){const t=new D_;if(St.Image){const r=new Image;r.onload=Mf(ih,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Mf(ih,t,r,"TestLoadImage: error",!1,e),r.onabort=Mf(ih,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mf(ih,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Di(2);n.G=0,n.j&&n.j.va(e),cE(n),q_(n)}function cE(n){n.G=0,n.I=-1,n.j&&((0!=U_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Qg(n.l),n.l.length=0),n.j.ua())}function dE(n,e,t){let r=function R_(n){return n instanceof Xu?_a(n):new Xu(n,void 0)}(t);if(""!=r.i)e&&Zf(r,e+"."+r.i),gm(r,r.m);else{const s=St.location;r=function zw(n,e,t,r){var s=new Xu(null,void 0);return n&&th(s,n),e&&Zf(s,e),t&&gm(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&Xg(n.aa,function(s,u){gn(r,u,s)}),t=n.sa,(e=n.D)&&t&&gn(r,e,t),gn(r,"VER",n.ma),lh(n,r),r}function hE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Ba&&!n.qa?new Xi({ib:!0}):n.qa)).L=n.H,e}function fE(){}function bm(){if(lc&&!(10<=Number(Yd)))throw Error("Environmental error: no available transport.")}function bs(n,e){vr.call(this),this.g=new vm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Jg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ch(this)}function pE(n){um.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function gE(){lm.call(this),this.status=1}function ch(n){this.g=n}(Je=Yn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jf.g(),this.C=function Hw(n){return n.h||(n.h=n.i())}(this.u?this.u:jf),this.g.onreadystatechange=Or(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void sh(this,u)}n=t||"";const s=new Ec(this.headers);r&&qf(r,function(u,d){s.set(d,u)}),r=function Dw(n){e:{var e=$_;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=St.FormData&&n instanceof St.FormData,!(0<=Iw(JC,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{G_(this),0<this.B&&((this.K=function XC(n){return lc&&function PC(){return function Mw(n){var e=OC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Tw(String(Kd)).split("."),t=Tw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Aw(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Aw(0==s[2].length,0==u[2].length)||Aw(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.pa,this)):this.A=C_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){sh(this,u)}},Je.pa=function(){void 0!==Kg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fr(this,"complete"),Fr(this,"abort"),ym(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ym(this,!0)),Yn.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?H_(this):this.cb())},Je.cb=function(){H_(this)},Je.ba=function(){try{return 2<va(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nE(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=vm.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new _c(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=RC(u),NC(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=z_(this,s,e),gn(t=_a(this.F),"RID",n),gn(t,"CVER",22),this.D&&gn(t,"X-HTTP-Session-Id",this.D),lh(this,t),this.o&&u&&_m(t,this.o,u),V_(this.i,s),this.Ra&&gn(t,"TYPE","init"),this.ja?(gn(t,"$req",e),gn(t,"SID","null"),s.$=!0,Hf(s,t,null)):Hf(s,t,e),this.G=2}}else 3==this.G&&(n?Z_(this,n):0==this.l.length||F_(this.i)||Z_(this))},Je.Ga=function(){if(this.u=null,aE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uf(Or(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Di(10),uh(this),aE(this))},Je.ab=function(){null!=this.v&&(this.v=null,uh(this),W_(this),Di(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Di(2)):(this.h.info("Failed to ping google.com"),Di(1))},(Je=fE.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},bm.prototype.g=function(n,e){return new bs(n,e)},Pr(bs,vr),bs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),im(Or(n.hb,n,e))),Di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=dE(n,null,n.W),Yf(n)},bs.prototype.close=function(){ah(this.g)},bs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wm(this.g,e)}else this.v?((e={}).__data__=rm(n),wm(this.g,e)):wm(this.g,n)},bs.prototype.M=function(){this.g.j=null,delete this.j,ah(this.g),delete this.g,bs.Z.M.call(this)},Pr(pE,um),Pr(gE,lm),Pr(ch,fE),ch.prototype.xa=function(){Fr(this.g,"a")},ch.prototype.wa=function(n){Fr(this.g,new pE(n))},ch.prototype.va=function(n){Fr(this.g,new gE(n))},ch.prototype.ua=function(){Fr(this.g,"b")},bm.prototype.createWebChannel=bm.prototype.g,bs.prototype.send=bs.prototype.u,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,am.NO_ERROR=0,am.TIMEOUT=8,am.HTTP_ERROR=6,$w.COMPLETE="complete",S_.EventType=Bf,Bf.OPEN="a",Bf.CLOSE="b",Bf.ERROR="c",Bf.MESSAGE="d",vr.prototype.listen=vr.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.La,Yn.prototype.getLastErrorCode=Yn.prototype.Da,Yn.prototype.getStatus=Yn.prototype.ba,Yn.prototype.getResponseJson=Yn.prototype.Qa,Yn.prototype.getResponseText=Yn.prototype.ga,Yn.prototype.send=Yn.prototype.ea;var tD=fa.createWebChannelTransport=function(){return new bm},mE=fa.getStatEventTarget=function(){return Lf()},Im=fa.ErrorCode=am,yE=fa.EventType=$w,_E=fa.Event=Qs,Y_=fa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vE=fa.FetchXmlHttpFactory=Xi,Qf=fa.WebChannel=S_,wE=fa.XhrIo=Yn;const Q_="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let Cc="9.8.4";const es=new qu.Yd("@firebase/firestore");function J_(){return es.logLevel}function Ne(n,...e){if(es.logLevel<=qu.in.DEBUG){const t=e.map(EE);es.debug(`Firestore (${Cc}): ${n}`,...t)}}function Er(n,...e){if(es.logLevel<=qu.in.ERROR){const t=e.map(EE);es.error(`Firestore (${Cc}): ${n}`,...t)}}function Dc(n,...e){if(es.logLevel<=qu.in.WARN){const t=e.map(EE);es.warn(`Firestore (${Cc}): ${n}`,...t)}}function EE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function Ct(n,e){n||rt()}function be(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wr.UNAUTHENTICATED))}shutdown(){}}class Cm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dm{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let d=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new Jf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new wr(e)}}class Hn{constructor(e,t,r){this.type="FirstParty",this.user=wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class TS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Hn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new X_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ev{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=bE(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function Tc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function IE(n){return n+"\0"}class In{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new In(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new In(0,0))}static max(){return new Dt(new In(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tu{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends tu{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const sD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends tu{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return sD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new Re(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Gt.fromString(e))}static fromName(e){return new qe(Gt.fromString(e).popFirst(5))}static empty(){return new qe(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Gt(e.slice()))}}class Xf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Tm(n){return n.fields.find(e=>2===e.kind)}function nl(n){return n.fields.filter(e=>2!==e.kind)}Xf.UNKNOWN_ID=-1;class Am{constructor(e,t){this.fieldPath=e,this.kind=t}}class nu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nu(0,Is.min())}}function dh(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(1e9===r?new In(t+1,0):new In(t,r));return new Is(s,qe.empty(),e)}function CE(n){return new Is(n.readTime,n.key,-1)}class Is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Is(Dt.min(),qe.empty(),-1)}static max(){return new Is(Dt.max(),qe.empty(),-1)}}function tv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const nv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ru(n){return iv.apply(this,arguments)}function iv(){return iv=(0,ge.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==nv)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),iv.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},_=>r(_))}),d=!0,u===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const u=e.length,d=new Array(u);let m=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(A=>{d[b]=A,++m,m===u&&r(d)},A=>s(A))}})}static doWhile(e,t){return new oe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Sm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Lr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new xm(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const s=sv(r.target.error);this.T.reject(new xm(e,s))}}static open(e,t,r,s){try{return new Sm(t,e.transaction(s,r))}catch(u){throw new xm(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xS(t)}}class No{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===No.v((0,Tt.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),rl(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Tt.hl)())return!1;if(No.S())return!0;const e=(0,Tt.z$)(),t=No.v(e),r=0<t&&t<10,s=No.D(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new xm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new Re(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new xm(e,m))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.P.O(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ge.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const _=Sm.open(u.db,e,d?"readonly":"readwrite",r),b=s(_).next(A=>(_.R(),A)).catch(A=>(_.abort(A),oe.reject(A))).toPromise();return b.catch(()=>{}),yield _.A,b}catch(_){const b=_,A="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SS{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return rl(this.$.delete())}}class xm extends Re{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ac(n){return"IndexedDbTransactionError"===n.name}class xS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rl(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),rl(this.store.add(e))}get(e){return rl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),rl(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),rl(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new oe((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}W(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.G(s,(u,d,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Y(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=u=>{const d=sv(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}G(e,t){const r=[];return new oe((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const _=new SS(m),b=t(m.primaryKey,m.value,_);if(b instanceof oe){const A=b.catch(k=>(_.done(),oe.reject(k)));r.push(A)}_.isDone?s():null===_.U?m.continue():m.continue(_.U)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rl(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=sv(r.target.error);t(s)}})}let ep=!1;function sv(n){const e=No.v((0,Tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ep||(ep=!0,setTimeout(()=>{throw r},0)),r}}return n}class oD{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Ac(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ru(r)}yield t.Z(1)}))}}class DE{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let s=t,u=!0;return oe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ne("IndexBackiller",`Processing collection: ${d}`),this.nt(e,d,s).next(m=>{s-=m,r.add(d)});u=!1})).next(()=>t-s)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.st(s,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}st(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=CE(u);tv(d,r)>0&&(r=d)}),new Is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function TE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vr.ot=-1;class Gn{constructor(e,t){this.comparator=e,this.root=t||Ur.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mm(this.root,e,this.comparator,!0)}}class Mm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Ur.RED,this.left=null!=s?s:Ur.EMPTY,this.right=null!=u?u:Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ur(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ur.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class on{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SE(this.data.getIterator())}getIteratorFrom(e){return new SE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class SE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(n){return n.hasNext()?n.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new on(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new br(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const ME=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function il(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=ME.exec(n);if(Ct(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nn(n.seconds),nanos:Nn(n.nanos)}}function Nn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xc(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function tp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kE(n){const e=n.mapValue.fields.__previous_value__;return tp(e)?kE(e):e}function hh(n){const e=il(n.mapValue.fields.__local_write_time__.timestampValue);return new In(e.seconds,e.nanos)}class RE{constructor(e,t,r,s,u,d,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=_}}class iu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}function np(n){return null==n}function rp(n){return 0===n&&1/n==-1/0}function km(n){return"number"==typeof n&&Number.isInteger(n)&&!rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ip={nullValue:"NULL_VALUE"};function Mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tp(n)?4:FE(n)?9007199254740991:10:rt()}function wa(n,e){if(n===e)return!0;const t=Mc(n);if(t!==Mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hh(n).isEqual(hh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=il(r.timestampValue),d=il(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,xc(n.bytesValue).isEqual(xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Nn(r.geoPointValue.latitude)===Nn(s.geoPointValue.latitude)&&Nn(r.geoPointValue.longitude)===Nn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Nn(r.integerValue)===Nn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Nn(r.doubleValue),d=Nn(s.doubleValue);return u===d?rp(u)===rp(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Tc(n.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(TE(u)!==TE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!wa(u[m],d[m])))return!1;return!0}(n,e);default:return rt()}var s}function sp(n,e){return void 0!==(n.values||[]).find(t=>wa(t,e))}function ol(n,e){if(n===e)return 0;const t=Mc(n),r=Mc(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=Nn(s.integerValue||s.doubleValue),m=Nn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return NE(n.timestampValue,e.timestampValue);case 4:return NE(hh(n),hh(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=xc(s),m=xc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let _=0;_<d.length&&_<m.length;_++){const b=Rt(d[_],m[_]);if(0!==b)return b}return Rt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Rt(Nn(s.latitude),Nn(u.latitude));return 0!==d?d:Rt(Nn(s.longitude),Nn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let _=0;_<d.length&&_<m.length;++_){const b=ol(d[_],m[_]);if(b)return b}return Rt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===sl.mapValue&&u===sl.mapValue)return 0;if(s===sl.mapValue)return 1;if(u===sl.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),_=u.fields||{},b=Object.keys(_);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const k=Rt(m[A],b[A]);if(0!==k)return k;const U=ol(d[m[A]],_[b[A]]);if(0!==U)return U}return Rt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function NE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=il(n),r=il(e),s=Rt(t.seconds,r.seconds);return 0!==s?s:Rt(t.nanos,r.nanos)}function fh(n){return ov(n)}function ov(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=il(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xc(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=ov(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${ov(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function kc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rm(n){return!!n&&"integerValue"in n}function ph(n){return!!n&&"arrayValue"in n}function OE(n){return!!n&&"nullValue"in n}function PE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function op(n){return!!n&&"mapValue"in n}function ap(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ap(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ap(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function aD(n){return"nullValue"in n?ip:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?kc(iu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function av(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?kc(iu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sl:rt()}function Nm(n,e){const t=ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uv(n,e){const t=ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}setAll(e){let t=Qn.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=ap(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];op(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Sc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ir(ap(this.value))}}function LE(n){const e=[];return Sc(n.fields,(t,r)=>{const s=new Qn([t]);if(op(r)){const u=LE(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new Cs(e)}class hn{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,Dt.min(),Dt.min(),Ir.empty(),0)}static newFoundDocument(e,t,r){return new hn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new hn(e,2,t,Dt.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Dt.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lv{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.ut=null}}function VE(n,e=null,t=[],r=[],s=null,u=null,d=null){return new lv(n,e,t,r,s,u,d)}function al(n){const e=be(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+fh(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),np(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fh(r)).join(",")),e.ut=t}return e.ut}function gh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!$E(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pm(n.startAt,e.startAt)&&Pm(n.endAt,e.endAt)}function Om(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function up(n,e){return n.filters.filter(t=>t instanceof ur&&t.field.isEqual(e))}function lD(n,e,t){let r=ip,s=!0;for(const u of up(n,e)){let d=ip,m=!0;switch(u.op){case"<":case"<=":d=aD(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=ip}Nm({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Nm({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function UE(n,e,t){let r=sl,s=!0;for(const u of up(n,e)){let d=sl,m=!0;switch(u.op){case">=":case">":d=av(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=sl}uv({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];uv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class ur extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new cD(e,t,r):"array-contains"===t?new MS(e,r):"in"===t?new jE(e,r):"not-in"===t?new dD(e,r):"array-contains-any"===t?new hD(e,r):new ur(e,t,r)}static ct(e,t,r){return"in"===t?new mh(e,r):new lp(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ol(t,this.value)):null!==t&&Mc(this.value)===Mc(t)&&this.at(ol(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class cD extends ur{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.at(t)}}class mh extends ur{constructor(e,t){super(e,"in",t),this.keys=BE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lp extends ur{constructor(e,t){super(e,"not-in",t),this.keys=BE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class MS extends ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ph(t)&&sp(t.arrayValue,this.value)}}class jE extends ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sp(this.value.arrayValue,t)}}class dD extends ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sp(this.value.arrayValue,t)}}class hD extends ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ph(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}}class ul{constructor(e,t){this.position=e,this.inclusive=t}}class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function $E(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):ol(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Pm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wa(n.position[t],e.position[t]))return!1;return!0}class Js{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=_,this.lt=null,this.ft=null}}function _h(n,e,t,r,s,u,d,m){return new Js(n,e,t,r,s,u,d,m)}function vh(n){return new Js(n)}function Fm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dv(n){for(const e of n.filters)if(e.ht())return e.field;return null}function hv(n){return null!==n.collectionGroup}function ll(n){const e=be(n);if(null===e.lt){e.lt=[];const t=dv(e),r=Fm(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new yh(t)),e.lt.push(new yh(Qn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new yh(Qn.keyField(),u))}}}return e.lt}function Xs(n){const e=be(n);if(!e.ft)if("F"===e.limitType)e.ft=VE(e.path,e.collectionGroup,ll(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ll(e))t.push(new yh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ul(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ul(e.startAt.position,e.startAt.inclusive):null;e.ft=VE(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.ft}function fD(n,e,t){return new Js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cp(n,e){return gh(Xs(n),Xs(e))&&n.limitType===e.limitType}function GE(n){return`${al(Xs(n))}|lt:${n.limitType}`}function cl(n){return`Query(target=${function uD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${fh(r.value)}`;var r}).join(", ")}]`),np(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>fh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>fh(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function Lm(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):qe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=cv(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,ll(t),r)||t.endAt&&!function(s,u,d){const m=cv(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,ll(t),r)));var t,r}function Rc(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pD(n){return(e,t)=>{let r=!1;for(const s of ll(n)){const u=qE(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function qE(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),_=d.data.field(s);return null!==m&&null!==_?ol(m,_):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function ZE(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function gD(n){return{integerValue:""+n}}function fv(n,e){return km(e)?gD(e):ZE(n,e)}class pv{constructor(){this._=void 0}}function zE(n,e,t){return n instanceof Nc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof dl?WE(n,e):n instanceof Oc?KE(n,e):function(r,s){const u=mv(r,s),d=YE(u)+YE(r._t);return Rm(u)&&Rm(r._t)?gD(d):ZE(r.wt,d)}(n,e)}function gv(n,e,t){return n instanceof dl?WE(n,e):n instanceof Oc?KE(n,e):t}function mv(n,e){return n instanceof wh?Rm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Nc extends pv{}class dl extends pv{constructor(e){super(),this.elements=e}}function WE(n,e){const t=QE(e);for(const r of n.elements)t.some(s=>wa(s,r))||t.push(r);return{arrayValue:{values:t}}}class Oc extends pv{constructor(e){super(),this.elements=e}}function KE(n,e){let t=QE(e);for(const r of n.elements)t=t.filter(s=>!wa(s,r));return{arrayValue:{values:t}}}class wh extends pv{constructor(e,t){super(),this.wt=e,this._t=t}}function YE(n){return Nn(n.integerValue||n.doubleValue)}function QE(n){return ph(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dp{constructor(e,t){this.field=e,this.transform=t}}class JE{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class pp{}function yv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hl(n.key,Cn.none()):new Eh(n.key,n.data,Cn.none());{const t=n.data,r=Ir.empty();let s=new on(Qn.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new su(n.key,r,new Cs(s.toArray()),Cn.none())}}function XE(n,e,t){n instanceof Eh?function(r,s,u){const d=r.value.clone(),m=bh(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof su?function(r,s,u){if(!fp(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=bh(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(nb(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gp(n,e,t,r){return n instanceof Eh?function(s,u,d,m){if(!fp(s.precondition,u))return d;const _=s.value.clone(),b=rb(s.fieldTransforms,m,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof su?function(s,u,d,m){if(!fp(s.precondition,u))return d;const _=rb(s.fieldTransforms,m,u),b=u.data;return b.setAll(nb(s)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,fp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function eb(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=mv(r.transform,s||null);null!=u&&(null===t&&(t=Ir.empty()),t.set(r.field,u))}return t||null}function tb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Tc(t,r,(s,u)=>function hp(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dl&&r instanceof dl||t instanceof Oc&&r instanceof Oc?Tc(t.elements,r.elements,wa):t instanceof wh&&r instanceof wh?wa(t._t,r._t):t instanceof Nc&&r instanceof Nc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Eh extends pp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class su extends pp{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bh(n,e,t){const r=new Map;Ct(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,gv(d,m,t[s]))}return r}function rb(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,zE(u,d,e))}return r}class hl extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eo extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mD{constructor(e){this.count=e}}var On,Bt;function ib(n){switch(n){default:return rt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function sb(n){if(void 0===n)return Er("GRPC error has no .code"),fe.UNKNOWN;switch(n){case On.OK:return fe.OK;case On.CANCELLED:return fe.CANCELLED;case On.UNKNOWN:return fe.UNKNOWN;case On.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case On.INTERNAL:return fe.INTERNAL;case On.UNAVAILABLE:return fe.UNAVAILABLE;case On.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case On.NOT_FOUND:return fe.NOT_FOUND;case On.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case On.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case On.ABORTED:return fe.ABORTED;case On.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case On.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case On.DATA_LOSS:return fe.DATA_LOSS;default:return rt()}}(Bt=On||(On={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Sc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return AE(this.inner)}size(){return this.innerSize}}const Vm=new Gn(qe.comparator);function Jr(){return Vm}const ob=new Gn(qe.comparator);function mp(...n){let e=ob;for(const t of n)e=e.insert(t.key,t);return e}function _v(n){let e=ob;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Po(){return Ih()}function Um(){return Ih()}function Ih(){return new fl(n=>n.toString(),(n,e)=>n.isEqual(e))}const yD=new Gn(qe.comparator),_D=new on(qe.comparator);function Ft(...n){let e=_D;for(const t of n)e=e.add(t);return e}const vv=new on(Rt);function Ch(){return vv}class Dh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Dh(Dt.min(),r,Ch(),Jr(),Ft())}}class Pc{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pc(br.EMPTY_BYTE_STRING,t,Ft(),Ft(),Ft())}}class Th{constructor(e,t,r,s){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=s}}class ab{constructor(e,t){this.targetId=e,this.It=t}}class ub{constructor(e,t,r=br.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class lb{constructor(){this.Tt=0,this.Et=Bm(),this.At=br.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ft(),t=Ft(),r=Ft();return this.Et.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:rt()}}),new Pc(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Bm()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class vD{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Jr(),this.Bt=wv(),this.Lt=new on(Rt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,s)=>{this.jt(s)&&t(s)})}zt(e){const t=e.targetId,r=e.It.count,s=this.Ht(t);if(s){const u=s.target;if(Om(u))if(0===r){const d=new qe(u.path);this.Kt(t,d,hn.newNoDocument(d,Dt.min()))}else Ct(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,d)=>{const m=this.Ht(d);if(m){if(u.current&&Om(m.target)){const _=new qe(m.target.path);null!==this.$t.get(_)||this.Xt(d,_)||this.Kt(d,_,hn.newNoDocument(_,e))}u.vt&&(t.set(d,u.St()),u.Dt())}});let r=Ft();this.Bt.forEach((u,d)=>{let m=!0;d.forEachWhile(_=>{const b=this.Ht(_);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,d)=>d.setReadTime(e));const s=new Dh(e,t,this.Lt,this.$t,r);return this.$t=Jr(),this.Bt=wv(),this.Lt=new on(Rt),s}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,t)?s.Ct(t,1):s.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new lb,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new on(Rt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new lb),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function wv(){return new Gn(qe.comparator)}function Bm(){return new Gn(qe.comparator)}const cb={asc:"ASCENDING",desc:"DESCENDING"},wD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class db{constructor(e,t){this.databaseId=e,this.dt=t}}function Ah(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hb(n,e){return n.dt?e.toBase64():e.toUint8Array()}function fb(n,e){return Ah(n,e.toTimestamp())}function Cr(n){return Ct(!!n),Dt.fromTimestamp(function(e){const t=il(e);return new In(t.seconds,t.nanos)}(n))}function Ev(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bv(n){const e=Gt.fromString(n);return Ct(qm(e)),e}function Sh(n,e){return Ev(n.databaseId,e.path)}function Dn(n,e){const t=bv(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(ED(t))}function pl(n,e){return Ev(n.databaseId,e)}function pb(n){const e=bv(n);return 4===e.length?Gt.emptyPath():ED(e)}function yp(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ED(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xh(n,e,t){return{name:Sh(n,e),fields:t.value.mapValue.fields}}function gb(n,e,t){const r=Dn(n,e.name),s=Cr(e.updateTime),u=new Ir({mapValue:{fields:e.fields}}),d=hn.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Mh(n,e){let t;if(e instanceof Eh)t={update:xh(n,e.key,e.value)};else if(e instanceof hl)t={delete:Sh(n,e.key)};else if(e instanceof su)t={update:xh(n,e.key,e.data),updateMask:CD(e.fieldMask)};else{if(!(e instanceof eo))return rt();t={verify:Sh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof Nc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof dl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Oc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wh)return{fieldPath:u.field.canonicalString(),increment:d._t};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:fb(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function Cv(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Cn.updateTime(Cr(s.updateTime)):void 0!==s.exists?Cn.exists(s.exists):Cn.none():Cn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(Ct("REQUEST_TIME"===d.setToServerValue),m=new Nc):"appendMissingElements"in d?m=new dl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Oc(d.removeAllFromArray.values||[]):"increment"in d?m=new wh(u,d.increment):rt();const _=Qn.fromServerFormat(d.fieldPath);return new dp(_,m)}(n,s)):[];var s;if(e.update){const s=Dn(n,e.update.name),u=new Ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Cs((e.updateMask.fieldPaths||[]).map(b=>Qn.fromServerFormat(b)));return new su(s,u,d,t,r)}return new Eh(s,u,t,r)}if(e.delete){const s=Dn(n,e.delete);return new hl(s,t)}if(e.verify){const s=Dn(n,e.verify);return new eo(s,t)}return rt()}function jm(n,e){return{documents:[pl(n,e.path)]}}function Dv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pl(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pl(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0===_.length)return;const b=_.map(A=>function(k){if("=="===k.op){if(PE(k.value))return{unaryFilter:{field:kh(k.field),op:"IS_NAN"}};if(OE(k.value))return{unaryFilter:{field:kh(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(PE(k.value))return{unaryFilter:{field:kh(k.field),op:"IS_NOT_NAN"}};if(OE(k.value))return{unaryFilter:{field:kh(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(k.field),op:mb(k.op),value:k.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:kh((A=b).field),direction:kS(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.dt||np(b)?b:{value:b});var b,m,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Tv(n){let e=pb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=Hm(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new yh(Fc((k=A).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(A){let k;return k="object"==typeof A?A.value:A,np(k)?null:k}(t.limit));let _=null;var A;t.startAt&&(_=new ul((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new ul(A.values||[],!A.before)}(t.endAt)),_h(e,s,d,u,m,"F",_,b)}function Hm(n){return n?void 0!==n.unaryFilter?[yb(n)]:void 0!==n.fieldFilter?[Gm(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Hm(e)).reduce((e,t)=>e.concat(t)):rt():[]}function kS(n){return cb[n]}function mb(n){return wD[n]}function kh(n){return{fieldPath:n.canonicalString()}}function Fc(n){return Qn.fromServerFormat(n.fieldPath)}function Gm(n){return ur.create(Fc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function yb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Fc(n.unaryFilter.field);return ur.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Fc(n.unaryFilter.field);return ur.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fc(n.unaryFilter.field);return ur.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fc(n.unaryFilter.field);return ur.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function CD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qm(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_b(e)),e=RS(n.get(t),e);return _b(e)}function RS(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function _b(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let _;0===s.length?_=m:(s+=m,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:rt()}u=d+2}return new Gt(r)}const Av=["userId","batchId"];function _p(n,e){return[n,Xr(e)]}function vb(n,e,t){return[n,Xr(e),t]}const wb={},Eb=["prefixPath","collectionGroup","readTime","documentId"],DD=["prefixPath","collectionGroup","documentId"],TD=["collectionGroup","readTime","prefixPath","documentId"],bb=["canonicalId","targetId"],AD=["targetId","path"],Ib=["path","targetId"],Cb=["collectionId","parent"],Db=["indexId","uid"],Tb=["uid","sequenceNumber"],SD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xD=["indexId","uid","orderedDocumentKey"],NS=["userId","collectionPath","documentId"],Ab=["userId","collectionPath","largestBatchId"],OS=["userId","collectionGroup","largestBatchId"],MD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PS=[...MD,"documentOverlays"],kD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RD=kD,FS=[...RD,"indexConfiguration","indexState","indexEntries"];class Sb extends rv{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ei(n,e){const t=be(n);return No.N(t.ee,e)}class Rh{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&XE(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Um();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(s.key)?null:m;const _=yv(d,m);null!==_&&r.set(s.key,_),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(t,r)=>tb(t,r))&&Tc(this.baseMutations,e.baseMutations,(t,r)=>tb(t,r))}}class xb{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ct(e.mutations.length===r.length);let s=yD;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new xb(e,t,r,s)}}class Zm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ba{constructor(e,t,r,s,u=Dt.min(),d=Dt.min(),m=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sv{constructor(e){this.ne=e}}function ND(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sh(s=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ah(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gl(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:gl(e.version)}}var s,u;return r}function Nh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lc(n){const e=new In(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function ml(n,e){const t=(e.baseMutations||[]).map(u=>Cv(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Cv(n.ne,u)),s=In.fromMillis(e.localWriteTimeMs);return new Rh(e.batchId,s,t,r)}function zm(n){const e=Lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lc(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var s;return void 0!==n.query.documents?(Ct(1===(s=n.query).documents.length),r=Xs(vh(pb(s.documents[0])))):r=Xs(Tv(n.query)),new ba(r,n.targetId,0,n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function kb(n,e){const t=gl(e.snapshotVersion),r=gl(e.lastLimboFreeSnapshotVersion);let s;s=Om(e.target)?jm(n.ne,e.target):Dv(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:al(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function xv(n){const e=Tv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fD(e,e.limit,"L"):e}function vp(n,e){return new Zm(e.largestBatchId,Cv(n.ne,e.overlayMutation))}function Rb(n,e){const t=e.path.lastSegment();return[n,Xr(e.path.popLast()),t]}function OD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:gl(r.readTime),documentKey:Xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class LS{getBundleMetadata(e,t){return PD(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Lc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return PD(e).put({bundleId:(r=t).id,createTime:gl(Cr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Nb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:xv(s.bundledQuery),readTime:Lc(s.readTime)};var s})}saveNamedQuery(e,t){return Nb(e).put({name:(r=t).name,readTime:gl(Cr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PD(n){return ei(n,"bundles")}function Nb(n){return ei(n,"namedQueries")}class Wm{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Wm(e,t.uid||"")}getOverlay(e,t){return wp(e).get(Rb(this.userId,t)).next(r=>r?vp(this.wt,r):null)}getOverlays(e,t){const r=Po();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new Zm(t,d);s.push(this.ie(e,m))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Xr(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(wp(e).W("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Po(),u=Xr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return wp(e).K("collectionPathOverlayIndex",d).next(m=>{for(const _ of m){const b=vp(this.wt,_);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Po();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wp(e).J({index:"collectionGroupOverlayIndex",range:m},(_,b,A)=>{const k=vp(this.wt,b);u.size()<s||k.largestBatchId===d?(u.set(k.getKey(),k),d=k.largestBatchId):A.done()}).next(()=>u)}ie(e,t){return wp(e).put(function(r,s,u){const[d,m,_]=Rb(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Mh(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function wp(n){return ei(n,"documentOverlays")}class Oh{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Nn(e.integerValue));else if("doubleValue"in e){const r=Nn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),rp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(xc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?FE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):rt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const s of Object.keys(r))this.le(s,t),this.oe(r[s],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const s of r)this.oe(s,t)}_e(e,t){this.ce(t,37),qe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function FD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Km(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=FD(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Oh.ye=new Oh;class LD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const s=t.codePointAt(0);this.Ie(240|s>>>18),this.Ie(128|63&s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}ve(e){const t=this.Ve(e),r=Km(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}De(e){const t=this.Ve(e),r=Km(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Fo{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class VD{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Vc{constructor(){this.Me=new LD,this.Fe=new Fo(this.Me),this.$e=new VD(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Uc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Uc(this.indexId,this.documentKey,this.arrayValue,r)}}function Bc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ym(n.arrayValue,e.arrayValue),0!==t?t:(t=Ym(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Ym(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ob{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Tm(e);if(void 0!==t&&!this.Qe(t))return!1;const r=nl(e);let s=0,u=0;for(;s<r.length&&this.Qe(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ke){const d=r[s];if(!this.je(this.Ke,d)||!this.We(this.Ue[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Ue.length||!this.We(this.Ue[u++],d))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Pb{constructor(){this.ze=new Mv}addToCollectionParentIndex(e,t){return this.ze.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Is.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Mv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new on(Gt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new on(Gt.comparator)).toArray()}}const Ep=new Uint8Array(0);class UD{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Mv,this.Je=new fl(r=>al(r),(r,s)=>gh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:Xr(s)};return Fb(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[IE(t),""],!1,!0);return Fb(e).K(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ea(d.parent))}return r})}addFieldIndex(e,t){const r=Ph(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=Lo(e);return u.next(m=>{d.put(OD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Ph(e),s=Lo(e),u=bp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bp(e);let s=!0;const u=new Map;return oe.forEach(this.Ye(t),d=>this.Xe(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=Ft();const m=[];return oe.forEach(u,(_,b)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${al(t)}`);const k=function(gt,Ve){const We=Tm(Ve);if(void 0===We)return null;for(const xt of up(gt,We.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(b,_),U=function(gt,Ve){const We=new Map;for(const xt of nl(Ve))for(const Jn of up(gt,xt.fieldPath))switch(Jn.op){case"==":case"in":We.set(xt.fieldPath.canonicalString(),Jn.value);break;case"not-in":case"!=":return We.set(xt.fieldPath.canonicalString(),Jn.value),Array.from(We.values())}return null}(b,_),B=function(gt,Ve){const We=[];let xt=!0;for(const Jn of nl(Ve)){const is=0===Jn.kind?lD(gt,Jn.fieldPath,gt.startAt):UE(gt,Jn.fieldPath,gt.startAt);We.push(is.value),xt&&(xt=is.inclusive)}return new ul(We,xt)}(b,_),X=function(gt,Ve){const We=[];let xt=!0;for(const Jn of nl(Ve)){const is=0===Jn.kind?UE(gt,Jn.fieldPath,gt.endAt):lD(gt,Jn.fieldPath,gt.endAt);We.push(is.value),xt&&(xt=is.inclusive)}return new ul(We,xt)}(b,_),xe=this.Ze(_,b,B),Oe=this.Ze(_,b,X),pt=this.tn(_,b,U),_t=this.en(_.indexId,k,xe,B.inclusive,Oe,X.inclusive,pt);return oe.forEach(_t,gt=>r.j(gt,t.limit).next(Ve=>{Ve.forEach(We=>{const xt=qe.fromSegments(We.documentKey);d.has(xt)||(d=d.add(xt),m.push(xt))})}))}).next(()=>m)}return oe.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,s,u,d,m){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),A=[];for(let k=0;k<_;++k){const U=t?this.nn(t[k/b]):Ep,B=this.sn(e,U,r[k%b],s),X=this.rn(e,U,u[k%b],d),xe=m.map(Oe=>this.sn(e,U,Oe,!0));A.push(...this.createRange(B,X,xe))}return A}sn(e,t,r,s){const u=new Uc(e,qe.empty(),t,r);return s?u:u.Le()}rn(e,t,r,s){const u=new Uc(e,qe.empty(),t,r);return s?u.Le():u}Xe(e,t){const r=new Ob(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const m of u)r.Ge(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return oe.forEach(this.Ye(t),s=>this.Xe(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new on(Qn.comparator),_=!1;for(const b of d.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:m=m.add(A.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Vc;for(const s of nl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.Be(s.kind);Oh.ye.re(u,d)}return r.Oe()}nn(e){const t=new Vc;return Oh.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Vc;return Oh.ye.re(kc(this.databaseId,t),r.Be(function(s){const u=nl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let s=[];s.push(new Vc);let u=0;for(const d of nl(e)){const m=r[u++];for(const _ of s)if(this.cn(t,d.fieldPath)&&ph(m))s=this.an(s,d,m);else{const b=_.Be(d.kind);Oh.ye.re(m,b)}}return this.hn(s)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const _=new Vc;_.seed(m.Oe()),Oh.ye.re(d,_.Be(t.kind)),u.push(_)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof ur&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ph(e),s=Lo(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const d=[];return oe.forEach(u,m=>s.get([m.indexId,this.uid]).next(_=>{d.push(function(b,A){const k=A?new nu(A.sequenceNumber,new Is(Lc(A.readTime),new qe(Ea(A.documentKey)),A.largestBatchId)):nu.empty(),U=b.fields.map(([B,X])=>new Am(Qn.fromServerFormat(B),X));return new Xf(b.indexId,b.collectionGroup,U,k)}(m,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Rt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Ph(e),u=Lo(e);return this.ln(e).next(d=>s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,_=>u.put(OD(_.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),oe.forEach(m,_=>this.fn(e,s,_).next(b=>{const A=this.dn(u,_);return b.isEqual(A)?oe.resolve():this._n(e,u,_,b,A)}))))})}wn(e,t,r,s){return bp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,s){return bp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const s=bp(e);let u=new on(Bc);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(d,m)=>{u=u.add(new Uc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new on(Bc);const s=this.on(t,e);if(null==s)return r;const u=Tm(t);if(null!=u){const d=e.data.field(u.fieldPath);if(ph(d))for(const m of d.arrayValue.values||[])r=r.add(new Uc(t.indexId,e.key,this.nn(m),s))}else r=r.add(new Uc(t.indexId,e.key,Ep,s));return r}_n(e,t,r,s,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,_,b,A,k){const U=m.getIterator(),B=_.getIterator();let X=Oo(U),xe=Oo(B);for(;X||xe;){let Oe=!1,pt=!1;if(X&&xe){const _t=b(X,xe);_t<0?pt=!0:_t>0&&(Oe=!0)}else null!=X?pt=!0:Oe=!0;Oe?(A(xe),xe=Oo(B)):pt?(k(X),X=Oo(U)):(X=Oo(U),xe=Oo(B))}}(s,u,Bc,m=>{d.push(this.wn(e,t,r,m))},m=>{d.push(this.mn(e,t,r,m))}),oe.waitFor(d)}ln(e){let t=1;return Lo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Bc(d,m)).filter((d,m,_)=>!m||0!==Bc(d,_[m-1]));const s=[];s.push(e);for(const d of r){const m=Bc(d,e),_=Bc(d,t);if(0===m)s[0]=e.Le();else if(m>0&&_<0)s.push(d),s.push(d.Le());else if(_>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,Ep,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,Ep,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kv)}getMinOffset(e,t){return oe.mapArray(this.Ye(t),r=>this.Xe(e,r).next(s=>s||rt())).next(kv)}}function Fb(n){return ei(n,"collectionParents")}function bp(n){return ei(n,"indexEntries")}function Ph(n){return ei(n,"indexConfiguration")}function Lo(n){return ei(n,"indexState")}function kv(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;tv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Is(e.readTime,e.documentKey,t)}const Rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BD(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const _=r.J({range:d},(A,k,U)=>(m++,U.delete()));u.push(_.next(()=>{Ct(1===m)}));const b=[];for(const A of t.mutations){const k=vb(e,A.key.path,t.batchId);u.push(s.delete(k)),b.push(A.key)}return oe.waitFor(u).next(()=>b)}function Qm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class Jm{constructor(e,t,r,s){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=s,this.gn={}}static se(e,t,r,s){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Jm(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).J({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Fh(e),d=ou(e);return d.add({}).next(m=>{Ct("number"==typeof m);const _=new Rh(m,t,r,s),b=function(U,B,X){const xe=X.baseMutations.map(pt=>Mh(U.ne,pt)),Oe=X.mutations.map(pt=>Mh(U.ne,pt));return{userId:B,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:xe,mutations:Oe}}(this.wt,this.userId,_),A=[];let k=new on((U,B)=>Rt(U.canonicalString(),B.canonicalString()));for(const U of s){const B=vb(this.userId,U.key.path,m);k=k.add(U.key.path.popLast()),A.push(d.put(b)),A.push(u.put(B,wb))}return k.forEach(U=>{A.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.gn[m]=_.keys()}),oe.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return ou(e).get(t).next(r=>r?(Ct(r.userId===this.userId),ml(this.wt,r)):null)}yn(e,t){return this.gn[t]?oe.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.gn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ou(e).J({index:"userMutationsIndex",range:s},(d,m,_)=>{m.userId===this.userId&&(Ct(m.batchId>=r),u=ml(this.wt,m)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ou(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).K("userMutationsIndex",t).next(r=>r.map(s=>ml(this.wt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_p(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Fh(e).J({range:s},(d,m,_)=>{const[b,A,k]=d,U=Ea(A);if(b===this.userId&&t.path.isEqual(U))return ou(e).get(k).next(B=>{if(!B)throw rt();Ct(B.userId===this.userId),u.push(ml(this.wt,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new on(Rt);const s=[];return t.forEach(u=>{const d=_p(this.userId,u.path),m=IDBKeyRange.lowerBound(d),_=Fh(e).J({range:m},(b,A,k)=>{const[U,B,X]=b,xe=Ea(B);U===this.userId&&u.path.isEqual(xe)?r=r.add(X):k.done()});s.push(_)}),oe.waitFor(s).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=_p(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new on(Rt);return Fh(e).J({range:d},(_,b,A)=>{const[k,U,B]=_,X=Ea(U);k===this.userId&&r.isPrefixOf(X)?X.length===s&&(m=m.add(B)):A.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ou(e).get(u).next(d=>{if(null===d)throw rt();Ct(d.userId===this.userId),r.push(ml(this.wt,d))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return BD(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Fh(e).J({range:r},(u,d,m)=>{if(u[0]===this.userId){const _=Ea(u[1]);s.push(_)}else m.done()}).next(()=>{Ct(0===s.length)})})}containsKey(e,t){return Lb(e,this.userId,t)}Tn(e){return Vb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lb(n,e,t){const r=_p(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Fh(n).J({range:u,H:!0},(m,_,b)=>{const[A,k,U]=m;A===e&&k===s&&(d=!0),b.done()}).next(()=>d)}function ou(n){return ei(n,"mutations")}function Fh(n){return ei(n,"documentMutations")}function Vb(n){return ei(n,"mutationQueues")}class Lh{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Lh(0)}static Rn(){return new Lh(-1)}}class Nv{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Lh(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Dt.fromTimestamp(new In(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Pn(e,s)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jc(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return jc(e).J((d,m)=>{const _=zm(m);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return jc(e).J((r,s)=>{const u=zm(s);t(u)})}bn(e){return Ub(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Pn(e,t){return Ub(e).put("targetGlobalKey",t)}vn(e,t){return jc(e).put(kb(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=al(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return jc(e).J({range:s,index:"queryTargetsIndex"},(d,m,_)=>{const b=zm(m);gh(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=yl(e);return t.forEach(d=>{const m=Xr(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=yl(e);return oe.forEach(t,u=>{const d=Xr(u.path);return oe.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=yl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=yl(e);let u=Ft();return s.J({range:r,H:!0},(d,m,_)=>{const b=Ea(d[1]),A=new qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Xr(t.path),s=IDBKeyRange.bound([r],[IE(r)],!1,!0);let u=0;return yl(e).J({index:"documentTargetsIndex",H:!0,range:s},([d,m],_,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}te(e,t){return jc(e).get(t).next(r=>r?zm(r):null)}}function jc(n){return ei(n,"targets")}function Ub(n){return ei(n,"targetGlobal")}function yl(n){return ei(n,"targetDocuments")}function Ov([n,e],[t,r]){const s=Rt(n,t);return 0===s?Rt(e,r):s}class Pv{constructor(e){this.Sn=e,this.buffer=new on(Ov),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ov(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ac(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ru(r)}yield t.kn(3e5)}))}}class Bb{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Vr.ot);const r=new Pv(t);return this.On.forEachTarget(e,s=>r.xn(s.sequenceNumber)).next(()=>this.On.Fn(e,s=>r.xn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Rv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rv):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,s,u,d,m,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),s=this.params.maximumSequenceNumbersToCollect):s=k,d=Date.now(),this.nthSequenceNumber(e,s))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(b=Date.now(),J_()<=qu.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(_-m)+`ms\n\tRemoved ${k} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:k})))}}class jD{constructor(e,t){this.db=e,this.garbageCollector=new Bb(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,s)=>t(s))}addReference(e,t,r){return Ip(e,r)}removeReference(e,t,r){return Ip(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ip(e,t)}Un(e,t){return function(r,s){let u=!1;return Vb(r).Y(d=>Lb(r,d,s).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Ln(e,(d,m)=>{if(m<=t){const _=this.Un(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),yl(e).delete([0,Xr(d.path)])))});s.push(_)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ip(e,t)}Ln(e,t){const r=yl(e);let s,u=Vr.ot;return r.J({index:"documentTargetsIndex"},([d,m],{path:_,sequenceNumber:b})=>{0===d?(u!==Vr.ot&&t(new qe(Ea(s)),u),u=b,s=_):u=Vr.ot}).next(()=>{u!==Vr.ot&&t(new qe(Ea(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ip(n,e){return yl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xr(e.path),sequenceNumber:r}));var r}class Lv{constructor(){this.changes=new fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $D{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _l(e).put(r)}removeEntry(e,t,r){return _l(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Nh(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return _l(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(s,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return _l(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(s,u)=>{r={document:this.Kn(t,u),size:Qm(u)}}).next(()=>r)}getEntries(e,t){let r=Jr();return this.Qn(e,t,(s,u)=>{const d=this.Kn(s,u);r=r.insert(s,d)}).next(()=>r)}jn(e,t){let r=Jr(),s=new Gn(qe.comparator);return this.Qn(e,t,(u,d)=>{const m=this.Kn(u,d);r=r.insert(u,m),s=s.insert(u,Qm(d))}).next(()=>({documents:r,Wn:s}))}Qn(e,t,r){if(t.isEmpty())return oe.resolve();let s=new on(Hb);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Cp(s.first()),Cp(s.last())),d=s.getIterator();let m=d.getNext();return _l(e).J({index:"documentKeyIndex",range:u},(_,b,A)=>{const k=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Hb(m,k)<0;)r(m,null),m=d.getNext();m&&m.isEqual(k)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?A.q(Cp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Nh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _l(e).K(IDBKeyRange.bound(s,u,!0)).next(d=>{let m=Jr();for(const _ of d){const b=this.Kn(qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Jr();const d=$b(t,r),m=$b(t,Is.max());return _l(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(_,b,A)=>{const k=this.Kn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(k.key,k),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new VS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HD(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}qn(e,t){return HD(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Mb(n,e){let t;if(e.document)t=gb(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),s=Lc(e.noDocument.readTime);t=hn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=qe.fromSegments(e.unknownDocument.path),s=Lc(e.unknownDocument.version);t=hn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new In(r[0],r[1]);return Dt.fromTimestamp(s)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return hn.newInvalidDocument(e)}}function jb(n){return new $D(n)}class VS extends Lv{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new fl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new on((u,d)=>Rt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const _=ND(this.zn.wt,d);s=s.add(u.path.popLast()),r+=Qm(_)-m.size,t.push(this.zn.addEntry(e,u,_))}else if(r-=m.size,this.trackRemovals){const _=ND(this.zn.wt,d.convertToNoDocument(Dt.min()));t.push(this.zn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:s})=>(s.forEach((u,d)=>{this.Hn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function HD(n){return ei(n,"remoteDocumentGlobal")}function _l(n){return ei(n,"remoteDocumentsV14")}function Cp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $b(n,e){const t=e.documentKey.path.toArray();return[n,Nh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hb(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Rt(t[u],r[u]),s)return s;return s=Rt(t.length,r.length),s||(s=Rt(t[t.length-2],r[r.length-2]),s||Rt(t[t.length-1],r[r.length-1]))}class US{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&gp(r.mutation,s,Cs.empty(),In.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const s=Po();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=mp();return u.forEach((m,_)=>{d=d.insert(m,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,s){let u=Jr();const d=Ih(),m=Ih();return t.forEach((_,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof su)?u=u.insert(b.key,b):void 0!==A&&(d.set(b.key,A.mutation.getFieldMask()),gp(A.mutation,b,A.mutation.getFieldMask(),In.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,A)=>d.set(b,A)),t.forEach((b,A)=>{var k;return m.set(b,new US(A,null!==(k=d.get(b))&&void 0!==k?k:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ih();let s=new Gn((d,m)=>d-m),u=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let A=r.get(_)||Cs.empty();A=m.applyToLocalView(b,A),r.set(_,A);const k=(s.get(m.batchId)||Ft()).add(_);s=s.insert(m.batchId,k)})}).next(()=>{const d=[],m=s.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),b=_.key,A=_.value,k=Um();A.forEach(U=>{if(!u.has(U)){const B=yv(t.get(U),r.get(U));null!==B&&k.set(U,B),u=u.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,k))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):oe.resolve(Po());let m=-1,_=u;return d.next(b=>oe.forEach(b,(A,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(A)?oe.resolve():this.getBaseDocument(e,A,k).next(U=>{_=_.insert(A,U)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Ft())).next(A=>({batchId:m,changes:_v(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let s=mp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=mp();return this.indexManager.getCollectionParents(e,s).next(d=>oe.forEach(d,m=>{const _=(b=t,A=m.child(s),new Js(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((A,k)=>{u=u.insert(A,k)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,_)=>{const b=_.getKey();null===s.get(b)&&(s=s.insert(b,hn.newInvalidDocument(b)))});let d=mp();return s.forEach((m,_)=>{const b=u.get(m);void 0!==b&&gp(b.mutation,_,Cs.empty(),In.now()),Lm(t,_)&&(d=d.insert(m,_))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(hn.newInvalidDocument(t))}}class BS{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return oe.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Cr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:xv(r.bundledQuery),readTime:Cr(r.readTime)}),oe.resolve();var r}}class jS{constructor(){this.overlays=new Gn(qe.comparator),this.Xn=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Po();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ie(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Xn.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=Po(),u=t.length+1,d=new qe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const _=m.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Gn((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Po(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=Po(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=s)););return oe.resolve(m)}ie(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Zm(t,r));let u=this.Xn.get(t);void 0===u&&(u=Ft(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class Gb{constructor(){this.Zn=new on(Br.ts),this.es=new on(Br.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Br(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Br(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new qe(new Gt([])),r=new Br(t,e),s=new Br(t,e+1),u=[];return this.es.forEachInRange([r,s],d=>{this.rs(d),u.push(d.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new qe(new Gt([])),r=new Br(t,e),s=new Br(t,e+1);let u=Ft();return this.es.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Br(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Br{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return qe.comparator(e.key,t.key)||Rt(e.ls,t.ls)}static ns(e,t){return Rt(e.ls,t.ls)||qe.comparator(e.key,t.key)}}class Xm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new on(Br.ts)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.fs;this.fs++;const d=new Rh(u,t,r,s);this.mutationQueue.push(d);for(const m of s)this.ds=this.ds.add(new Br(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ws(t+1),u=s<0?0:s;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Br(t,0),s=new Br(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,s],d=>{const m=this._s(d.ls);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new on(Rt);return t.forEach(s=>{const u=new Br(s,0),d=new Br(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,d],m=>{r=r.add(m.ls)})}),oe.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new Br(new qe(u),0);let m=new on(Rt);return this.ds.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(_.ls)),!0)},d),oe.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const s=this._s(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ct(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return oe.forEach(t.mutations,s=>{const u=new Br(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Br(t,0),s=this.ds.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qD{constructor(e){this.ps=e,this.docs=new Gn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Jr();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():hn.newInvalidDocument(s))}),oe.resolve(r)}getAllFromCollection(e,t,r){let s=Jr();const u=new qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||tv(CE(_),r)<=0||(s=s.insert(_.key,_.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){rt()}Is(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZD(this)}getSize(e){return oe.resolve(this.size)}}class ZD extends Lv{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class qb{constructor(e){this.persistence=e,this.Ts=new fl(t=>al(t),gh),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Es=0,this.As=new Gb,this.targetCount=0,this.Rs=Lh.An()}forEachTarget(e,t){return this.Ts.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),oe.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Lh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.vn(t),oe.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Ts.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),oe.waitFor(u).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.As.containsKey(t))}}class vl{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Vr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new qb(this),this.indexManager=new Pb,this.remoteDocumentCache=new qD(r=>this.referenceDelegate.Ss(r)),this.wt=new Sv(t),this.Ds=new BS(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Xm(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const s=new Zb(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(u=>this.referenceDelegate.xs(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ns(e,t){return oe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class Zb extends rv{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.ks=new Gb,this.Os=null}static Ms(e){return new Vh(e)}get Fs(){if(this.Os)return this.Os;throw rt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),oe.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Fs,r=>{const s=qe.fromPath(r);return this.$s(e,s).next(u=>{u||t.removeEntry(s,Dt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return oe.or([()=>oe.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Vv{constructor(e){this.wt=e}O(e,t,r,s){const u=new Sm("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Av,{unique:!0}),m.createObjectStore("documentMutations"),zb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),zb(e)),d=d.next(()=>function(m){const _=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,_){return _.store("mutations").K().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Av,{unique:!0});const A=_.store("mutations"),k=b.map(U=>A.put(U));return oe.waitFor(k)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.Bs(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&s>=7&&(d=d.next(()=>this.Us(u))),r<8&&s>=8&&(d=d.next(()=>this.qs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.Ks(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const _=m.createObjectStore("documentOverlays",{keyPath:NS});_.createIndex("collectionPathOverlayIndex",Ab,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",OS,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const _=m.createObjectStore("remoteDocumentsV14",{keyPath:Eb});_.createIndex("documentKeyIndex",DD),_.createIndex("collectionGroupIndex",TD)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.Qs(e,u))),r<15&&s>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Db}).createIndex("sequenceNumberIndex",Tb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:SD}).createIndex("documentKeyIndex",xD,{unique:!1})}(e))),d}Ls(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=Qm(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(s=>oe.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",d).next(m=>oe.forEach(m,_=>{Ct(_.userId===u.userId);const b=ml(this.wt,_);return BD(e,u.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.J((d,m)=>{const _=new Gt(d),b=[0,Xr(_)];u.push(t.get(b).next(A=>A?oe.resolve():t.put({targetId:0,path:Xr(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Cb});const r=t.store("collectionParents"),s=new Mv,u=d=>{if(s.add(d)){const m=d.lastSegment(),_=d.popLast();return r.put({collectionId:m,parent:Xr(_)})}};return t.store("remoteDocuments").J({H:!0},(d,m)=>{const _=new Gt(d);return u(_.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,m,_],b)=>{const A=Ea(m);return u(A.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,s)=>{const u=zm(s),d=kb(this.wt,u);return t.put(d)})}Gs(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((u,d)=>{const m=t.store("remoteDocumentsV14"),_=(b=d,b.document?new qe(Gt.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(A))}).next(()=>oe.waitFor(s))}Qs(e,t){const r=t.store("mutations"),s=jb(this.wt),u=new vl(Vh.Ms,this.wt.ne);return r.K().next(d=>{const m=new Map;return d.forEach(_=>{var b;let A=null!==(b=m.get(_.userId))&&void 0!==b?b:Ft();ml(this.wt,_).keys().forEach(k=>A=A.add(k)),m.set(_.userId,A)}),oe.forEach(m,(_,b)=>{const A=new wr(b),k=Wm.se(this.wt,A),U=u.getIndexManager(A),B=Jm.se(A,this.wt,U,u.referenceDelegate);return new GD(s,B,k,U).recalculateAndSaveOverlaysForDocumentKeys(new Sb(t,Vr.ot),_).next()})})}}function zb(n){n.createObjectStore("targetDocuments",{keyPath:AD}).createIndex("documentTargetsIndex",Ib,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bb,{unique:!0}),n.createObjectStore("targetGlobal")}const Dp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tp{constructor(e,t,r,s,u,d,m,_,b,A,k=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=d,this.document=m,this.Ws=b,this.zs=A,this.Hs=k,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=U=>Promise.resolve(),!Tp.V())throw new Re(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jD(this,s),this.ei=t+"main",this.wt=new Sv(_),this.ni=new No(this.ei,this.Hs,new Vv(this.wt)),this.Vs=new Nv(this.referenceDelegate,this.wt),this.remoteDocumentCache=jb(this.wt),this.Ds=new LS,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===A&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(fe.FAILED_PRECONDITION,Dp);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Vr(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ac(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return wl(e).get("owner").next(t=>oe.resolve(this.di(t)))}_i(e){return Uv(e).delete(this.clientId)}wi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ei(r,"clientMetadata");return s.K().next(u=>{const d=e.gi(u,18e5),m=u.filter(_=>-1===d.indexOf(_));return oe.forEach(m,_=>s.delete(_.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?oe.resolve(!0):wl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Re(fe.FAILED_PRECONDITION,Dp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uv(e).K().next(r=>void 0===this.gi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Sb(t,Vr.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Uv(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Jm.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UD(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Wm.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Hs)?FS:14===d?RD:13===d?kD:12===d?PS:11===d?MD:void rt();var d;let m;return this.ni.runTransaction(e,s,u,_=>(m=new Sb(_,this.Ps?this.Ps.next():Vr.ot),"readwrite-primary"===t?this.ai(m).next(b=>!!b||this.hi(m)).next(b=>{if(!b)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Re(fe.FAILED_PRECONDITION,nv);return r(m)}).next(b=>this.fi(m).next(()=>b)):this.bi(m).next(()=>r(m)))).then(_=>(m.raiseOnCommittedEvent(),_))}bi(e){return wl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(fe.FAILED_PRECONDITION,Dp)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wl(e).put("owner",t)}static V(){return No.V()}li(e){const t=wl(e);return t.get("owner").next(r=>this.di(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Tt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wl(n){return ei(n,"owner")}function Uv(n){return ei(n,"clientMetadata")}function Wb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Kb{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=s}static Vi(e,t){let r=Ft(),s=Ft();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Kb(e,t.fromCache,r,s)}}class zD{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ci(e,t).next(u=>u||this.xi(e,t,s,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){return oe.resolve(null)}xi(e,t,r,s){return function HE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(Dt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const d=this.ki(t,u);return this.Oi(t,d,r,s)?this.Ni(e,t):(J_()<=qu.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cl(t)),this.Mi(e,d,t,dh(s,-1)))})}ki(e,t){let r=new on(pD(e));return t.forEach((s,u)=>{Lm(e,u)&&(r=r.add(u))}),r}Oi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Ni(e,t){return J_()<=qu.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",cl(t)),this.Di.getDocumentsMatchingQuery(e,t,Is.min())}Mi(e,t,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class Yb{constructor(e,t,r,s){this.persistence=e,this.Fi=t,this.wt=s,this.$i=new Gn(Rt),this.Bi=new fl(u=>al(u),gh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GD(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Qb(n,e,t,r){return new Yb(n,e,t,r)}function Jb(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ge.Z)(function*(n,e){const t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let _=Ft();for(const b of s){d.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.localDocuments.getDocuments(r,_).next(b=>({Ki:b,removedBatchIds:d,addedBatchIds:m}))})})}),Bv.apply(this,arguments)}function WD(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(d,m,_,b){const A=_.batch,k=A.keys();let U=oe.resolve();return k.forEach(B=>{U=U.next(()=>b.getEntry(m,B)).next(X=>{const xe=_.docVersions.get(B);Ct(null!==xe),X.version.compareTo(xe)<0&&(A.applyToRemoteDocument(X,_),X.isValidDocument()&&(X.setReadTime(_.commitVersion),b.addEntry(X)))})}),U.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ft();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(m=m.add(d.batch.mutations[_].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function jv(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function Xb(n,e){const t=be(n),r=e.snapshotVersion;let s=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Ui.newChangeBuffer({trackRemovals:!0});s=t.$i;const m=[];e.targetChanges.forEach((A,k)=>{const U=s.get(k);if(!U)return;m.push(t.Vs.removeMatchingKeys(u,A.removedDocuments,k).next(()=>t.Vs.addMatchingKeys(u,A.addedDocuments,k)));let B=U.withSequenceNumber(u.currentSequenceNumber);var X,xe,Oe;e.targetMismatches.has(k)?B=B.withResumeToken(br.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):A.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(A.resumeToken,r)),s=s.insert(k,B),xe=B,Oe=A,(0===(X=U).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,B))});let _=Jr(),b=Ft();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push($v(u,d,e.documentUpdates).next(A=>{_=A.Gi,b=A.Qi})),!r.isEqual(Dt.min())){const A=t.Vs.getLastRemoteSnapshotVersion(u).next(k=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.$i=s,u))}function $v(n,e,t){let r=Ft(),s=Ft();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Jr();return t.forEach((m,_)=>{const b=u.get(m);_.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(m,_.readTime),d=d.insert(m,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(m,_)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",_.version)}),{Gi:d,Qi:s}})}function KD(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uh(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Vs.getTargetData(r,e).next(u=>u?(s=u,oe.resolve(s)):t.Vs.allocateTargetId(r).next(d=>(s=new ba(e,d,0,r.currentSequenceNumber),t.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.$i.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function $c(n,e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ge.Z)(function*(n,e,t){const r=be(n),s=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!Ac(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}),Ap.apply(this,arguments)}function Hv(n,e,t){const r=be(n);let s=Dt.min(),u=Ft();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,_,b){const A=be(m),k=A.Bi.get(b);return void 0!==k?oe.resolve(A.$i.get(k)):A.Vs.getTargetData(_,b)}(r,d,Xs(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(d,m.targetId).next(_=>{u=_})}).next(()=>r.Fi.getDocumentsMatchingQuery(d,e,t?s:Dt.min(),t?u:Ft())).next(m=>(eI(r,Rc(e),m),{documents:m,ji:u})))}function Gv(n,e){const t=be(n),r=be(t.Vs),s=t.$i.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(d=>d?d.target:null))}function ey(n,e){const t=be(n),r=t.Li.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Ui.getAllFromCollectionGroup(s,e,dh(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(eI(t,e,s),s))}function eI(n,e,t){let r=Dt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function tI(){return tI=(0,ge.Z)(function*(n,e,t,r){const s=be(n);let u=Ft(),d=Jr();for(const b of t){const A=e.Wi(b.metadata.name);b.document&&(u=u.add(A));const k=e.zi(b);k.setReadTime(e.Hi(b.metadata.readTime)),d=d.insert(A,k)}const m=s.Ui.newChangeBuffer({trackRemovals:!0}),_=yield Uh(s,(b=r,Xs(vh(Gt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>$v(b,m,d).next(A=>(m.apply(b),A)).next(A=>s.Vs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>s.Vs.addMatchingKeys(b,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.Gi,A.Qi)).next(()=>A.Gi)))}),tI.apply(this,arguments)}function $S(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,ge.Z)(function*(n,e,t=Ft()){const r=yield Uh(n,Xs(xv(e.bundledQuery))),s=be(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=Cr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(br.EMPTY_BYTE_STRING,d);return s.$i=s.$i.insert(m.targetId,m),s.Vs.updateTargetData(u,m).next(()=>s.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ds.saveNamedQuery(u,e))})}),qv.apply(this,arguments)}function nI(n,e){return`firestore_clients_${n}_${e}`}function QD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rI(n,e){return`firestore_targets_${n}_${e}`}class Zv{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ji(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Re(s.error.code,s.error.message))),d?new Zv(e,t,s.state,u):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ty{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new ty(e,r.state,s):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ch();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=km(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new zv(e,u):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Wv(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iI{constructor(){this.activeTargetIds=Ch()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sI{constructor(e,t,r,s,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Gn(Rt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=nI(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new iI),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Ri();for(const s of t){if(s===e.tr)continue;const u=e.getItem(nI(e.persistenceKey,s));if(u){const d=zv.Ji(s,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const s=e.wr(r);s&&e.mr(s)}for(const s of e.ir)e.nr(s);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rI(this.persistenceKey,e));if(r){const s=ty.Ji(e,r);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rI(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.pr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Rr(r.key);return t.br(s,null)}{const s=t.Pr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Vr(s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(r.key===t.lr){if(null!==r.newValue){const s=t.wr(r.newValue);if(s)return t.mr(s)}}else if(r.key===t.ur){const s=function(u){let d=Vr.ot;if(null!=u)try{const m=JSON.parse(u);Ct("number"==typeof m),d=m}catch(m){Er("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==Vr.ot&&t.sequenceNumberHandler(s)}else if(r.key===t.dr){const s=t.Cr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const s=new Zv(this.currentUser,e,t,r),u=QD(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Yi())}pr(e){const t=QD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const s=rI(this.persistenceKey,e),u=new ty(e,t,r);this.setItem(s,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return zv.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),s=Number(r[1]);return Zv.Ji(new wr(void 0!==r[2]?r[2]:null),s,t)}Sr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return ty.Ji(s,t)}wr(e){return Wv.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),u=this.gr(r),d=[],m=[];return u.forEach(_=>{s.has(_)||d.push(_)}),s.forEach(_=>{u.has(_)||m.push(_)}),this.syncEngine.Mr(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Ch();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class JD{constructor(){this.Fr=new iI,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new iI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HS{Br(e){}shutdown(){}}class i{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const o={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class a{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class l extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,s,u){const d=this.oo(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.uo(m,s,u),this.co(e,d,m,r).then(_=>(Ne("RestConnection","Received: ",_),_),_=>{throw Dc("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}ao(e,t,r,s,u,d){return this.ro(e,t,r,s,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}oo(e,t){return`${this.so}/v1/${t}:${o[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((u,d)=>{const m=new wE;m.listenOnce(yE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Im.NO_ERROR:const b=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Im.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new Re(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Im.HTTP_ERROR:const A=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const U=function(B){const X=B.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(X)>=0?X:fe.UNKNOWN}(k.status);d(new Re(U,k.message))}else d(new Re(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Re(fe.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);m.send(t,"POST",_,r,15)})}ho(e,t,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tD(),d=mE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new vE({})),this.uo(m.initMessageHeaders,t,r),(0,Tt.uI)()||(0,Tt.b$)()||(0,Tt.d)()||(0,Tt.w1)()||(0,Tt.Mn)()||(0,Tt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const _=s.join("");Ne("Connection","Creating WebChannel: "+_,m);const b=u.createWebChannel(_,m);let A=!1,k=!1;const U=new a({jr:X=>{k?Ne("Connection","Not sending because WebChannel is closed:",X):(A||(Ne("Connection","Opening WebChannel transport."),b.open(),A=!0),Ne("Connection","WebChannel sending:",X),b.send(X))},Wr:()=>b.close()}),B=(X,xe,Oe)=>{X.listen(xe,pt=>{try{Oe(pt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return B(b,Qf.EventType.OPEN,()=>{k||Ne("Connection","WebChannel transport opened.")}),B(b,Qf.EventType.CLOSE,()=>{k||(k=!0,Ne("Connection","WebChannel transport closed"),U.eo())}),B(b,Qf.EventType.ERROR,X=>{k||(k=!0,Dc("Connection","WebChannel transport errored:",X),U.eo(new Re(fe.UNAVAILABLE,"The operation could not be completed")))}),B(b,Qf.EventType.MESSAGE,X=>{var xe;if(!k){const Oe=X.data[0];Ct(!!Oe);const pt=Oe,_t=pt.error||(null===(xe=pt[0])||void 0===xe?void 0:xe.error);if(_t){Ne("Connection","WebChannel received error:",_t);const gt=_t.status;let Ve=function(xt){const Jn=On[xt];if(void 0!==Jn)return sb(Jn)}(gt),We=_t.message;void 0===Ve&&(Ve=fe.INTERNAL,We="Unknown error status: "+gt+" with message "+_t.message),k=!0,U.eo(new Re(Ve,We)),b.close()}else Ne("Connection","WebChannel received:",Oe),U.no(Oe)}}),B(d,_E.STAT_EVENT,X=>{X.stat===Y_.PROXY?Ne("Connection","Detected buffering proxy"):X.stat===Y_.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.Zr()},0),U}}function h(){return"undefined"!=typeof window?window:null}function p(){return"undefined"!=typeof document?document:null}function v(n){return new db(n,!0)}class E{constructor(e,t,r=1e3,s=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=s,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-r);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class I{constructor(e,t,r,s,u,d,m,_){this.js=e,this.Ao=r,this.Ro=s,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new E(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===t&&this.Uo(r,s)},r=>{e(()=>{const s=new Re(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S extends I{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function bD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:rt(),s=e.targetChange.targetIds||[],u=function(_,b){return _.dt?(Ct(void 0===b||"string"==typeof b),br.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),br.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(_){const b=void 0===_.code?fe.UNKNOWN:sb(_.code);return new Re(b,_.message||"")}(d);t=new ub(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Dn(n,r.document.name),u=Cr(r.document.updateTime),d=new Ir({mapValue:{fields:r.document.fields}}),m=hn.newFoundDocument(s,u,d);t=new Th(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=Dn(n,r.document),u=r.readTime?Cr(r.readTime):Dt.min(),d=hn.newNoDocument(s,u);t=new Th([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=Dn(n,r.document);t=new Th([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new mD(r.count||0);t=new ab(r.targetId,u)}}var _;return t}(this.wt,e),r=function(s){if(!("targetChange"in s))return Dt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Cr(u.readTime):Dt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=yp(this.wt),t.addTarget=function(s,u){let d;const m=u.target;return d=Om(m)?{documents:jm(s,m)}:{query:Dv(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=hb(s,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=Ah(s,u.snapshotVersion.toTimestamp())),d}(this.wt,e);const r=function $m(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=yp(this.wt),t.removeTarget=e,this.Mo(t)}}class x extends I{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ID(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,s){let u=Cr(r.updateTime?r.updateTime:s);return u.isEqual(Dt.min())&&(u=Cr(s)),new JE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=yp(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mh(this.wt,r))};this.Mo(t)}}class P extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ro(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(fe.UNKNOWN,s.toString())})}ao(e,t,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ao(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(fe.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class j{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Er(t),this.su=!1):Ne("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class J{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Ia(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(b){const A=be(b);A.lu.add(4),yield Be(A),A._u.set("Unknown"),A.lu.delete(4),yield ye(A)}),function(b){return _.apply(this,arguments)})(d))}))}),this._u=new j(r,s)}}function ye(n){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,ge.Z)(function*(n){if(Ia(n))for(const e of n.fu)yield e(!0)}),Fe.apply(this,arguments)}function Be(n){return tt.apply(this,arguments)}function tt(){return tt=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),tt.apply(this,arguments)}function Te(n,e){const t=be(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),au(t)?Si(t):iy(t).Co()&&Ut(t,e))}function ut(n,e){const t=be(n),r=iy(t);t.hu.delete(e),r.Co()&&Jt(t,e),0===t.hu.size&&(r.Co()?r.ko():Ia(t)&&t._u.set("Unknown"))}function Ut(n,e){n.wu.Nt(e.targetId),iy(n).Qo(e)}function Jt(n,e){n.wu.Nt(e),iy(n).jo(e)}function Si(n){n.wu=new vD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),iy(n).start(),n._u.iu()}function au(n){return Ia(n)&&!iy(n).Do()&&n.hu.size>0}function Ia(n){return 0===be(n).lu.size}function ny(n){n.wu=void 0}function Kv(n){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{Ut(n,e)})}),Sp.apply(this,arguments)}function Yv(n,e){return xp.apply(this,arguments)}function xp(){return xp=(0,ge.Z)(function*(n,e){ny(n),au(n)?(n._u.uu(e),Si(n)):n._u.set("Unknown")}),xp.apply(this,arguments)}function Qv(n,e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof ub&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s.hu.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.hu.delete(m),s.wu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bh(n,r)}else if(e instanceof Th?n.wu.Ut(e):e instanceof ab?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Dt.min()))try{const r=yield jv(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.wu.Yt(u);return d.targetChanges.forEach((m,_)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.hu.get(_);b&&s.hu.set(_,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const _=s.hu.get(m);if(!_)return;s.hu.set(m,_.withResumeToken(br.EMPTY_BYTE_STRING,_.snapshotVersion)),Jt(s,m);const b=new ba(_.target,m,1,_.sequenceNumber);Ut(s,b)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Bh(n,r)}var r}),Mp.apply(this,arguments)}function Bh(n,e,t){return XD.apply(this,arguments)}function XD(){return XD=(0,ge.Z)(function*(n,e,t){if(!Ac(e))throw e;n.lu.add(1),yield Be(n),n._u.set("Offline"),t||(t=()=>jv(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield ye(n)}))}),XD.apply(this,arguments)}function GS(n,e){return e().catch(t=>Bh(n,t,e))}function ry(n){return eT.apply(this,arguments)}function eT(){return eT=(0,ge.Z)(function*(n){const e=be(n),t=jh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;pk(e);)try{const s=yield KD(e.localStore,r);if(null===s){0===e.au.length&&t.ko();break}r=s.batchId,gk(e,s)}catch(s){yield Bh(e,s)}qS(e)&&ZS(e)}),eT.apply(this,arguments)}function pk(n){return Ia(n)&&n.au.length<10}function gk(n,e){n.au.push(e);const t=jh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function qS(n){return Ia(n)&&!jh(n).Do()&&n.au.length>0}function ZS(n){jh(n).start()}function mk(n){return tT.apply(this,arguments)}function tT(){return tT=(0,ge.Z)(function*(n){jh(n).Xo()}),tT.apply(this,arguments)}function yk(n){return nT.apply(this,arguments)}function nT(){return nT=(0,ge.Z)(function*(n){const e=jh(n);for(const t of n.au)e.Ho(t.mutations)}),nT.apply(this,arguments)}function _k(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,ge.Z)(function*(n,e,t){const r=n.au.shift(),s=xb.from(r,e,t);yield GS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ry(n)}),rT.apply(this,arguments)}function vk(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,ge.Z)(function*(n,e){var t;e&&jh(n).zo&&(yield(t=(0,ge.Z)(function*(r,s){if(ib(u=s.code)&&u!==fe.ABORTED){const d=r.au.shift();jh(r).No(),yield GS(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield ry(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),qS(n)&&ZS(n)}),iT.apply(this,arguments)}function zS(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ge.Z)(function*(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Ia(t);t.lu.add(3),yield Be(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield ye(t)}),sT.apply(this,arguments)}function oT(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,ge.Z)(function*(n,e){const t=be(n);e?(t.lu.delete(2),yield ye(t)):e||(t.lu.add(2),yield Be(t),t._u.set("Unknown"))}),aT.apply(this,arguments)}function iy(n){return n.mu||(n.mu=function(e,t,r){const s=be(e);return s.tu(),new S(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:Kv.bind(null,n),Jr:Yv.bind(null,n),Go:Qv.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),au(n)?Si(n):n._u.set("Unknown")):(yield n.mu.stop(),ny(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function jh(n){return n.gu||(n.gu=function(e,t,r){const s=be(e);return s.tu(),new x(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:mk.bind(null,n),Jr:vk.bind(null,n),Yo:yk.bind(null,n),Jo:_k.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield ry(n)):(yield n.gu.stop(),n.au.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class uT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new uT(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Ac(n))return new Re(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class oy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=mp(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new oy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new oy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WS{constructor(){this.yu=new Gn(qe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):rt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ay{constructor(e,t,r,s,u,d,m,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new ay(e,t,oy.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class wk{constructor(){this.Iu=void 0,this.listeners=[]}}class Ek{constructor(){this.queries=new fl(e=>GE(e),cp),this.onlineState="Unknown",this.Tu=new Set}}function lT(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ge.Z)(function*(n,e){const t=be(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new wk),s)try{u.Iu=yield t.onListen(r)}catch(d){const m=sy(d,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&fT(t)}),cT.apply(this,arguments)}function dT(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,ge.Z)(function*(n,e){const t=be(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),hT.apply(this,arguments)}function bk(n,e){const t=be(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Au(s)&&(r=!0);d.Iu=s}}r&&fT(t)}function Ik(n,e,t){const r=be(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function fT(n){n.Tu.forEach(e=>{e.next()})}class pT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new ay(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Ck{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class KS{constructor(e){this.wt=e}Wi(e){return Dn(this.wt,e)}zi(e){return e.metadata.exists?gb(this.wt,e.document,!1):hn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Cr(e)}}class Dk{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=YS(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Gt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new KS(this.wt);for(const s of e)if(s.metadata.queries){const u=r.Wi(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Ft()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function YD(n,e,t,r){return tI.apply(this,arguments)}(e.localStore,new KS(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const s of e.queries)yield $S(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function YS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QS{constructor(e){this.key=e}}class JS{constructor(e){this.key=e}}class XS{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ft(),this.mutatedKeys=Ft(),this.Lu=pD(e),this.Uu=new oy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new WS,s=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,k)=>{const U=s.get(A),B=Lm(this.query,k)?k:null,X=!!U&&this.mutatedKeys.has(U.key),xe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Oe=!1;U&&B?U.data.isEqual(B.data)?X!==xe&&(r.track({type:3,doc:B}),Oe=!0):this.Qu(U,B)||(r.track({type:2,doc:B}),Oe=!0,(_&&this.Lu(B,_)>0||b&&this.Lu(B,b)<0)&&(m=!0)):!U&&B?(r.track({type:0,doc:B}),Oe=!0):U&&!B&&(r.track({type:1,doc:U}),Oe=!0,(_||b)&&(m=!0)),Oe&&(B?(d=d.add(B),u=xe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Uu:d,Gu:r,Oi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((b,A)=>function(k,U){const B=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return B(k)-B(U)}(b.type,A.type)||this.Lu(b.doc,A.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,_=m!==this.$u;return this.$u=m,0!==u.length||_?{snapshot:new ay(this.query,e.Uu,s,u,e.mutatedKeys,0===m,_,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new WS,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ft(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new JS(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new QS(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ft();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return ay.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Tk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ak{constructor(e){this.key=e,this.Xu=!1}}class Sk{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.tc=new fl(m=>GE(m),cp),this.ec=new Map,this.nc=new Set,this.sc=new Gn(qe.comparator),this.ic=new Map,this.rc=new Gb,this.oc={},this.uc=new Map,this.cc=Lh.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function xk(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,ge.Z)(function*(n,e){const t=VT(n);let r,s;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Yu();else{const d=yield Uh(t.localStore,Xs(e));t.isPrimaryClient&&Te(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield mT(t,e,r,"current"===m)}return s}),gT.apply(this,arguments)}function mT(n,e,t,r){return yT.apply(this,arguments)}function yT(){return yT=(0,ge.Z)(function*(n,e,t,r){n.hc=(A,k,U)=>{return(B=(0,ge.Z)(function*(X,xe,Oe,pt){let _t=xe.view.Ku(Oe);_t.Oi&&(_t=yield Hv(X.localStore,xe.query,!1).then(({documents:We})=>xe.view.Ku(We,_t)));const gt=pt&&pt.targetChanges.get(xe.targetId),Ve=xe.view.applyChanges(_t,X.isPrimaryClient,gt);return AT(X,xe.targetId,Ve.zu),Ve.snapshot}),function(X,xe,Oe,pt){return B.apply(this,arguments)})(n,A,k,U);var B};const s=yield Hv(n.localStore,e,!0),u=new XS(e,s.ji),d=u.Ku(s.documents),m=Pc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(d,n.isPrimaryClient,m);AT(n,t,_.zu);const b=new Tk(e,t,u);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),_.snapshot}),yT.apply(this,arguments)}function Mk(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,ge.Z)(function*(n,e){const t=be(n),r=t.tc.get(e),s=t.ec.get(r.targetId);if(s.length>1)return t.ec.set(r.targetId,s.filter(u=>!cp(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $c(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ut(t.remoteStore,r.targetId),uy(t,r.targetId)}).catch(ru))):(uy(t,r.targetId),yield $c(t.localStore,r.targetId,!0))}),_T.apply(this,arguments)}function vT(){return vT=(0,ge.Z)(function*(n,e,t){const r=UT(n);try{const s=yield function(u,d){const m=be(u),_=In.now(),b=d.reduce((U,B)=>U.add(B.key),Ft());let A,k;return m.persistence.runTransaction("Locally write mutations","readwrite",U=>{let B=Jr(),X=Ft();return m.Ui.getEntries(U,b).next(xe=>{B=xe,B.forEach((Oe,pt)=>{pt.isValidDocument()||(X=X.add(Oe))})}).next(()=>m.localDocuments.getOverlayedDocuments(U,B)).next(xe=>{A=xe;const Oe=[];for(const pt of d){const _t=eb(pt,A.get(pt.key).overlayedDocument);null!=_t&&Oe.push(new su(pt.key,_t,LE(_t.value.mapValue),Cn.exists(!0)))}return m.mutationQueue.addMutationBatch(U,_,Oe,d)}).next(xe=>{k=xe;const Oe=xe.applyToLocalDocumentSet(A,X);return m.documentOverlayCache.saveOverlays(U,xe.batchId,Oe)})}).then(()=>({batchId:k.batchId,changes:_v(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let _=u.oc[u.currentUser.toKey()];_||(_=new Gn(Rt)),_=_.insert(d,m),u.oc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Hc(r,s.changes),yield ry(r.remoteStore)}catch(s){const u=sy(s,"Failed to persist write");t.reject(u)}}),vT.apply(this,arguments)}function ex(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,ge.Z)(function*(n,e){const t=be(n);try{const r=yield Xb(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.ic.get(u);d&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.Xu=!0:s.modifiedDocuments.size>0?Ct(d.Xu):s.removedDocuments.size>0&&(Ct(d.Xu),d.Xu=!1))}),yield Hc(t,r,e)}catch(r){yield ru(r)}}),wT.apply(this,arguments)}function tx(n,e,t){const r=be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.tc.forEach((u,d)=>{const m=d.view.Eu(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=be(u);m.onlineState=d;let _=!1;m.queries.forEach((b,A)=>{for(const k of A.listeners)k.Eu(d)&&(_=!0)}),_&&fT(m)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rk(n,e,t){return ET.apply(this,arguments)}function ET(){return ET=(0,ge.Z)(function*(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ic.get(e),u=s&&s.key;if(u){let d=new Gn(qe.comparator);d=d.insert(u,hn.newNoDocument(u,Dt.min()));const m=Ft().add(u),_=new Dh(Dt.min(),new Map,new on(Rt),d,m);yield ex(r,_),r.sc=r.sc.remove(u),r.ic.delete(e),ST(r)}else yield $c(r.localStore,e,!1).then(()=>uy(r,e,t)).catch(ru)}),ET.apply(this,arguments)}function Nk(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,ge.Z)(function*(n,e){const t=be(n),r=e.batch.batchId;try{const s=yield WD(t.localStore,e);TT(t,r,null),DT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hc(t,s)}catch(s){yield ru(s)}}),bT.apply(this,arguments)}function Ok(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=(0,ge.Z)(function*(n,e,t){const r=be(n);try{const s=yield function(u,d){const m=be(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return m.mutationQueue.lookupMutationBatch(_,d).next(A=>(Ct(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(_,A))).next(()=>m.mutationQueue.performConsistencyCheck(_)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(_,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>m.localDocuments.getDocuments(_,b))})}(r.localStore,e);TT(r,e,t),DT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hc(r,s)}catch(s){yield ru(s)}}),IT.apply(this,arguments)}function CT(){return CT=(0,ge.Z)(function*(n,e){const t=be(n);Ia(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=be(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.uc.get(r)||[];s.push(e),t.uc.set(r,s)}catch(r){const s=sy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),CT.apply(this,arguments)}function DT(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function TT(n,e,t){const r=be(n);let s=r.oc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||nx(n,r)})}function nx(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(ut(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),ST(n))}function AT(n,e,t){for(const r of t)r instanceof QS?(n.rc.addReference(r.key,e),Fk(n,r)):r instanceof JS?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||nx(n,r.key)):rt()}function Fk(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.nc.add(r),ST(n))}function ST(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new qe(Gt.fromString(e)),r=n.cc.next();n.ic.set(r,new Ak(t)),n.sc=n.sc.insert(t,r),Te(n.remoteStore,new ba(Xs(vh(t.path)),r,2,Vr.ot))}}function Hc(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,ge.Z)(function*(n,e,t){const r=be(n),s=[],u=[],d=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,_)=>{d.push(r.hc(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),s.push(b);const A=Kb.Vi(_.targetId,b);u.push(A)}}))}),yield Promise.all(d),r.Zu.Go(s),yield(m=(0,ge.Z)(function*(_,b){const A=be(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>oe.forEach(b,U=>oe.forEach(U.Pi,B=>A.persistence.referenceDelegate.addReference(k,U.targetId,B)).next(()=>oe.forEach(U.vi,B=>A.persistence.referenceDelegate.removeReference(k,U.targetId,B)))))}catch(k){if(!Ac(k))throw k;Ne("LocalStore","Failed to update sequence numbers: "+k)}for(const k of b){const U=k.targetId;if(!k.fromCache){const B=A.$i.get(U),xe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);A.$i=A.$i.insert(U,xe)}}}),function(_,b){return m.apply(this,arguments)})(r.localStore,u))}),xT.apply(this,arguments)}function Lk(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,ge.Z)(function*(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Jb(t.localStore,e);t.currentUser=e,(s=t).uc.forEach(d=>{d.forEach(m=>{m.reject(new Re(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hc(t,r.Ki)}var s}),MT.apply(this,arguments)}function Vk(n,e){const t=be(n),r=t.ic.get(e);if(r&&r.Xu)return Ft().add(r.key);{let s=Ft();const u=t.ec.get(e);if(!u)return s;for(const d of u){const m=t.tc.get(d);s=s.unionWith(m.view.qu)}return s}}function Uk(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ge.Z)(function*(n,e){const t=be(n),r=yield Hv(t.localStore,e.query,!0),s=e.view.Ju(r);return t.isPrimaryClient&&AT(t,e.targetId,s.zu),s}),kT.apply(this,arguments)}function Bk(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,ge.Z)(function*(n,e){const t=be(n);return ey(t.localStore,e).then(r=>Hc(t,r))}),RT.apply(this,arguments)}function jk(n,e,t,r){return NT.apply(this,arguments)}function NT(){return NT=(0,ge.Z)(function*(n,e,t,r){const s=be(n),u=yield function(d,m){const _=be(d),b=be(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.yn(A,m).next(k=>k?_.localDocuments.getDocuments(A,k):oe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield ry(s.remoteStore):"acknowledged"===t||"rejected"===t?(TT(s,e,r||null),DT(s,e),m=e,be(be(s.localStore).mutationQueue).In(m)):rt(),yield Hc(s,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),NT.apply(this,arguments)}function OT(){return OT=(0,ge.Z)(function*(n,e){const t=be(n);if(VT(t),UT(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield rx(t,r.toArray());t.ac=!0,yield oT(t.remoteStore,!0);for(const u of s)Te(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let s=Promise.resolve();t.ec.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(uy(t,d),$c(t.localStore,d,!0))),ut(t.remoteStore,d)}),yield s,yield rx(t,r),function(u){const d=be(u);d.ic.forEach((m,_)=>{ut(d.remoteStore,_)}),d.rc.cs(),d.ic=new Map,d.sc=new Gn(qe.comparator)}(t),t.ac=!1,yield oT(t.remoteStore,!1)}}),OT.apply(this,arguments)}function rx(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,ge.Z)(function*(n,e,t){const r=be(n),s=[],u=[];for(const d of e){let m;const _=r.ec.get(d);if(_&&0!==_.length){m=yield Uh(r.localStore,Xs(_[0]));for(const b of _){const A=r.tc.get(b),k=yield Uk(r,A);k.snapshot&&u.push(k.snapshot)}}else{const b=yield Gv(r.localStore,d);m=yield Uh(r.localStore,b),yield mT(r,ix(b),d,!1)}s.push(m)}return r.Zu.Go(u),s}),PT.apply(this,arguments)}function ix(n){return _h(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Hk(n){const e=be(n);return be(be(e.localStore).persistence).Ri()}function Gk(n,e,t,r){return FT.apply(this,arguments)}function FT(){return FT=(0,ge.Z)(function*(n,e,t,r){const s=be(n);if(s.ac)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=s.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ey(s.localStore,Rc(u[0])),m=Dh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Hc(s,d,m);break}case"rejected":yield $c(s.localStore,e,!0),uy(s,e,r);break;default:rt()}}),FT.apply(this,arguments)}function qk(n,e,t){return LT.apply(this,arguments)}function LT(){return LT=(0,ge.Z)(function*(n,e,t){const r=VT(n);if(r.ac){for(const s of e){if(r.ec.has(s)){Ne("SyncEngine","Adding an already active target "+s);continue}const u=yield Gv(r.localStore,s),d=yield Uh(r.localStore,u);yield mT(r,ix(u),d.targetId,!1),Te(r.remoteStore,d)}for(const s of t)r.ec.has(s)&&(yield $c(r.localStore,s,!1).then(()=>{ut(r.remoteStore,s),uy(r,s)}).catch(ru))}}),LT.apply(this,arguments)}function VT(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rk.bind(null,e),e.Zu.Go=bk.bind(null,e.eventManager),e.Zu.lc=Ik.bind(null,e.eventManager),e}function UT(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ok.bind(null,e),e}class sx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.wt=v(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Qb(this.persistence,new zD,e.initialUser,this.wt)}_c(e){return new vl(Vh.Ms,this.wt)}dc(e){return new JD}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ox extends sx{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield UT(r.yc.syncEngine),yield ry(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Qb(this.persistence,new zD,e.initialUser,this.wt)}mc(e,t){return new Fv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new DE(t,this.persistence);return new oD(e.asyncQueue,r)}_c(e){const t=Wb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new Tp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h(),p(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new JD}}class zk extends ox{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const s=r.yc.syncEngine;r.sharedClientState instanceof sI&&(r.sharedClientState.syncEngine={kr:jk.bind(null,s),Or:Gk.bind(null,s),Mr:qk.bind(null,s),Ri:Hk.bind(null,s),Nr:Bk.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,ge.Z)(function*(d){yield function $k(n,e){return OT.apply(this,arguments)}(r.yc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}dc(e){const t=h();if(!sI.V(t))throw new Re(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Wb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sI(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class BT{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>tx(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Lk.bind(null,r.syncEngine),yield oT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ek}createDatastore(e){const t=v(e.databaseInfo.databaseId),r=new l(e.databaseInfo);return new P(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>tx(this.syncEngine,m,0),d=i.V()?new i:new HS,new J(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,_,b){const A=new Sk(r,s,u,d,m,_);return b&&(A.ac=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=be(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Be(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ax(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Wk{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),s=Number(r);isNaN(s)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(s);return new Ck(JSON.parse(u),t.length+s)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ge.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Kk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ge.Z)(function*(u,d){const m=be(u),_=yp(m.wt)+"/documents",b={documents:d.map(B=>Sh(m.wt,B))},A=yield m.ao("BatchGetDocuments",_,b,d.length),k=new Map;A.forEach(B=>{const X=function Iv(n,e){return"found"in e?function(t,r){Ct(!!r.found);const s=Dn(t,r.found.name),u=Cr(r.found.updateTime),d=new Ir({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const s=Dn(t,r.missing),u=Cr(r.readTime);return hn.newNoDocument(s,u)}(n,e):rt()}(m.wt,B);k.set(X.key.toString(),X)});const U=[];return d.forEach(B=>{const X=k.get(B.toString());Ct(!!X),U.push(X)}),U}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=qe.fromPath(s);e.mutations.push(new eo(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(s,u){const d=be(s),m=yp(d.wt)+"/documents",_={writes:u.map(b=>Mh(d.wt,b))};yield d.ro("Commit",m,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Cn.updateTime(t):Cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cn.updateTime(t)}return Cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yk{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Dc=r.maxAttempts,this.So=new E(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new Kk(e.datastore),r=e.xc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Nc(u)}))}).catch(s=>{e.Nc(s)})}))}xc(e){try{const t=this.updateFunction(e);return!np(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ib(t)}return!1}}class Qk{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=wr.UNAUTHENTICATED,this.clientId=ev.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ge.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=sy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function ux(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ge.Z)(function*(u){r.isEqual(u)||(yield Jb(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jT.apply(this,arguments)}function lx(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>zS(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>zS(e.remoteStore,u)),n.onlineComponents=e}),$T.apply(this,arguments)}function HT(n){return GT.apply(this,arguments)}function GT(){return GT=(0,ge.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield ux(n,new sx)),n.offlineComponents}),GT.apply(this,arguments)}function aI(n){return qT.apply(this,arguments)}function qT(){return qT=(0,ge.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield lx(n,new BT)),n.onlineComponents}),qT.apply(this,arguments)}function cx(n){return HT(n).then(e=>e.persistence)}function ZT(n){return HT(n).then(e=>e.localStore)}function dx(n){return aI(n).then(e=>e.remoteStore)}function zT(n){return aI(n).then(e=>e.syncEngine)}function ly(n){return WT.apply(this,arguments)}function WT(){return WT=(0,ge.Z)(function*(n){const e=yield aI(n),t=e.eventManager;return t.onListen=xk.bind(null,e.syncEngine),t.onUnlisten=Mk.bind(null,e.syncEngine),t}),WT.apply(this,arguments)}function hx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,d,m,_){const b=new oI({next:k=>{u.enqueueAndForget(()=>dT(s,A));const U=k.docs.has(d);!U&&k.fromCache?_.reject(new Re(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&k.fromCache&&m&&"server"===m.source?_.reject(new Re(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(k)},error:k=>_.reject(k)}),A=new pT(vh(d.path),b,{includeMetadataChanges:!0,Du:!0});return lT(s,A)}(yield ly(n),n.asyncQueue,e,t,r)})),r.promise}function fx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,d,m,_){const b=new oI({next:k=>{u.enqueueAndForget(()=>dT(s,A)),k.fromCache&&"server"===m.source?_.reject(new Re(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(k)},error:k=>_.reject(k)}),A=new pT(d,b,{includeMetadataChanges:!0,Du:!0});return lT(s,A)}(yield ly(n),n.asyncQueue,e,t,r)})),r.promise}const px=new Map;function KT(n,e,t){if(!t)throw new Re(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gx(n,e,t,r){if(!0===e&&!0===r)throw new Re(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mx(n){if(!qe.isDocumentKey(n))throw new Re(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yx(n){if(qe.isDocumentKey(n))throw new Re(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uI(n);throw new Re(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _x(n,e){if(e<=0)throw new Re(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vx({}),this._settingsFrozen=!1,e instanceof iu?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Re(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(s.options.projectId)}(e))}get app(){if(!this._app)throw new Re(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rD;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new TS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=px.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),px.delete(e),t.terminate())}(this),Promise.resolve()}}class Pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class El extends ns{constructor(e,t,r){super(e,t,vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new qe(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function wx(n,e,...t){if(n=(0,Tt.m9)(n),KT("collection","path",e),n instanceof Jv){const r=Gt.fromString(e,...t);return yx(r),new El(n,null,r)}{if(!(n instanceof Pn||n instanceof El))throw new Re(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return yx(r),new El(n.firestore,null,r)}}function lI(n,e,...t){if(n=(0,Tt.m9)(n),1===arguments.length&&(e=ev.I()),KT("doc","path",e),n instanceof Jv){const r=Gt.fromString(e,...t);return mx(r),new Pn(n,null,new qe(r))}{if(!(n instanceof Pn||n instanceof El))throw new Re(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return mx(r),new Pn(n.firestore,n instanceof El?n.converter:null,new qe(r))}}function Ex(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),(n instanceof Pn||n instanceof El)&&(e instanceof Pn||e instanceof El)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bx(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&cp(n._query,e._query)&&n.converter===e.converter}class uR{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new E(this,"async_queue_retry"),this.Kc=()=>{const t=p();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=p();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=p();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Lr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ac(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const s=uT.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(s),s}Gc(){this.Bc&&rt()}verifyOperationInProgress(){}zc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function YT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class lR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends Jv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new uR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ix(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||Ix(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ix(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new RE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Qk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Cx(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield ux(n,t),yield lx(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(d=u).name?d.code===fe.FAILED_PRECONDITION||d.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Dx(n){if(n._initialized||n._terminated)throw new Re(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(br.fromBase64String(e))}catch(t){throw new Re(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kp{constructor(e){this._methodName=e}}class cI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const vR=/^__.*__$/;class wR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new su(e,this.data,this.fieldMask,t,this.fieldTransforms):new Eh(e,this.data,t,this.fieldTransforms)}}class Tx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class dI{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new dI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return pI(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ax(this.Zc)&&vR.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class ER{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||v(e)}aa(e,t,r,s=!1){return new dI({Zc:e,methodName:t,ca:r,path:Qn.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Rp(n){const e=n._freezeSettings(),t=v(n._databaseId);return new ER(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hI(n,e,t,r,s,u={}){const d=n.aa(u.merge||u.mergeFields?2:0,e,t,s);eA("Data must be an object, but it was:",d,r);const m=Mx(r,d);let _,b;if(u.merge)_=new Cs(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const k of u.mergeFields){const U=tA(e,k,t);if(!d.contains(U))throw new Re(fe.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);Rx(A,U)||A.push(U)}_=new Cs(A),b=d.fieldTransforms.filter(k=>_.covers(k.field))}else _=null,b=d.fieldTransforms;return new wR(new Ir(m),_,b)}class Xv extends kp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xv}}function Sx(n,e,t){return new dI({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class QT extends kp{_toFieldTransform(e){return new dp(e.path,new Nc)}isEqual(e){return e instanceof QT}}class bR extends kp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Sx(this,e,!0),r=this.ha.map(u=>Np(u,t)),s=new dl(r);return new dp(e.path,s)}isEqual(e){return this===e}}class IR extends kp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Sx(this,e,!0),r=this.ha.map(u=>Np(u,t)),s=new Oc(r);return new dp(e.path,s)}isEqual(e){return this===e}}class CR extends kp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new wh(e.wt,fv(e.wt,this.la));return new dp(e.path,t)}isEqual(e){return this===e}}function JT(n,e,t,r){const s=n.aa(1,e,t);eA("Data must be an object, but it was:",s,r);const u=[],d=Ir.empty();Sc(r,(_,b)=>{const A=fI(e,_,t);b=(0,Tt.m9)(b);const k=s.ia(A);if(b instanceof Xv)u.push(A);else{const U=Np(b,k);null!=U&&(u.push(A),d.set(A,U))}});const m=new Cs(u);return new Tx(d,m,s.fieldTransforms)}function XT(n,e,t,r,s,u){const d=n.aa(1,e,t),m=[tA(e,r,t)],_=[s];if(u.length%2!=0)throw new Re(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)m.push(tA(e,u[U])),_.push(u[U+1]);const b=[],A=Ir.empty();for(let U=m.length-1;U>=0;--U)if(!Rx(b,m[U])){const B=m[U];let X=_[U];X=(0,Tt.m9)(X);const xe=d.ia(B);if(X instanceof Xv)b.push(B);else{const Oe=Np(X,xe);null!=Oe&&(b.push(B),A.set(B,Oe))}}const k=new Cs(b);return new Tx(A,k,d.fieldTransforms)}function xx(n,e,t,r=!1){return Np(t,n.aa(r?4:3,e))}function Np(n,e){if(kx(n=(0,Tt.m9)(n)))return eA("Unsupported field value:",e,n),Mx(n,e);if(n instanceof kp)return function(t,r){if(!Ax(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=Np(d,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fv(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=In.fromDate(t);return{timestampValue:Ah(r.wt,s)}}if(t instanceof In){const s=new In(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ah(r.wt,s)}}if(t instanceof cI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bl)return{bytesValue:hb(r.wt,t._byteString)};if(t instanceof Pn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ev(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${uI(t)}`)}(n,e)}function Mx(n,e){const t={};return AE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sc(n,(r,s)=>{const u=Np(s,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof In||n instanceof cI||n instanceof bl||n instanceof Pn||n instanceof kp)}function eA(n,e,t){if(!kx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=uI(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function tA(n,e,t){if((e=(0,Tt.m9)(e))instanceof Gc)return e._internalPath;if("string"==typeof e)return fI(n,e);throw pI("Field path arguments must be of type string or ",n,!1,void 0,t)}const DR=new RegExp("[~\\*/\\[\\]]");function fI(n,e,t){if(e.search(DR)>=0)throw pI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch(r){throw pI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pI(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${r}`),d&&(_+=` in document ${s}`),_+=")"),new Re(fe.INVALID_ARGUMENT,m+n+_)}function Rx(n,e){return n.some(t=>t.isEqual(e))}class e0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TR extends e0{data(){return super.data()}}function gI(n,e){return"string"==typeof e?fI(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}class Op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qc extends e0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new t0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class t0 extends qc{data(e={}){return super.data(e)}}class $h{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Op(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new t0(this._firestore,this._userDataWriter,r.key,r,new Op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new t0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new t0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:AR(d.type),doc:m,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function Nx(n,e){return n instanceof qc&&e instanceof qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $h&&e instanceof $h&&n._firestore===e._firestore&&bx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Ox(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}function Hh(n,...e){for(const t of e)n=t._apply(n);return n}class SR extends n0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Rp(e.firestore),r=function(s,u,d,m,_,b,A){let k;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Bx(A,b);const B=[];for(const X of A)B.push(Ux(m,s,X));k={arrayValue:{values:B}}}else k=Ux(m,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Bx(A,b),k=xx(d,"where",A,"in"===b||"not-in"===b);const U=ur.create(_,b,k);return function(B,X){if(X.ht()){const Oe=dv(B);if(null!==Oe&&!Oe.isEqual(X.field))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${X.field.toString()}'`);const pt=Fm(B);null!==pt&&jx(0,X.field,pt)}const xe=function(Oe,pt){for(const _t of Oe.filters)if(pt.indexOf(_t.op)>=0)return _t.op;return null}(B,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(X.op));if(null!==xe)throw new Re(fe.INVALID_ARGUMENT,xe===X.op?`Invalid query. You cannot use more than one '${X.op.toString()}' filter.`:`Invalid query. You cannot use '${X.op.toString()}' filters with '${xe.toString()}' filters.`)}(s,U),U}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ns(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new Js(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class MR extends n0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new yh(s,u);return function(m,_){if(null===Fm(m)){const b=dv(m);null!==b&&jx(0,b,_.field)}}(r,d),d}(e._query,this.fa,this.wa);return new ns(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Js(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Px extends n0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ns(e.firestore,e.converter,fD(e._query,this.ma,this.ga))}}class Fx extends n0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Vx(e,this.type,this.ya,this.pa);return new ns(e.firestore,e.converter,(s=t,new Js((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Lx extends n0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Vx(e,this.type,this.ya,this.pa);return new ns(e.firestore,e.converter,(s=t,new Js((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function Vx(n,e,t,r){if(t[0]=(0,Tt.m9)(t[0]),t[0]instanceof e0)return function(s,u,d,m,_){if(!m)throw new Re(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of ll(s))if(A.field.isKeyField())b.push(kc(u,m.key));else{const k=m.data.field(A.field);if(tp(k))throw new Re(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const U=A.field.canonicalString();throw new Re(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}b.push(k)}return new ul(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Rp(n.firestore);return function(u,d,m,_,b,A){const k=u.explicitOrderBy;if(b.length>k.length)throw new Re(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let B=0;B<b.length;B++){const X=b[B];if(k[B].field.isKeyField()){if("string"!=typeof X)throw new Re(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof X}`);if(!hv(u)&&-1!==X.indexOf("/"))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${X}' contains a slash.`);const xe=u.path.child(Gt.fromString(X));if(!qe.isDocumentKey(xe))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Oe=new qe(xe);U.push(kc(d,Oe))}else{const xe=xx(m,_,X);U.push(xe)}}return new ul(U,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function Ux(n,e,t){if("string"==typeof(t=(0,Tt.m9)(t))){if(""===t)throw new Re(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hv(e)&&-1!==t.indexOf("/"))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!qe.isDocumentKey(r))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kc(n,new qe(r))}if(t instanceof Pn)return kc(n,t._key);throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uI(t)}.`)}function Bx(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jx(n,e,t){if(!t.isEqual(e))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const VR={maxAttempts:5};class nA{convertValue(e,t="none"){switch(Mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return Sc(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new cI(Nn(e.latitude),Nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hh(e));default:return null}}convertTimestamp(e){const t=il(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);Ct(qm(r));const s=new iu(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return s.isEqual(t)||Er(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function mI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UR extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}class $x{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rp(e)}set(e,t,r){this._verifyNotCommitted();const s=Gh(e,this._firestore),u=mI(s.converter,t,r),d=hI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,Cn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Tt.m9)(t))||t instanceof Gc?XT(this._dataReader,"WriteBatch.update",u._key,t,r,s):JT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gh(e,this._firestore);return this._mutations=this._mutations.concat(new hl(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gh(n,e){if((n=(0,Tt.m9)(n)).firestore!==e)throw new Re(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pp extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}function Hx(n,e,t){n=Wt(n,Pn);const r=Wt(n.firestore,qn),s=mI(n.converter,e,t);return cy(r,[hI(Rp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Cn.none())])}function Gx(n,e,t,...r){n=Wt(n,Pn);const s=Wt(n.firestore,qn),u=Rp(s);let d;return d="string"==typeof(e=(0,Tt.m9)(e))||e instanceof Gc?XT(u,"updateDoc",n._key,e,t,r):JT(u,"updateDoc",n._key,e),cy(s,[d.toMutation(n._key,Cn.exists(!0))])}function qx(n,...e){var t,r,s;n=(0,Tt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||YT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(YT(e[d])){const k=e[d];e[d]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[d+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[d+2]=null===(s=k.complete)||void 0===s?void 0:s.bind(k)}let _,b,A;if(n instanceof Pn)b=Wt(n.firestore,qn),A=vh(n._key.path),_={next:k=>{e[d]&&e[d](rA(b,n,k))},error:e[d+1],complete:e[d+2]};else{const k=Wt(n,ns);b=Wt(k.firestore,qn),A=k._query;const U=new Pp(b);_={next:B=>{e[d]&&e[d](new $h(b,U,k,B))},error:e[d+1],complete:e[d+2]},Ox(n._query)}return function(k,U,B,X){const xe=new oI(X),Oe=new pT(U,xe,B);return k.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return lT(yield ly(k),Oe)})),()=>{xe.Tc(),k.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return dT(yield ly(k),Oe)}))}}(jr(b),A,m,_)}function cy(n,e){return function(t,r){const s=new Lr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function kk(n,e,t){return vT.apply(this,arguments)}(yield zT(t),r,s)})),s.promise}(jr(n),e)}function rA(n,e,t){const r=t.docs.get(e._key),s=new Pp(n);return new qc(n,s,e._key,r,new Op(t.hasPendingWrites,t.fromCache),e.converter)}class KR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rp(e)}get(e){const t=Gh(e,this._firestore),r=new UR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return rt();const u=s[0];if(u.isFoundDocument())return new e0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new e0(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const s=Gh(e,this._firestore),u=mI(s.converter,t,r),d=hI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=Gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Tt.m9)(t))||t instanceof Gc?XT(this._dataReader,"Transaction.update",u._key,t,r,s):JT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gh(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(s=>new qc(this._firestore,r,t._key,s._document,new Op(!1,!1),t.converter))}}function iA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zx(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Wx(){if(!function xE(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Cc=Es.SDK_VERSION,(0,Es._registerComponent)(new Gu.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new qn(s,new Dm(t.getProvider("auth-internal")),new iD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Es.registerVersion)(Q_,"3.4.11",n),(0,Es.registerVersion)(Q_,"3.4.11","esm2017")}();class r0{constructor(e){this._delegate=e}static fromBase64String(e){return Wx(),new r0(bl.fromBase64String(e))}static fromUint8Array(e){return zx(),new r0(bl.fromUint8Array(e))}toBase64(){return Wx(),this._delegate.toBase64()}toUint8Array(){return zx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sA(n){return function iN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sN{enableIndexedDbPersistence(e,t){return function dR(n,e){Dx(n=Wt(n,qn));const t=jr(n),r=n._freezeSettings(),s=new BT;return Cx(t,s,new ox(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hR(n){Dx(n=Wt(n,qn));const e=jr(n),t=n._freezeSettings(),r=new BT;return Cx(e,r,new zk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fR(n){if(n._initialized&&!n._terminated)throw new Re(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!No.V())return Promise.resolve();const s=r+"main";yield No.delete(s)}),function(r){return t.apply(this,arguments)})(Wb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Kx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof iu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Dc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function oR(n,e,t,r={}){var s;const u=(n=Wt(n,Jv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Dc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=wr.MOCK_USER;else{d=(0,Tt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wr(_)}n._authCredentials=new Cm(new Jf(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function gR(n){return function Jk(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield cx(n),t=yield dx(n);return e.setNetworkEnabled(!0),function(r){const s=be(r);return s.lu.delete(0),ye(s)}(t)}))}(jr(n=Wt(n,qn)))}(this._delegate)}disableNetwork(){return function mR(n){return function Xk(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield cx(n),t=yield dx(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(s){const u=be(s);u.lu.add(0),yield Be(u),u._u.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(jr(n=Wt(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pR(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function Pk(n,e){return CT.apply(this,arguments)}(yield zT(e),t)})),t.promise}(jr(n=Wt(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function WR(n,e){return function nR(n,e){const t=new oI(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ly(n),s=t,be(r).Tu.add(s),void s.next();var r,s})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ly(n),s=t,void be(r).Tu.delete(s);var r,s}))}}(jr(n=Wt(n,qn)),YT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dy(this,wx(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,lI(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function aR(n,e){if(n=Wt(n,Jv),KT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new Js(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function YR(n,e,t){n=Wt(n,qn);const r=Object.assign(Object.assign({},VR),t);return function(s){if(s.maxAttempts<1)throw new Re(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function rR(n,e,t){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const s=yield(u=n,aI(u).then(d=>d.datastore));var u;new Yk(n.asyncQueue,s,t,e,r).run()})),r.promise}(jr(n),s=>e(new KR(n,s)),r)}(this._delegate,t=>e(new Yx(this,t)))}batch(){return jr(this._delegate),new Qx(new $x(this._delegate,e=>cy(this._delegate,e)))}loadBundle(e){return function yR(n,e){const t=jr(n=Wt(n,qn)),r=new lR;return function iR(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return ax(_,b);if(_ instanceof ArrayBuffer)return ax(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Wk(_,d);var _}(t,v(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function Zk(n,e,t){const r=be(n);var s;(s=(0,ge.Z)(function*(u,d,m){try{const _=yield d.getMetadata();if(yield function(U,B){const X=be(U),xe=Cr(B.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",Oe=>X.Ds.getBundleMetadata(Oe,B.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(xe)>=0)}(u.localStore,_))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(U=_).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);m._updateProgress(YS(_));const b=new Dk(_,u.localStore,d.wt);let A=yield d.fc();for(;A;){const U=yield b.Nu(A);U&&m._updateProgress(U),A=yield d.fc()}const k=yield b.complete();return yield Hc(u,k.Mu,void 0),yield function(U,B){const X=be(U);return X.persistence.runTransaction("Save bundle","readwrite",xe=>X.Ds.saveBundleMetadata(xe,B))}(u.localStore,_),m._completeWith(k.progress),Promise.resolve(k.Ou)}catch(_){return Dc("SyncEngine",`Loading bundle failed with ${_}`),m._failWith(_),Promise.resolve(new Set)}var U}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield zT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _R(n,e){return function sR(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const s=be(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ds.getNamedQuery(u,r))}(yield ZT(n),e)}))}(jr(n=Wt(n,qn)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class yI extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new r0(new bl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class Yx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new s0(this._firestore,new qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Lp(e);return r?(iA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class Qx{constructor(e){this._delegate=e}set(e,t,r){const s=Lp(e);return r?(iA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new t0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new o0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Fp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Fp(e,new yI(e),t),s.set(t,u)),u}}Fp.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new Pn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Ca(t,new Pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dy(this.firestore,wx(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Pn&&Ex(this._delegate,e)}set(e,t){t=iA("DocumentReference.set",t);try{return t?Hx(this._delegate,e,t):Hx(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Gx(this._delegate,e):Gx(this._delegate,e,t,...r)}catch(s){throw Ds(s,"updateDoc()","DocumentReference.update()")}}delete(){return function ZR(n){return cy(Wt(n.firestore,qn),[new hl(n._key,Cn.none())])}(this._delegate)}onSnapshot(...e){const t=Jx(e),r=Xx(e,s=>new s0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return qx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jR(n){n=Wt(n,Pn);const e=Wt(n.firestore,qn),t=jr(e),r=new Pp(e);return function eR(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,d){try{const m=yield function(_,b){const A=be(_);return A.persistence.runTransaction("read document","readonly",k=>A.localDocuments.getDocument(k,b))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Re(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const _=sy(m,`Failed to get document '${u} from cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield ZT(n),e,t);var r})),t.promise}(t,n._key).then(s=>new qc(e,r,n._key,s,new Op(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $R(n){n=Wt(n,Pn);const e=Wt(n.firestore,qn);return hx(jr(e),n._key,{source:"server"}).then(t=>rA(e,n,t))}(this._delegate):function BR(n){n=Wt(n,Pn);const e=Wt(n.firestore,qn);return hx(jr(e),n._key).then(t=>rA(e,n,t))}(this._delegate),t.then(r=>new s0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function Jx(n){for(const e of n)if("object"==typeof e&&!sA(e))return e;return{}}function Xx(n,e){var t,r;let s;return s=sA(n[0])?n[0]:sA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class s0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Nx(this._delegate,e._delegate)}}class o0 extends s0{data(e){const t=this._delegate.data(e);return function DS(n,e){n||rt()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}where(e,t,r){try{return new Ts(this.firestore,Hh(this._delegate,function xR(n,e,t){const r=e,s=gI("where",n);return new SR(s,r,t)}(e,t,r)))}catch(s){throw Ds(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,Hh(this._delegate,function kR(n,e="asc"){const t=e,r=gI("orderBy",n);return new MR(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,Hh(this._delegate,function RR(n){return _x("limit",n),new Px("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,Hh(this._delegate,function NR(n){return _x("limitToLast",n),new Px("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,Hh(this._delegate,function OR(...n){return new Fx("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,Hh(this._delegate,function PR(...n){return new Fx("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,Hh(this._delegate,function FR(...n){return new Lx("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,Hh(this._delegate,function LR(...n){return new Lx("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return bx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GR(n){n=Wt(n,ns);const e=Wt(n.firestore,qn),t=jr(e),r=new Pp(e);return function tR(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,d){try{const m=yield Hv(s,u,!0),_=new XS(u,m.ji),b=_.Ku(m.documents),A=_.applyChanges(b,!1);d.resolve(A.snapshot)}catch(m){const _=sy(m,`Failed to execute query '${u} against cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield ZT(n),e,t);var r})),t.promise}(t,n._query).then(s=>new $h(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function qR(n){n=Wt(n,ns);const e=Wt(n.firestore,qn),t=jr(e),r=new Pp(e);return fx(t,n._query,{source:"server"}).then(s=>new $h(e,r,n,s))}(this._delegate):function HR(n){n=Wt(n,ns);const e=Wt(n.firestore,qn),t=jr(e),r=new Pp(e);return Ox(n._query),fx(t,n._query).then(s=>new $h(e,r,n,s))}(this._delegate),t.then(r=>new oA(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Jx(e),r=Xx(e,s=>new oA(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return qx(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}class aN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new o0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new o0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new o0(this._firestore,r))})}isEqual(e){return Nx(this._delegate,e._delegate)}}class dy extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?lI(this._delegate):lI(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function zR(n,e){const t=Wt(n.firestore,qn),r=lI(n),s=mI(n.converter,e);return cy(t,[hI(Rp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return Ex(this._delegate,e._delegate)}withConverter(e){return new dy(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function Lp(n){return Wt(n,Pn)}class aA{constructor(...e){this._delegate=new Gc(...e)}static documentId(){return new aA(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JR(){return new QT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vp(e)}static delete(){const e=function QR(){return new Xv("deleteField")}();return e._methodName="FieldValue.delete",new Vp(e)}static arrayUnion(...e){const t=function XR(...n){return new bR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vp(t)}static arrayRemove(...e){const t=function eN(...n){return new IR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vp(t)}static increment(e){const t=function tN(n){return new CR("increment",n)}(e);return t._methodName="FieldValue.increment",new Vp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uN={Firestore:Kx,GeoPoint:cI,Timestamp:In,Blob:r0,Transaction:Yx,WriteBatch:Qx,DocumentReference:Ca,DocumentSnapshot:s0,Query:Ts,QueryDocumentSnapshot:o0,QuerySnapshot:oA,CollectionReference:dy,FieldPath:aA,FieldValue:Vp,setLogLevel:function oN(n){!function nD(n){es.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eM(n,e){return function dN(n,e=Df.z){return new vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function uA(n,e){return eM(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function _I(n,e){return uA(n,e).pipe(Eo(void 0),Wg(),(0,yt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const _=s.find(A=>A.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function tM(n,e,t){return _I(n,t).pipe(Gi((r,s)=>function fN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function ww(n,e=$i.y){return n=null!=n?n:DC,(0,jn.e)((t,r)=>{let s,u=!0;t.subscribe((0,Bn.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,yt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function lA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function nM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function cN(n){(function lN(n,e){n.INTERNAL.registerComponent(new Gu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},uN)))})(n,(e,t)=>new Kx(e,t,new sN)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(bw.Z);class rM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_I(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Eo(void 0),Wg(),Wn(([r,s])=>s.length>0||!r),(0,yt.U)(([r,s])=>s),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nM(e);return tM(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new iM(this.ref.doc(e),this.afs)}}class iM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=aM(r,t);return new rM(s,u,this.afs)}snapshotChanges(){return function hN(n,e){return eM(n,e).pipe(Eo(void 0),Wg(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(bn.iC)}}class gN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_I(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wn(t=>t.length>0),bn.iC):_I(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nM(e);return tM(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),bn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(bn.iC)}}const sM=new c.OlP("angularfire2.enableFirestorePersistence"),oM=new c.OlP("angularfire2.firestore.persistenceSettings"),mN=new c.OlP("angularfire2.firestore.settings"),yN=new c.OlP("angularfire2.firestore.use-emulator");function aM(n,e=(t=>t)){return{query:e(n),ref:n}}let cA=(()=>{class n{constructor(t,r,s,u,d,m,_,b,A,k,U,B,X,xe,Oe,pt,_t){this.schedulers=_;const gt=(0,ft.on)(t,m,r),Ve=A;k&&_w(gt,m,U,X,xe,Oe,B,pt),[this.firestore,this.persistenceEnabled$]=(0,ft.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const We=m.runOutsideAngular(()=>gt.firestore());if(u&&We.settings(u),Ve&&We.useEmulator(...Ve),s&&!Go(d)){const xt=()=>{try{return(0,nn.D)(We.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jn){return"undefined"!=typeof console&&console.warn(Jn),st(!1)}};return[We,m.runOutsideAngular(xt)]}return[We,st(!1)]},[u,Ve,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=aM(s,r),m=this.schedulers.ngZone.run(()=>u);return new rM(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new gN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new iM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ft.Dh),c.LFG(ft.xv,8),c.LFG(sM,8),c.LFG(mN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(bn.HU),c.LFG(oM,8),c.LFG(yN,8),c.LFG(ko,8),c.LFG(yw,8),c.LFG(CC,8),c.LFG(Zg,8),c.LFG(d_,8),c.LFG(zg,8),c.LFG(Wd,8),c.LFG(zd,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_N=(()=>{class n{constructor(){Ja.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:sM,useValue:!0},{provide:oM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[cA]}),n})(),dA=(()=>{class n{constructor(t,r,s,u){this.auth=t,this.db=r,this.router=s,this.route=u,this.dbName="Users",this.redirect=!1,this.userCollection=r.collection(this.dbName),this.isAuth$=t.user.pipe((0,yt.U)(d=>!!d)),this.isAuthWithDelay$=this.isAuth$.pipe(function WI(n,e=Df.z){const t=function Ao(n=0,e,t=Df.P){let r=-1;return null!=e&&((0,ZI.K)(e)?t=e:r=e),new vn.y(s=>{let u=function zI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){s.closed||(s.next(d++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return By(()=>t)}(1e3)),this.router.events.pipe(Wn(d=>d instanceof Zi),(0,yt.U)(d=>this.route.firstChild),un(d=>{var m;return null!==(m=null==d?void 0:d.data)&&void 0!==m?m:st({})})).subscribe(d=>{this.redirect=!!d.authOnly})}createUser(t){var r=this;return(0,ge.Z)(function*(){if(!t.password)throw new Error("There's no password provided");const s=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);if(!s.user)throw new Error("User can't be found");yield r.userCollection.doc(s.user.uid).set({name:t.name,email:t.email,phoneNumber:t.phoneNumber,age:t.age}),yield s.user.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,ge.Z)(function*(){t&&t.preventDefault(),yield r.auth.signOut(),r.redirect&&(yield r.router.navigateByUrl(""))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ko),c.LFG(cA),c.LFG($n),c.LFG(Io))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a0=(()=>{class n{constructor(){this.modals=[]}isModalOpen(t){var r;return!!(null===(r=this.modals.find(s=>s.id===t))||void 0===r?void 0:r.visible)}toggleModal(t){const r=this.modals.find(s=>s.id===t);r&&(r.visible=!r.visible)}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",14),c.NdJ("click",function(s){return c.CHM(t),c.oxw().openModal(s)}),c._uU(2,"Login / Register"),c.qZA()()}}const wN=function(){return{sort:"1"}};function EN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c._uU(2," Manage "),c.qZA()(),c.TgZ(3,"li")(4,"a",16),c._uU(5," Upload "),c.qZA()(),c.TgZ(6,"li")(7,"a",17),c.NdJ("click",function(s){return c.CHM(t),c.oxw().auth.logout(s)}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("queryParams",c.DdM(1,wN)))}let bN=(()=>{class n{constructor(t,r){this.modal=t,this.auth=r}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(a0),c.Y36(dA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLink","about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","manage","routerLinkActive","text-indigo-400",1,"px-2",3,"queryParams"],["routerLink","upload","routerLinkActive","text-indigo-400",1,"px-2"],["href","",1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,vN,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,EN,9,2,"ng-template",null,6,c.W1O),c.TgZ(10,"li")(11,"a",7),c._uU(12," About "),c.qZA()()(),c.TgZ(13,"ul",8)(14,"li")(15,"a",9),c._UZ(16,"img",10),c.TgZ(17,"span",11),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",12)(20,"a",9),c._UZ(21,"img",13),c.TgZ(22,"span",11),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const s=c.MAs(9);c.xp6(6),c.Q6J("ngIf",!c.lcZ(7,2,r.auth.isAuth$))("ngIfElse",s)}},directives:[Ya,cn,A0],pipes:[Jc],styles:[""]}),n})();const IN=[[["","heading",""]],"*"],CN=function(n){return{hidden:n}},DN=["[heading]","*"];let uM=(()=>{class n{constructor(t,r){this.modal=t,this.el=r,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(a0),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:DN,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity"],[1,"absolute","inset-0","bg-gray-800","opacity-75",3,"click"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(IN),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c.NdJ("click",function(){return r.closeModal()}),c.qZA()(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(){return r.closeModal()}),c._uU(11," \u2715 "),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,CN,!r.modal.isModalOpen(r.modalID)))},directives:[qr],styles:[""]}),n})();const TN=["*"];let lM=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:TN,decls:2,vars:2,template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div"),c.Hsn(1),c.qZA()),2&t&&c.ekj("hidden",!r.active)},styles:[""]}),n})();const AN=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function SN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().selectTab(u)}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,AN,!t.active,t.active)),c.xp6(1),c.hij(" ",t.tabTitle," ")}}const xN=["*"];let MN=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){var t;const r=null===(t=this.tabs)||void 0===t?void 0:t.filter(s=>s.active);(!r||0===r.length)&&this.selectTab(this.tabs.first)}selectTab(t){var r;return null===(r=this.tabs)||void 0===r||r.forEach(s=>s.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,s){if(1&t&&c.Suo(s,lM,4),2&t){let u;c.iGM(u=c.CRH())&&(r.tabs=u)}},ngContentSelectors:xN,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,SN,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},directives:[Vn,qr],styles:[""]}),n})();const kN=["*"];let vI=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:kN,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},directives:[qr],styles:[""]}),n})(),cM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Up=(()=>{class n extends cM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const uu=new c.OlP("NgValueAccessor"),ON={provide:uu,useExisting:(0,c.Gpc)(()=>u0),multi:!0},FN=new c.OlP("CompositionEventMode");let u0=(()=>{class n extends cM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function PN(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(FN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([ON]),c.qOj]}),n})();function qh(n){return null==n||0===n.length}function hM(n){return null!=n&&"number"==typeof n.length}const xi=new c.OlP("NgValidators"),Zh=new c.OlP("NgAsyncValidators"),LN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mi{static min(e){return function fM(n){return e=>{if(qh(e.value)||qh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function pM(n){return e=>{if(qh(e.value)||qh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return gM(e)}static requiredTrue(e){return function mM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function yM(n){return qh(n.value)||LN.test(n.value)?null:{email:!0}}(e)}static minLength(e){return _M(e)}static maxLength(e){return function vM(n){return e=>hM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return wM(e)}static nullValidator(e){return null}static compose(e){return TM(e)}static composeAsync(e){return AM(e)}}function gM(n){return qh(n.value)?{required:!0}:null}function _M(n){return e=>qh(e.value)||!hM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function wM(n){if(!n)return wI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}function wI(n){return null}function EM(n){return null!=n}function bM(n){const e=(0,c.QGY)(n)?(0,nn.D)(n):n;return(0,c.CqO)(e),e}function IM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function CM(n,e){return e.map(t=>t(n))}function DM(n){return n.map(e=>function VN(n){return!n.validate}(e)?e:t=>e.validate(t))}function TM(n){if(!n)return null;const e=n.filter(EM);return 0==e.length?null:function(t){return IM(CM(t,e))}}function hA(n){return null!=n?TM(DM(n)):null}function AM(n){if(!n)return null;const e=n.filter(EM);return 0==e.length?null:function(t){return function RN(...n){const e=(0,Va.jO)(n),{args:t,keys:r}=wn(n),s=new vn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let _=d,b=d;for(let A=0;A<d;A++){let k=!1;(0,Hl.Xf)(t[A]).subscribe((0,Bn.x)(u,U=>{k||(k=!0,b--),m[A]=U},()=>_--,void 0,()=>{(!_||!k)&&(b||u.next(r?$l(r,m):m),u.complete())}))}});return e?s.pipe(jl(e)):s}(CM(t,e).map(bM)).pipe((0,yt.U)(IM))}}function fA(n){return null!=n?AM(DM(n)):null}function SM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xM(n){return n._rawValidators}function MM(n){return n._rawAsyncValidators}function pA(n){return n?Array.isArray(n)?n:[n]:[]}function EI(n,e){return Array.isArray(n)?n.includes(e):n===e}function kM(n,e){const t=pA(e);return pA(n).forEach(s=>{EI(t,s)||t.push(s)}),t}function RM(n,e){return pA(e).filter(t=>!EI(n,t))}class NM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zh extends NM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class As extends NM{get formDirective(){return null}get path(){return null}}class OM{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let gA=(()=>{class n extends OM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(zh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),l0=(()=>{class n extends OM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(As,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function c0(n,e){_A(n,e),e.valueAccessor.writeValue(n.value),function ZN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FM(n,e)})}(n,e),function WN(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function CI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),TI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function DI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _A(n,e){const t=xM(n);null!==e.validator?n.setValidators(SM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=MM(n);null!==e.asyncValidator?n.setAsyncValidators(SM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();DI(e._rawValidators,s),DI(e._rawAsyncValidators,s)}function TI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=xM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=MM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return DI(e._rawValidators,r),DI(e._rawAsyncValidators,r),t}function FM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LM(n,e){_A(n,e)}function vA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function UM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function wA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===u0?t=u:function QN(n){return Object.getPrototypeOf(n.constructor)===Up}(u)?r=u:s=u}),s||r||t||null}function EA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const d0="VALID",AI="INVALID",hy="PENDING",h0="DISABLED";function IA(n){return(SI(n)?n.validators:n)||null}function BM(n){return Array.isArray(n)?hA(n):n||null}function CA(n,e){return(SI(e)?e.asyncValidators:n)||null}function jM(n){return Array.isArray(n)?fA(n):n||null}function SI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const $M=n=>n instanceof Da,DA=n=>n instanceof fy;function HM(n){return $M(n)?n.value:n.getRawValue()}function GM(n,e){const t=DA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function qM(n,e){DA(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class TA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=BM(this._rawValidators),this._composedAsyncValidatorFn=jM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===d0}get invalid(){return this.status===AI}get pending(){return this.status==hy}get disabled(){return this.status===h0}get enabled(){return this.status!==h0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=BM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jM(e)}addValidators(e){this.setValidators(kM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RM(e,this._rawAsyncValidators))}hasValidator(e){return EI(this._rawValidators,e)}hasAsyncValidator(e){return EI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=h0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===d0||this.status===hy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?h0:d0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hy,this._hasOwnPendingAsyncValidator=!0;const t=bM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function JN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=DA(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof eO)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?h0:this.errors?AI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hy)?hy:this._anyControlsHaveStatus(AI)?AI:d0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){SI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Da extends TA{constructor(e=null,t,r){super(IA(t),CA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),SI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class fy extends TA{constructor(e,t,r){super(IA(t),CA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qM(this,e),Object.keys(e).forEach(r=>{GM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=HM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class eO extends TA{constructor(e,t,r){super(IA(t),CA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qM(this,e),e.forEach((r,s)=>{GM(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>HM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const tO={provide:As,useExisting:(0,c.Gpc)(()=>xI)},f0=(()=>Promise.resolve(null))();let xI=(()=>{class n extends As{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new fy({},hA(t),fA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){f0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),c0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){f0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){f0.then(()=>{const r=this._findContainer(t.path),s=new fy({});LM(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){f0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){f0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,UM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi,10),c.Y36(Zh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([tO]),c.qOj]}),n})();const rO={provide:zh,useExisting:(0,c.Gpc)(()=>AA)},WM=(()=>Promise.resolve(null))();let AA=(()=>{class n extends zh{constructor(t,r,s,u,d){super(),this._changeDetectorRef=d,this.control=new Da,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=wA(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),vA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){c0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){WM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;WM.then(()=>{var u;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function II(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(As,9),c.Y36(xi,10),c.Y36(Zh,10),c.Y36(uu,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([rO]),c.qOj,c.TTD]}),n})(),p0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),YM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const SA=new c.OlP("NgModelWithFormControlWarning"),uO={provide:zh,useExisting:(0,c.Gpc)(()=>xA)};let xA=(()=>{class n extends zh{constructor(t,r,s,u){super(),this._ngModelWarningConfig=u,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=wA(0,s)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&CI(r,this,!1),c0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}vA(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&CI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(xi,10),c.Y36(Zh,10),c.Y36(uu,10),c.Y36(SA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([uO]),c.qOj,c.TTD]}),n})();const lO={provide:As,useExisting:(0,c.Gpc)(()=>py)};let py=(()=>{class n extends As{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(TI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return c0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){CI(t.control||null,t,!1),EA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,UM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(CI(r||null,t),$M(s)&&(c0(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);LM(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function KN(n,e){return TI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_A(this.form,this),this._oldForm&&TI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi,10),c.Y36(Zh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([lO]),c.qOj,c.TTD]}),n})();const fO={provide:uu,useExisting:(0,c.Gpc)(()=>RA),multi:!0};function t1(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RA=(()=>{class n extends Up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=t1(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function pO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([fO]),c.qOj]}),n})(),n1=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(t1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(RA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const gO={provide:uu,useExisting:(0,c.Gpc)(()=>NA),multi:!0};function r1(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let NA=(()=>{class n extends Up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const b=this._getOptionValue(d[m].value);s.push(b)}}else{const d=r.options;for(let m=0;m<d.length;m++){const _=d[m];if(_.selected){const b=this._getOptionValue(_.value);s.push(b)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function mO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([gO]),c.qOj]}),n})(),s1=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(r1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(r1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(NA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Bp=(()=>{class n{constructor(){this._validator=wI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const wO={provide:xi,useExisting:(0,c.Gpc)(()=>MI),multi:!0};let MI=(()=>{class n extends Bp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function yO(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>gM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([wO]),c.qOj]}),n})();const IO={provide:xi,useExisting:(0,c.Gpc)(()=>OA),multi:!0};let OA=(()=>{class n extends Bp{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function o1(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>_M(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[c._Bn([IO]),c.qOj]}),n})();const DO={provide:xi,useExisting:(0,c.Gpc)(()=>PA),multi:!0};let PA=(()=>{class n extends Bp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>wM(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([DO]),c.qOj]}),n})(),f1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[YM]]}),n})(),p1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[f1]}),n})(),kI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:SA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[f1]}),n})();function TO(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij(" ",t.alertMsg,"\n")}}function AO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Email is invalid "),c.qZA())}function SO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Password should be at least 6 characters long, contains 1 capital letter, 1 small letter and at least 1 digit "),c.qZA())}let xO=(()=>{class n{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait! Logging in. . . ",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,ge.Z)(function*(){const{email:r,password:s}=t.credentials;t.showAlert=!0,t.alertMsg="Please wait! Logging in. . . ",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(r,s),t.alertMsg="Success",t.alertColor="green"}catch(u){return t.inSubmission=!1,t.alertMsg="Can't find user",t.alertColor="red",void console.log(u)}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ko))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"submit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","type","email","name","email","placeholder","Enter Email",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","","minlength","6","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,TO,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("submit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(u){return r.credentials.email=u}),c.qZA()(),c.YNc(8,AO,2,0,"p",7),c.TgZ(9,"div",3)(10,"label",4),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",8,9),c.NdJ("ngModelChange",function(u){return r.credentials.password=u}),c.qZA()(),c.YNc(14,SO,2,0,"p",7),c.TgZ(15,"button",10),c._uU(16," Submit "),c.qZA()()),2&t){const s=c.MAs(2),u=c.MAs(7),d=c.MAs(13);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email),c.xp6(2),c.Q6J("ngIf",u.errors&&u.touched&&u.dirty),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",d.errors&&d.touched&&d.dirty),c.xp6(1),c.Q6J("disabled",s.invalid||r.inSubmission)}},directives:[cn,vI,p0,l0,xI,u0,MI,PA,gA,AA,OA],styles:[""]}),n})();class MO{static match(e,t){return r=>{const s=r.get(e),u=r.get(t);if(!s||!u)return console.error("Form control can not be found int the form group."),{controlNotFound:!1};const d=s.value===u.value?null:{nullMatch:!0};return u.setErrors(d),d}}}let kO=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(s=>s.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ko))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var RO=N(655);const RI=new c.OlP("config"),g1=new c.OlP("NEW_CONFIG"),m1=new c.OlP("INITIAL_CONFIG"),NO={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:".",clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},OO=["Hh:m0:s0","Hh:m0","m0:s0"],PO=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let FA=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,s,u,d)=>{const m=r.split(u),_=m.length>1?`${u}${m[1]}`:"";let b=m[0];const A=this.separatorLimit.replace(/\s/g,"");A&&+A&&(b="-"===b[0]?`-${b.slice(1,b.length).slice(0,A.length)}`:b.slice(0,A.length));const k=/(\d+)(\d{3})/;for(;s&&k.test(b);)b=b.replace(k,"$1"+s+"$2");return void 0===d?b+_:0===d?b:b+_.substr(0,d+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const s=r.split(".");return s.length>1?Number(s[s.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var s,u,d;for(let m=(null===(s=this.suffix)||void 0===s?void 0:s.length)-1;m>=0;m--){const _=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(_)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(d=this.suffix)||void 0===d?void 0:d.length))))return r.replace(_,"")}return r},this.checkInputPrecision=(r,s,u)=>{if(s<1/0){const d=new RegExp(this._charToRegExpExpression(u)+`\\d{${s}}.*$`),m=r.match(d);m&&m[0].length-1>s&&(r=r.substring(0,r.length-(m[0].length-1-s))),0===s&&r.endsWith(u)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[s,u]=r;return this.customPattern=u,this.applyMask(t,s)}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){if(null==t||void 0===r)return"";let _=0,b="",A=!1,k=!1,U=1,B=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const X=t.toString().split("");"IP"===r&&(this.ipError=X.filter(Ve=>"."===Ve).length<3&&X.length<7,r="099.099.099.099");const xe=[];for(let Ve=0;Ve<t.length;Ve++)t[Ve].match("\\d")&&xe.push(t[Ve]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==xe.length&&14!==xe.length,r=xe.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Ve=this.getPrecision(r);t=this.checkInputPrecision(t,Ve,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),b=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&t[1]!==this.decimalMarker&&!d?t.slice(1,t.length):t;const Ve=this._charToRegExpExpression(this.thousandSeparator),We=this._charToRegExpExpression(this.decimalMarker),xt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Ve,"").replace(We,""),Jn=new RegExp("["+xt+"]");t.match(Jn)&&(t=t.substring(0,t.length-1));const is=this.getPrecision(r),$p=(t=this.checkInputPrecision(t,is,this.decimalMarker)).replace(new RegExp(Ve,"g"),"");b=this._formatWithSeparators($p,this.thousandSeparator,this.decimalMarker,is);const rS=b.indexOf(",")-t.indexOf(","),Hp=b.length-t.length;if(Hp>0&&","!==b[s]){k=!0;let v0=0;do{this._shift.add(s+v0),v0++}while(v0<Hp)}else 0!==rS&&s>0&&!(b.indexOf(",")>=s&&s>3)||!(b.indexOf(".")>=s&&s>3)&&Hp<=0?(this._shift.clear(),k=!0,U=Hp,this._shift.add(s+=Hp)):this._shift.clear()}else for(let Ve=0,We=X[0];Ve<X.length&&_!==r.length;Ve++,We=X[Ve])if(this._checkSymbolMask(We,r[_])&&"?"===r[_+1])b+=We,_+=2;else if("*"===r[_+1]&&A&&this._checkSymbolMask(We,r[_+2]))b+=We,_+=3,A=!1;else if(this._checkSymbolMask(We,r[_])&&"*"===r[_+1])b+=We,A=!0;else if("?"===r[_+1]&&this._checkSymbolMask(We,r[_+2]))b+=We,_+=3;else if(this._checkSymbolMask(We,r[_])){if("H"===r[_]&&Number(We)>2){_+=1,this._shiftStep(r,_,X.length),Ve--,this.leadZeroDateTime&&(b+="0");continue}if("h"===r[_]&&"2"===b&&Number(We)>3){_+=1,Ve--;continue}if("m"===r[_]&&Number(We)>5){_+=1,this._shiftStep(r,_,X.length),Ve--,this.leadZeroDateTime&&(b+="0");continue}if("s"===r[_]&&Number(We)>5){_+=1,this._shiftStep(r,_,X.length),Ve--,this.leadZeroDateTime&&(b+="0");continue}const xt=31;if("d"===r[_]&&(Number(We)>3&&this.leadZeroDateTime||Number(t.slice(_,_+2))>xt||"/"===t[_+1])){_+=1,this._shiftStep(r,_,X.length),Ve--,this.leadZeroDateTime&&(b+="0");continue}if("M"===r[_]){const is=0===_&&(Number(We)>2||Number(t.slice(_,_+2))>12||"/"===t[_+1]),$p=t.slice(_-3,_-1).includes("/")&&("/"===t[_-2]&&Number(t.slice(_-1,_+1))>12&&"/"!==t[_]||"/"===t[_]||"/"===t[_-3]&&Number(t.slice(_-2,_))>12&&"/"!==t[_-1]||"/"===t[_-1]),rS=Number(t.slice(_-3,_-1))<=xt&&!t.slice(_-3,_-1).includes("/")&&"/"===t[_-1]&&(Number(t.slice(_,_+2))>12||"/"===t[_+1]),Hp=Number(t.slice(_-3,_-1))>xt&&!t.slice(_-3,_-1).includes("/")&&!t.slice(_-2,_).includes("/")&&Number(t.slice(_-2,_))>12,v0=Number(t.slice(_-3,_-1))<=xt&&!t.slice(_-3,_-1).includes("/")&&"/"!==t[_-1]&&Number(t.slice(_-1,_+1))>12;if(Number(We)>1&&this.leadZeroDateTime||is||$p||rS||Hp||v0){_+=1,this._shiftStep(r,_,X.length),Ve--,this.leadZeroDateTime&&(b+="0");continue}}b+=We,_++}else-1!==this.maskSpecialCharacters.indexOf(r[_])?(b+=r[_],_++,this._shiftStep(r,_,X.length),Ve--):this.maskSpecialCharacters.indexOf(We)>-1&&this.maskAvailablePatterns[r[_]]&&this.maskAvailablePatterns[r[_]].optional?(!!X[_]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&(b+=X[_]),_++,Ve--):"*"===this.maskExpression[_+1]&&this._findSpecialChar(this.maskExpression[_+2])&&this._findSpecialChar(We)===this.maskExpression[_+2]&&A||"?"===this.maskExpression[_+1]&&this._findSpecialChar(this.maskExpression[_+2])&&this._findSpecialChar(We)===this.maskExpression[_+2]&&A?(_+=3,b+=We):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(We)<0&&We!==this.placeHolderCharacter&&(B=!0);b.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(b+=r[r.length-1]);let Oe=s+1;for(;this._shift.has(Oe);)U++,Oe++;let pt=u?_:this._shift.has(s)?U:0;B&&pt--,m(pt,k),U<0&&this._shift.clear();let _t=!1;d&&(_t=X.every(Ve=>this.maskSpecialCharacters.includes(Ve)));let gt=`${this.prefix}${_t?"":b}${this.suffix}`;return 0===b.length&&(gt=`${this.prefix}${b}`),gt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,s)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===s&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?"\\"+t:t)}_shiftStep(t,r,s){const u=/[*?]/g.test(t.slice(0,r))?s:r;this._shift.add(u+this.prefix.length||0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(RI))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),y1=(()=>{class n extends FA{constructor(t,r,s,u){super(r),this.document=t,this._config=r,this._elementRef=s,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.onChange=d=>{}}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){if(!r)return t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const _=t&&"number"==typeof this.selStart?t[this.selStart]:"";let b="";if(this.hiddenInput&&!this.writingValue){let B=this.actualValue.split("");""!==t&&B.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>B.length?B.splice(this.selStart,0,_):t.length<B.length&&(B.length-t.length==1?B.splice(this.selStart-1,1):B.splice(this.selStart,this.selEnd-this.selStart))):B=[],b=this.actualValue.length&&B.length<=t.length?this.shiftTypedSymbols(B.join("")):t}b=Boolean(b)&&b.length?b:t;const A=super.applyMask(b,r,s,u,d,m);if(this.actualValue=this.getActualValue(A),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(B=>B!==this.decimalMarker)),this.formControlResult(A),!this.showMaskTyped)return this.hiddenInput&&A&&A.length?this.hideInput(A,this.maskExpression):A;const k=A.length,U=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const B=this._numberSkipedSymbols(A);return A+U.slice(k+B)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?A+U:A+U.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let s=r.exec(t),u=0;for(;null!=s;)u+=1,s=r.exec(t);return u}applyValueChanges(t=0,r,s,u=(()=>{})){const d=this._elementRef.nativeElement;d.value=this.applyMask(d.value,this.maskExpression,t,r,s,u),d!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((s,u)=>this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&this.maskAvailablePatterns[r[u]].symbol?this.maskAvailablePatterns[r[u]].symbol:s).join("")}getActualValue(t){const r=t.split("").filter((s,u)=>this._checkSymbolMask(s,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&s===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,d)=>{if(this.maskSpecialCharacters.includes(t[d+1])&&t[d+1]!==this.maskExpression[d+1])return r=u,t[d+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(s=>this._findSpecialChar(s)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const r=[];for(let s=0;s<t.length;s++)t[s].match("\\d")&&r.push(t[s]);return r.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>3&&r.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>6&&r.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){const r=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,s=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return r;const u=[];for(let d=0;d<t.length;d++)t[d].match("\\d")&&u.push(t[d]);return u.length<=3?r.slice(u.length,r.length):u.length>3&&u.length<=6?r.slice(u.length+1,r.length):u.length>6&&u.length<=9?r.slice(u.length+2,r.length):u.length>9&&u.length<11?r.slice(u.length+3,r.length):11===u.length?"":12===u.length?s.slice(17===t.length?16:15,s.length):u.length>12&&u.length<=14?s.slice(u.length+4,s.length):""}formControlResult(t){this.writingValue||this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let s=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&(s=s.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,s):Number(s):s}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(RI),c.LFG(c.SBq),c.LFG(c.Qsj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),FO=(()=>{class n{constructor(t,r,s){this.document=t,this._maskService=r,this._config=s,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:s,patterns:u,prefix:d,suffix:m,thousandSeparator:_,decimalMarker:b,dropSpecialCharacters:A,hiddenInput:k,showMaskTyped:U,placeHolderCharacter:B,shownMaskExpression:X,showTemplate:xe,clearIfNotMatch:Oe,validation:pt,separatorLimit:_t,allowNegativeNumbers:gt,leadZeroDateTime:Ve}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),this._maskValue=r.currentValue||"",r.currentValue&&r.currentValue.split("||").length>1&&(this._maskExpressionArray=r.currentValue.split("||").sort((We,xt)=>We.length-xt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0])),s){if(!s.currentValue||!Array.isArray(s.currentValue))return;this._maskService.maskSpecialCharacters=s.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),d&&(this._maskService.prefix=d.currentValue),m&&(this._maskService.suffix=m.currentValue),_&&(this._maskService.thousandSeparator=_.currentValue),b&&(this._maskService.decimalMarker=b.currentValue),A&&(this._maskService.dropSpecialCharacters=A.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),U&&(this._maskService.showMaskTyped=U.currentValue),B&&(this._maskService.placeHolderCharacter=B.currentValue),X&&(this._maskService.shownMaskExpression=X.currentValue),xe&&(this._maskService.showTemplate=xe.currentValue),Oe&&(this._maskService.clearIfNotMatch=Oe.currentValue),pt&&(this._maskService.validation=pt.currentValue),_t&&(this._maskService.separatorLimit=_t.currentValue),gt&&(this._maskService.allowNegativeNumbers=gt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(We=>"-"!==We))),Ve&&(this._maskService.leadZeroDateTime=Ve.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||PO.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(OO.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const s in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[s].optional&&!0===this._maskService.maskAvailablePatterns[s].optional&&(this._maskValue.indexOf(s)!==this._maskValue.lastIndexOf(s)?r+=this._maskValue.split("").filter(d=>d===s).join("").length:-1!==this._maskValue.indexOf(s)&&r++,-1!==this._maskValue.indexOf(s)&&t.toString().length>=this._maskValue.indexOf(s)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const s=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<s)return this._createValidationError(t)}}return null}onPaste(){this._justPasted=!0}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const s=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,d=!1;if(this._maskService.applyValueChanges(s,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(_,b)=>{this._justPasted=!1,u=_,d=b}),this.document.activeElement!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+s+u:s+("Backspace"!==this._code||d?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onFocus(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const d=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==d&&(r.value=d),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const s=t.target;if(this._inputValue=s.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===s.value.length&&(s.selectionStart=s.selectionEnd),8===t.keyCode&&0!==s.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&s.selectionStart<=this.prefix.length)s.setSelectionRange(this.prefix.length,this.prefix.length);else{if(this._inputValue.length!==s.selectionStart&&1!==s.selectionStart)for(;this.specialCharacters.includes(this._inputValue[s.selectionStart-1].toString())&&(this.prefix.length>=1&&s.selectionStart>this.prefix.length||0===this.prefix.length);)s.setSelectionRange(s.selectionStart-1,s.selectionStart-1);this.suffixCheckOnPressDelete(t.keyCode,s)}this.suffixCheckOnPressDelete(t.keyCode,s),this._maskService.prefix.length&&s.selectionStart<=this._maskService.prefix.length&&s.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=s.selectionStart;8===t.keyCode&&!s.readOnly&&0===u&&s.selectionEnd===s.value.length&&0!==s.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<s.selectionStart?s.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&!0===t.ctrlKey||65===t.keyCode&&!0===t.metaKey)&&(s.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=s.selectionStart,this._maskService.selEnd=s.selectionEnd}writeValue(t){return(0,RO.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),void 0===t&&(t=""),"number"==typeof t&&(t=String(t),t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t,this._maskService.isNumberValue=!0),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}suffixCheckOnPressDelete(t,r){46===t&&this.suffix.length>0&&this._inputValue.length-this.suffix.length<=r.selectionStart&&r.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),8===t&&(this.suffix.length>1&&this._inputValue.length-this.suffix.length<r.selectionStart&&r.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),1===this.suffix.length&&this._inputValue.length===r.selectionStart&&r.setSelectionRange(r.selectionStart-1,r.selectionStart-1))}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,s,u)=>{if(this._start="{"===s?u:this._start,"}"!==s)return this._maskService._findSpecialChar(s)?r+s:r;this._end=u;const d=Number(t.slice(this._start+1,this._end));return r+new Array(d+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(s=>":"!==s).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,s;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(s=this._maskService.removeMask(t))||void 0===s?void 0:s.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(de),c.Y36(y1),c.Y36(RI))},n.\u0275dir=c.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&c.NdJ("paste",function(){return r.onPaste()})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onFocus(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime"},features:[c._Bn([{provide:uu,useExisting:(0,c.Gpc)(()=>n),multi:!0},{provide:xi,useExisting:(0,c.Gpc)(()=>n),multi:!0},y1]),c.TTD]}),n})(),LO=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:g1,useValue:t},{provide:m1,useValue:NO},{provide:RI,useFactory:VO,deps:[m1,g1]},FA]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function VO(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}const _1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function UO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be at least 8 characters long, have 1 uppercase, 1 lowercase letter and 1 number. "),c.qZA())}function BO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Field is required "),c.qZA())}function jO(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The value you inputed is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," characters long ")}}function $O(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," You must enter a valid E-mail "),c.qZA())}function HO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," User with this email already exists "),c.qZA())}function GO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too low "),c.qZA())}function qO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too high "),c.qZA())}function ZO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Passwords do not match "),c.qZA())}function zO(n,e){if(1&n&&(c.ynx(0),c.YNc(1,UO,2,0,"p",2),c.YNc(2,BO,2,0,"p",2),c.YNc(3,jO,2,2,"p",2),c.YNc(4,$O,2,0,"p",2),c.YNc(5,HO,2,0,"p",2),c.YNc(6,GO,2,0,"p",2),c.YNc(7,qO,2,0,"p",2),c.YNc(8,ZO,2,0,"p",2),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.nullMatch)}}_1.KeyboardEvent||(_1.KeyboardEvent=function(n,e){});let LA=(()=>{class n{constructor(){this.control=new Da(""),this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c._UZ(0,"input",0),c.YNc(1,zO,9,8,"ng-container",1)),2&t&&(c.Q6J("formControl",r.control)("type",r.type)("placeholder",r.placeholder)("mask",r.format)("dropSpecialCharacters",!1),c.xp6(1),c.Q6J("ngIf",r.control.dirty&&r.control.touched))},directives:[u0,FO,gA,xA,cn],styles:[""]}),n})();function WO(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij(" ",t.alertMsg,"\n")}}let KO=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.inSubmission=!1,this.name=new Da("",[Mi.required,Mi.minLength(3)]),this.email=new Da("",[Mi.required,Mi.email],[this.emailTaken.validate]),this.age=new Da(null,[Mi.required,Mi.min(18),Mi.max(120)]),this.password=new Da("",[Mi.required,Mi.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirmPassword=new Da("",[Mi.required]),this.phoneNumber=new Da("",[Mi.required,Mi.minLength(14),Mi.maxLength(14)]),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created",this.alertColor="blue",this.registerForm=new fy({name:this.name,age:this.age,email:this.email,password:this.password,confirmPassword:this.confirmPassword,phoneNumber:this.phoneNumber},[MO.match("password","confirmPassword")])}register(){var t=this;return(0,ge.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait! Your account is being created",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.createUser(t.registerForm.value)}catch(r){return console.log(r),t.alertMsg="Error! Try later",t.alertColor="red",void(t.inSubmission=!1)}t.alertMsg="Success",t.alertColor="green",t.inSubmission=!1})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dA),c.Y36(kO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter name",3,"control"],["type","email","placeholder","Enter E-mail",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter password",3,"control"],["type","password","placeholder","Confirm your password",3,"control"],["placeholder","Enter Phone Number","format","(000)000-00-00",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(c.YNc(0,WO,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c._UZ(9,"app-input",5),c.qZA(),c.TgZ(10,"div",2)(11,"label",3),c._uU(12,"Age"),c.qZA(),c._UZ(13,"app-input",6),c.qZA(),c.TgZ(14,"div",2)(15,"label",3),c._uU(16,"Password"),c.qZA(),c._UZ(17,"app-input",7),c.qZA(),c.TgZ(18,"div",2)(19,"label",3),c._uU(20,"Confirm Password"),c.qZA(),c._UZ(21,"app-input",8),c.qZA(),c.TgZ(22,"div",2)(23,"label",3),c._uU(24,"Phone Number"),c.qZA(),c._UZ(25,"app-input",9),c.qZA(),c.TgZ(26,"button",10),c._uU(27," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirmPassword),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("disabled",r.registerForm.invalid||r.inSubmission))},directives:[cn,vI,p0,l0,py,LA],styles:[""]}),n})(),YO=(()=>{class n{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(a0))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tabs-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},directives:[uM,MN,lM,xO,KO],styles:[""]}),n})();function QO(n,e){1&n&&c._UZ(0,"app-auth-modal")}let JO=(()=>{class n{constructor(t){this.auth=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav")(1,"router-outlet"),c.YNc(2,QO,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.auth.isAuthWithDelay$)))},directives:[bN,tc,cn,YO],pipes:[Jc],styles:[""]}),n})(),VA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[],imports:[[ka,kI,LO.forRoot()]]}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ka,VA,kI,p1]]}),n})();const UA_firebase={apiKey:"AIzaSyDmaerpKN02wLk29uJ02dk0jmYB7xcqxyk",authDomain:"clips-526b5.firebaseapp.com",projectId:"clips-526b5",storageBucket:"clips-526b5.appspot.com",appId:"1:891578401316:web:f738da3d040d492fff4eb1"},v1="firebasestorage.googleapis.com",w1="storageBucket";class lr extends Tt.ZR{constructor(e,t){super(BA(e),`Firebase Storage: ${t} (${BA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lr.prototype)}_codeEquals(e){return BA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function BA(n){return"storage/"+n}function jA(){return new lr("unknown","An unknown error occurred, please check the error payload for server response.")}function E1(){return new lr("canceled","User canceled the upload/download.")}function b1(){return new lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gy(n){return new lr("invalid-argument",n)}function I1(){return new lr("app-deleted","The Firebase app was deleted.")}function C1(n){return new lr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function g0(n,e){return new lr("invalid-format","String does not match format '"+n+"': "+e)}function m0(n){throw new lr("internal-error","Internal error: "+n)}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch(s){return new rs(e,"")}if(""===r.path)return r;throw function cP(n){return new lr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(Ve){Ve.path_=decodeURIComponent(Ve.path)}const k=t.replace(/[.]/g,"\\."),gt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(Ve){"/"===Ve.path.charAt(Ve.path.length-1)&&(Ve.path_=Ve.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===v1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Ve=0;Ve<gt.length;Ve++){const We=gt[Ve],xt=We.regex.exec(e);if(xt){let is=xt[We.indices.path];is||(is=""),r=new rs(xt[We.indices.bucket],is),We.postModify(r);break}}if(null==r)throw function lP(n){return new lr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class pP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NI(n){return"string"==typeof n||n instanceof String}function D1(n){return $A()&&n instanceof Blob}function $A(){return"undefined"!=typeof Blob}function HA(n,e,t,r){if(r<e)throw gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Zc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function T1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Wh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Wh||(Wh={})),Wh))();class wP{constructor(e,t,r,s,u,d,m,_,b,A,k){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,B)=>{this.resolve_=U,this.reject_=B,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,d=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(m,m.getResponse());!function yP(n){return void 0!==n}(_)?u():u(_)}catch(_){d(_)}else if(null!==m){const _=jA();_.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,_):_)}else d(s.canceled?this.appDelete_?I1():E1():function uP(){return new lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new OI(!1,null,!0)):this.backoffId_=function gP(n,e,t){let r=1,s=null,u=null,d=!1,m=0;function _(){return 2===m}let b=!1;function A(...Oe){b||(b=!0,e.apply(null,Oe))}function k(Oe){s=setTimeout(()=>{s=null,n(B,_())},Oe)}function U(){u&&clearTimeout(u)}function B(Oe,...pt){if(b)return void U();if(Oe)return U(),void A.call(null,Oe,...pt);if(_()||d)return U(),void A.call(null,Oe,...pt);let gt;r<64&&(r*=2),1===m?(m=2,gt=0):gt=1e3*(r+Math.random()),k(gt)}let X=!1;function xe(Oe){X||(X=!0,U(),!b&&(null!==s?(Oe||(m=2),clearTimeout(s),k(0)):Oe||(m=1)))}return k(0),u=setTimeout(()=>{d=!0,xe(!0)},t),xe}((r,s)=>{if(s)return void r(!1,new OI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===Wh.NO_ERROR,_=u.getStatus();if(!m||this.isRetryStatusCode_(_)){const A=u.getErrorCode()===Wh.ABORT;return void r(!1,new OI(!1,null,A))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new OI(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class OI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AP(...n){const e=function TP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if($A())return new Blob(n);throw new lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class GA{constructor(e,t){this.data=e,this.contentType=t||null}}function qA(n,e){switch(n){case Vo.RAW:return new GA(A1(e));case Vo.BASE64:case Vo.BASE64URL:return new GA(S1(n,e));case Vo.DATA_URL:return new GA(function kP(n){const e=new x1(n);return e.base64?S1(Vo.BASE64,e.rest):function MP(n){let e;try{e=decodeURIComponent(n)}catch(t){throw g0(Vo.DATA_URL,"Malformed data URL.")}return A1(e)}(e.rest)}(e),function RP(n){return new x1(n).contentType}(e))}throw jA()}function A1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function S1(n,e){switch(n){case Vo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw g0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw g0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xP(n){return atob(n)}(e)}catch(s){throw g0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class x1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw g0(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function NP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Il{constructor(e,t){let r=0,s="";D1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(D1(this.data_)){const s=function SP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Il(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Il(r,!0)}}static getBlob(...e){if($A()){const t=e.map(r=>r instanceof Il?r.data_:r);return new Il(AP.apply(null,t))}{const t=e.map(d=>NI(d)?qA(Vo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)s[u++]=d[m]}),new Il(s,!0)}}uploadData(){return this.data_}}function ZA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function vP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function M1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function FP(n,e){return e}class Ss{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||FP}}let PI=null;function y0(){if(PI)return PI;const n=[];n.push(new Ss("bucket")),n.push(new Ss("generation")),n.push(new Ss("metageneration")),n.push(new Ss("name","fullPath",!0));const t=new Ss("name");t.xform=function e(u,d){return function LP(n){return!NI(n)||n.length<2?n:M1(n)}(d)},n.push(t);const s=new Ss("size");return s.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(s),n.push(new Ss("timeCreated")),n.push(new Ss("updated")),n.push(new Ss("md5Hash",null,!0)),n.push(new Ss("cacheControl",null,!0)),n.push(new Ss("contentDisposition",null,!0)),n.push(new Ss("contentEncoding",null,!0)),n.push(new Ss("contentLanguage",null,!0)),n.push(new Ss("contentType",null,!0)),n.push(new Ss("metadata","customMetadata",!0)),PI=n,PI}function k1(n,e,t){const r=ZA(e);return null===r?null:function UP(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function VP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new rs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function zA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const R1="prefixes";class Cl{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dl(n){if(!n)throw jA()}function FI(n,e){return function t(r,s){const u=k1(n,s,e);return Dl(null!==u),u}}function my(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oP(){return new lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function sP(){return new lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function iP(n){return new lr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aP(n){return new lr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function _0(n){const e=my(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function rP(n){return new lr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function O1(n,e,t){const s=Zc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new Cl(s,"GET",FI(n,t),d);return m.errorHandler=_0(e),m}function qP(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=Zc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new Cl(m,"GET",function HP(n,e){return function t(r,s){const u=function $P(n,e,t){const r=ZA(t);return null===r?null:function jP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[R1])for(const s of t[R1]){const u=s.replace(/\/$/,""),d=n._makeStorageReference(new rs(e,u));r.prefixes.push(d)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new rs(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Dl(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=my(e),A}function F1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function KP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class LI{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function WA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(s){Dl(!1)}return Dl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const XP={STATE_CHANGED:"state_changed"},xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KA(n){switch(n){case"running":case"pausing":case"canceling":return xs.RUNNING;case"paused":return xs.PAUSED;case"success":return xs.SUCCESS;case"canceled":return xs.CANCELED;default:return xs.ERROR}}class eF{constructor(e,t,r){if(function _P(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function yy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class nF extends class tF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw m0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw m0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw m0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw m0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw m0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function lu(){return new nF}class B1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=y0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function YP(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d=F1(e,r,s),m={name:d.fullPath},_=Zc(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},k=zA(d,t),X=new Cl(_,"POST",function B(xe){let Oe;WA(xe);try{Oe=xe.getResponseHeader("X-Goog-Upload-URL")}catch(pt){Dl(!1)}return Dl(NI(Oe)),Oe},n.maxUploadRetryTime);return X.urlParams=m,X.headers=A,X.body=k,X.errorHandler=my(e),X}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,lu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function QP(n,e,t,r){const _=new Cl(t,"POST",function u(b){const A=WA(b,["active","final"]);let k=null;try{k=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){Dl(!1)}k||Dl(!1);const U=Number(k);return Dl(!isNaN(U)),new LI(U,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=my(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,lu,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new LI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let d;try{d=function JP(n,e,t,r,s,u,d,m){const _=new LI(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function hP(){return new lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let A=b;s>0&&(A=Math.min(A,s));const k=_.current,X={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},xe=r.slice(k,k+A);if(null===xe)throw b1();const gt=new Cl(t,"POST",function Oe(Ve,We){const xt=WA(Ve,["active","final"]),Jn=_.current+A,is=r.size();let $p;return $p="final"===xt?FI(e,u)(Ve,We):null,new LI(Jn,is,"final"===xt,$p)},e.maxUploadRetryTime);return gt.headers=X,gt.body=xe.uploadData(),gt.progressCallback=m||null,gt.errorHandler=my(n),gt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const m=this._ref.storage._makeRequest(d,lu,s,u);this._request=m,m.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=O1(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,lu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function L1(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function m(){let gt="";for(let Ve=0;Ve<2;Ve++)gt+=Math.random().toString().slice(2);return gt}();d["Content-Type"]="multipart/related; boundary="+_;const b=F1(e,r,s),A=zA(b,t),B=Il.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===B)throw b1();const X={name:b.fullPath},xe=Zc(u,n.host,n._protocol),pt=n.maxUploadRetryTime,_t=new Cl(xe,"POST",FI(n,t),pt);return _t.urlParams=X,_t.headers=d,_t.body=B.uploadData(),_t.errorHandler=my(e),_t}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,lu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=E1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=KA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new eF(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(KA(this._state)){case xs.SUCCESS:yy(this._resolve.bind(null,this.snapshot))();break;case xs.CANCELED:case xs.ERROR:yy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KA(this._state)){case xs.RUNNING:case xs.PAUSED:e.next&&yy(e.next.bind(e,this.snapshot))();break;case xs.SUCCESS:e.complete&&yy(e.complete.bind(e))();break;default:e.error&&yy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class jp{constructor(e,t){this._service=e,this._location=t instanceof rs?t:rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jp(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return M1(this._location.path)}get storage(){return this._service}get parent(){const e=function OP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rs(this._location.bucket,e);return new jp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw C1(e)}}function $1(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,ge.Z)(function*(n,e,t){const s=yield H1(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield $1(n,e,s.nextPageToken))}),YA.apply(this,arguments)}function H1(n,e){null!=e&&"number"==typeof e.maxResults&&HA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,lu)}function pF(n){n._throwIfRoot("getDownloadURL");const e=function ZP(n,e,t){const s=Zc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new Cl(s,"GET",function GP(n,e){return function t(r,s){const u=k1(n,s,e);return Dl(null!==u),function BP(n,e,t,r){const s=ZA(e);if(null===s||!NI(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(b=>{const k=n.fullPath;return Zc("/b/"+d(n.bucket)+"/o/"+d(k),t,r)+T1({alt:"media",token:b})})[0]}(u,s,n.host,n._protocol)}}(n,t),d);return m.errorHandler=_0(e),m}(n.storage,n._location,y0());return n.storage.makeRequestWithTokens(e,lu).then(t=>{if(null===t)throw function fP(){return new lr("no-download-url","The given file does not have any download URLs.")}();return t})}function G1(n,e){const t=function PP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new rs(n._location.bucket,t);return new jp(n.storage,r)}function q1(n,e){if(n instanceof QA){const t=n;if(null==t._bucket)throw function dP(){return new lr("no-default-bucket","No default bucket found. Did you set the '"+w1+"' property when initializing the app?")}();const r=new jp(t,t._bucket);return null!=e?q1(r,e):r}return void 0!==e?G1(n,e):n}function _F(n,e){if(e&&function mF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof QA)return function yF(n,e){return new jp(n,e)}(n,e);throw gy("To use ref(service, url), the first argument must be a Storage instance.")}return q1(n,e)}function Z1(n,e){const t=null==e?void 0:e[w1];return null==t?null:rs.makeFromBucketSpec(t,n)}class QA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=v1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?rs.makeFromBucketSpec(s,this._host):Z1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rs.makeFromBucketSpec(this._url,e):Z1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new pP(I1());{const u=function DP(n,e,t,r,s,u){const d=T1(n.urlParams),m=n.url+d,_=Object.assign({},n.headers);return function IP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function EP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function bP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function CP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new wP(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const z1="@firebase/storage";function Y1(n,e){return _F(n=(0,Tt.m9)(n),e)}function xF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new QA(t,r,s,e,Es.SDK_VERSION)}!function MF(){(0,Es._registerComponent)(new Gu.wA("storage",xF,"PUBLIC").setMultipleInstances(!0)),(0,Es.registerVersion)(z1,"0.9.8",""),(0,Es.registerVersion)(z1,"0.9.8","esm2017")}();class VI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Q1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new VI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new VI(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?d=>t(new VI(d,this,this._ref)):{next:t.next?d=>t.next(new VI(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class J1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zc(e,this._service))}get items(){return this._delegate.items.map(e=>new zc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function AF(n,e){return G1(n,e)}(this._delegate,e);return new zc(t,this.storage)}get root(){return new zc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new zc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Q1(function wF(n,e,t){return function lF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new B1(n,new Il(e),t)}(n=(0,Tt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vo.RAW,r){this._throwIfRoot("putString");const s=qA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new Q1(new B1(this._delegate,new Il(s.data,!0),u),this)}listAll(){return function CF(n){return function dF(n){const e={prefixes:[],items:[]};return $1(n,e).then(()=>e)}(n=(0,Tt.m9)(n))}(this._delegate).then(e=>new J1(e,this.storage))}list(e){return function IF(n,e){return H1(n=(0,Tt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new J1(t,this.storage))}getMetadata(){return function EF(n){return function hF(n){n._throwIfRoot("getMetadata");const e=O1(n.storage,n._location,y0());return n.storage.makeRequestWithTokens(e,lu)}(n=(0,Tt.m9)(n))}(this._delegate)}updateMetadata(e){return function bF(n,e){return function fF(n,e){n._throwIfRoot("updateMetadata");const t=function zP(n,e,t,r){const u=Zc(e.fullServerUrl(),n.host,n._protocol),m=zA(t,r),b=n.maxOperationRetryTime,A=new Cl(u,"PATCH",FI(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=_0(e),A}(n.storage,n._location,e,y0());return n.storage.makeRequestWithTokens(t,lu)}(n=(0,Tt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function DF(n){return pF(n=(0,Tt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function TF(n){return function gF(n){n._throwIfRoot("deleteObject");const e=function WP(n,e){const r=Zc(e.fullServerUrl(),n.host,n._protocol),m=new Cl(r,"DELETE",function d(_,b){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=_0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,lu)}(n=(0,Tt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw C1(e)}}class X1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ek(e))throw gy("ref() expected a child path but got a URL, use refFromURL instead.");return new zc(Y1(this._delegate,e),this)}refFromURL(e){if(!ek(e))throw gy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rs.makeFromUrl(e,this._delegate.host)}catch(t){throw gy("refFromUrl() expected a valid full URL but got an invalid one.")}return new zc(Y1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function SF(n,e,t,r={}){!function vF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Tt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ek(n){return/^[A-Za-z]+:\/\//.test(n)}function OF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new X1(t,r)}function tk(n){const e=function FF(n){return new vn.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function eP(n,e=Df.z){return(0,jn.e)((t,r)=>{let s=null,u=null,d=null;const m=()=>{if(s){s.unsubscribe(),s=null;const b=u;u=null,r.next(b)}};function _(){const b=d+n,A=e.now();if(A<b)return s=this.schedule(void 0,b-A),void r.add(s);m()}t.subscribe((0,Bn.x)(r,b=>{u=b,d=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function UI(n){return{getDownloadURL:()=>st(void 0).pipe(bn.fc,un(()=>n.getDownloadURL()),bn.iC),getMetadata:()=>st(void 0).pipe(bn.fc,un(()=>n.getMetadata()),bn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>UI(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>tk(n.put(e,t)),putString:(e,t,r)=>tk(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function PF(n){const e={TaskState:xs,TaskEvent:XP,StringFormat:Vo,Storage:X1,Reference:zc};n.INTERNAL.registerComponent(new Gu.wA("storage-compat",OF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.16")}(bw.Z);const LF=new c.OlP("angularfire2.storageBucket"),VF=new c.OlP("angularfire2.storage.maxUploadRetryTime"),UF=new c.OlP("angularfire2.storage.maxOperationRetryTime"),BF=new c.OlP("angularfire2.storage.use-emulator");let JA=(()=>{class n{constructor(t,r,s,u,d,m,_,b,A,k){const U=(0,ft.on)(t,d,r);this.storage=(0,ft.cc)(`${U.name}.storage.${s}`,"AngularFireStorage",U.name,()=>{const B=d.runOutsideAngular(()=>U.storage(s||void 0)),X=A;return X&&B.useEmulator(...X),_&&B.setMaxUploadRetryTime(_),b&&B.setMaxOperationRetryTime(b),B},[_,b])}ref(t){return UI(this.storage.ref(t))}refFromURL(t){return UI(this.storage.refFromURL(t))}upload(t,r,s){return UI(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ft.Dh),c.LFG(ft.xv,8),c.LFG(LF,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(bn.HU),c.LFG(VF,8),c.LFG(UF,8),c.LFG(BF,8),c.LFG(zd,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),$F=(()=>{class n{constructor(){Ja.Z.registerVersion("angularfire",bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[JA],imports:[jF]}),n})(),XA=(()=>{class n{constructor(t,r,s){this.db=t,this.auth=r,this.storage=s,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUsersClips(t){return go([this.auth.user,t]).pipe(un(([r,s])=>r?this.clipsCollection.ref.where("uid","==",r.uid).orderBy("timestamp","1"===s?"desc":"asc").get():st([])),(0,yt.U)(r=>r.docs))}updateClip(t,r){return this.clipsCollection.doc(t).update({title:r})}deleteClip(t){var r=this;return(0,ge.Z)(function*(){yield r.storage.ref(`clips/${t.docID}`).delete(),yield r.clipsCollection.doc(t.docID).delete()})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(cA),c.LFG(ko),c.LFG(JA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HF(n,e){if(1&n&&(c.TgZ(0,"app-alert",9)(1,"p"),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(2),c.Oqu(t.alertMsg)}}const GF=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};let qF=(()=>{class n{constructor(t,r){this.modal=t,this.clipService=r,this.activeClip=null,this.inUploading=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait! Updating clip. . . ",this.update=new c.vpe,this.title=new Da("",{validators:[Mi.required,Mi.minLength(3)]}),this.clipId=new Da(""),this.editForm=new fy({title:this.title,id:this.clipId},[])}ngOnInit(){this.modal.register("editClip")}ngOnChanges(){!this.activeClip||(this.inUploading=!1,this.showAlert=!1,this.clipId.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}ngOnDestroy(){this.modal.unregister("editClip")}submit(){var t=this;return(0,ge.Z)(function*(){if(t.activeClip){t.inUploading=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Updating clip. . . ";try{yield t.clipService.updateClip(t.clipId.value,t.title.value)}catch(r){return t.inUploading=!1,t.alertColor="red",void(t.alertMsg="Something went wrong. Try again later!")}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inUploading=!1,t.alertColor="green",t.alertMsg="Success!"}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(a0),c.Y36(XA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[c.TTD],decls:12,vars:8,consts:[["modalID","editClip"],[1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Edit Video"),c.qZA(),c.YNc(3,HF,3,2,"app-alert",2),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(5,"div",4)(6,"label",5),c._uU(7,"Title"),c.qZA(),c._UZ(8,"app-input",6),c.qZA(),c.TgZ(9,"div",7)(10,"button",8),c._uU(11," Update "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.editForm),c.xp6(4),c.Q6J("control",r.title),c.xp6(2),c.Q6J("disabled",r.inUploading)("ngClass",c.WLB(5,GF,r.inUploading,!r.inUploading)))},directives:[uM,cn,vI,p0,l0,py,LA,qr],styles:[""]}),n})();function ZF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"a",11),c._UZ(2,"img",12),c.qZA(),c.TgZ(3,"div",13)(4,"a",14),c._uU(5),c.qZA(),c.TgZ(6,"a",15),c._uU(7," Copy Link "),c.qZA()(),c.TgZ(8,"div",16)(9,"a",17),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().openModal(s,d)}),c.TgZ(10,"span",18),c._uU(11,"build"),c.qZA()(),c.TgZ(12,"a",19),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().deleteClip(s,d)}),c.TgZ(13,"span",18),c._uU(14,"delete"),c.qZA()()()()}if(2&n){const t=e.$implicit;c.xp6(5),c.hij(" ",t.title," ")}}let zF=(()=>{class n{constructor(t,r,s,u){this.router=t,this.route=r,this.clipService=s,this.modal=u,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new li(this.videoOrder)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.videoOrder="2"===t.sort?t.sort:"1",this.sort$.next(this.videoOrder)}),this.clipService.getUsersClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(r=>{this.clips.push(Object.assign({docID:r.id},r.data()))})})}sort(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:r}})}openModal(t,r){t.preventDefault(),this.activeClip=r,this.modal.toggleModal("editClip")}update(t){this.clips.forEach((r,s)=>{r.docID==t.docID&&(this.clips[s].title=t.title)})}deleteClip(t,r){t.preventDefault(),this.clipService.deleteClip(r),this.clips.forEach((s,u)=>{s.docID===r.docID&&this.clips.splice(u,1)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($n),c.Y36(Io),c.Y36(XA),c.Y36(a0))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3," Upload Videos "),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(u){return r.sort(u)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7),c.YNc(11,ZF,15,1,"div",8),c.qZA()(),c.TgZ(12,"app-edit",9),c.NdJ("update",function(u){return r.update(u)}),c.qZA()),2&t&&(c.xp6(5),c.Q6J("selected","1"===r.videoOrder),c.xp6(2),c.Q6J("selected","2"===r.videoOrder),c.xp6(4),c.Q6J("ngForOf",r.clips),c.xp6(1),c.Q6J("activeClip",r.activeClip))},directives:[Ya,n1,s1,Vn,qF],styles:[""]}),n})();var BI,WF=new Uint8Array(16);function KF(){if(!BI&&!(BI="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return BI(WF)}const YF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,JF=function QF(n){return"string"==typeof n&&YF.test(n)};for(var ki=[],eS=0;eS<256;++eS)ki.push((eS+256).toString(16).substr(1));const nL=function tL(n,e,t){var r=(n=n||{}).random||(n.rng||KF)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return function XF(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(ki[n[e+0]]+ki[n[e+1]]+ki[n[e+2]]+ki[n[e+3]]+"-"+ki[n[e+4]]+ki[n[e+5]]+"-"+ki[n[e+6]]+ki[n[e+7]]+"-"+ki[n[e+8]]+ki[n[e+9]]+"-"+ki[n[e+10]]+ki[n[e+11]]+ki[n[e+12]]+ki[n[e+13]]+ki[n[e+14]]+ki[n[e+15]]).toLowerCase();if(!JF(t))throw TypeError("Stringified UUID is invalid");return t}(r)};let rL=(()=>{class n{handleEvent(t){t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","app-event-locker",""]],hostBindings:function(t,r){1&t&&c.NdJ("dragover",function(u){return r.handleEvent(u)})("drop",function(u){return r.handleEvent(u)})}}),n})();const iL=function(n){return{"bg-indigo-400 border-indigo-400 border-solid":n}};function sL(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",6),c.NdJ("dragend",function(){return c.CHM(t),c.oxw().isDragover=!1})("dragover",function(){return c.CHM(t),c.oxw().isDragover=!0})("dragenter",function(){return c.CHM(t),c.oxw().isDragover=!0})("dragleave",function(){return c.CHM(t),c.oxw().isDragover=!1})("mouseleave",function(){return c.CHM(t),c.oxw().isDragover=!1})("drop",function(s){return c.CHM(t),c.oxw().storeFile(s)}),c.TgZ(2,"h5"),c._uU(3,"Drop your file here (mp4 only!)"),c.qZA()(),c.TgZ(4,"input",7),c.NdJ("change",function(s){return c.CHM(t),c.oxw().storeFile(s)}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngClass",c.VKq(1,iL,t.isDragover))}}const oL=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};function aL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",8),c.NdJ("ngSubmit",function(){return c.CHM(t),c.oxw().uploadFile()}),c.TgZ(1,"h2",9),c._uU(2,"Select a Thumbnail"),c.qZA(),c.TgZ(3,"div",10)(4,"div",11),c._UZ(5,"img",12),c.qZA(),c.TgZ(6,"div",13),c._UZ(7,"img",14),c.qZA(),c.TgZ(8,"div",13),c._UZ(9,"img",15),c.qZA()(),c.TgZ(10,"div",16)(11,"label",17),c._uU(12,"Title"),c.qZA(),c._UZ(13,"app-input",18),c.qZA(),c.TgZ(14,"div",19)(15,"button",20),c._uU(16," Publish "),c.qZA()()()}if(2&n){const t=c.oxw();c.Q6J("formGroup",t.uploadForm),c.xp6(13),c.Q6J("control",t.title),c.xp6(2),c.Q6J("disabled",t.inUploading)("ngClass",c.WLB(4,oL,t.inUploading,!t.inUploading))}}function uL(n,e){if(1&n&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"percent"),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu(c.lcZ(2,1,t.percentage))}}function lL(n,e){if(1&n&&(c.TgZ(0,"app-alert",21)(1,"p"),c._uU(2),c.qZA(),c.YNc(3,uL,3,3,"p",22),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(2),c.Oqu(t.alertMsg),c.xp6(1),c.Q6J("ngIf",t.showPercentage)}}let cL=(()=>{class n{constructor(t,r,s,u){this.storage=t,this.auth=r,this.clipsService=s,this.router=u,this.isDragover=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertMsg="Uploading. . . ",this.alertColor="blue",this.inUploading=!1,this.percentage=0,this.showPercentage=!1,this.user=null,this.title=new Da("",{validators:[Mi.required,Mi.minLength(3)]}),this.uploadForm=new fy({title:this.title},[]),r.user.subscribe(d=>this.user=d)}ngOnDestroy(){var t;null===(t=this.task)||void 0===t||t.cancel()}storeFile(t){var r,s,u,d;this.isDragover=!1,this.file=t.dataTransfer?null!==(s=null===(r=t.dataTransfer)||void 0===r?void 0:r.files.item(0))&&void 0!==s?s:null:null!==(d=null===(u=t.target.files)||void 0===u?void 0:u.item(0))&&void 0!==d?d:null,this.file&&"video/mp4"===this.file.type&&(this.title.setValue(this.file.name.replace(/\.[^/.]+$/,"")),this.nextStep=!0)}uploadFile(){var t=this;this.uploadForm.disable(),this.showAlert=!0,this.alertMsg="blue",this.alertMsg="Uploading . . .",this.inUploading=!0,this.showPercentage=!0;const r=nL(),s=`clips/${r}.mp4`;this.task=this.storage.upload(s,this.file),this.task.percentageChanges().subscribe(d=>{this.percentage=d/100});const u=this.storage.ref(s);var d;this.task.snapshotChanges().pipe(tg(),un(()=>u.getDownloadURL()),(0,Rr.b)(console.log)).subscribe({next:(d=(0,ge.Z)(function*(m){var _,b;const A={uid:null===(_=t.user)||void 0===_?void 0:_.uid,displayName:null===(b=t.user)||void 0===b?void 0:b.displayName,title:t.title.value,fileName:`${r}.mp4`,url:m,timestamp:Ja.Z.firestore.FieldValue.serverTimestamp()},k=yield t.clipsService.createClip(A);t.alertColor="green",t.alertMsg="Success!",t.showPercentage=!1,setTimeout(()=>{t.router.navigate(["clip",k.id])},1e3)}),function(_){return d.apply(this,arguments)}),error:d=>{this.uploadForm.enable(),this.showPercentage=!1,this.alertColor="red",this.alertMsg="Upload failed! Please try again",this.inUploading=!0,console.log(d)}})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(JA),c.Y36(ko),c.Y36(XA),c.Y36($n))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:8,vars:3,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[4,"ngIf","ngIfElse"],["uploadFormContainer",""],[3,"color",4,"ngIf"],["app-event-locker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["type","file",1,"mt-4",3,"change"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"border-8","cursor-pointer","border-green-400"],["src","assets/img/1.jpg"],[1,"border-8","cursor-pointer","border-transparent"],["src","assets/img/2.jpg"],["src","assets/img/3.jpg"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter a Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"]],template:function(t,r){if(1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2),c._uU(3,"Upload Video"),c.qZA(),c.YNc(4,sL,5,3,"ng-container",3),c.YNc(5,aL,17,7,"ng-template",null,4,c.W1O),c.YNc(7,lL,4,3,"app-alert",5),c.qZA()()),2&t){const s=c.MAs(6);c.xp6(4),c.Q6J("ngIf",!r.nextStep)("ngIfElse",s),c.xp6(3),c.Q6J("ngIf",r.showAlert)}},directives:[cn,rL,qr,p0,l0,py,LA,vI],pipes:[er],styles:[""]}),n})();const tS=(0,yt.U)(n=>!!n);let nS=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(s,u)=>{const d=s.data.authGuardPipe||(()=>tS);return this.auth.user.pipe((0,Hi.q)(1),d(s,u),(0,yt.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($n),c.LFG(ko))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var hL=N(9635);const nk=(0,yt.U)(n=>!!n),rk=()=>(0,hL.z)(nk,(0,yt.U)(e=>e||"/")),mL=[{path:"manage",component:zF,data:{authOnly:!0,authGuardPipe:rk},canActivate:[nS]},{path:"upload",component:cL,data:{authOnly:!0,authGuardPipe:rk},canActivate:[nS]},{path:"manage-clips",redirectTo:"manage"}];let yL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tg.forChild(mL)],Tg]}),n})(),_L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ka,yL,VA,kI]]}),n})(),vL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[JO]}),n.\u0275inj=c.cJS({providers:[],imports:[[Fa,XO,ft.hO.initializeApp(UA_firebase),vw,_N,_L,U0,VA,p1,kI,$F]]}),n})();(0,c.G48)(),Ja.Z.initializeApp(UA_firebase);let ik=!1;Ja.Z.auth().onAuthStateChanged(()=>{ik||Eu().bootstrapModule(vL).catch(n=>console.error(n)),ik=!0})},5867:(Ke,_e,N)=>{N.d(_e,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=N(9681);(0,c.registerVersion)("firebase","9.8.4","app")},127:(Ke,_e,N)=>{N.d(_e,{Z:()=>c.Z});var c=N(3942);c.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(Ke,_e,N)=>{N.r(_e);var c=N(5861),ee=N(3942),O=N(2090),se=N(9681),re=N(655),pe=N(1877),de=N(4859);const Se=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new pe.Yd("@firebase/auth");function it(y,...f){Ye.logLevel<=pe.in.ERROR&&Ye.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Me(y,...f){throw je(y,...f)}function Ie(y,...f){return je(y,...f)}function De(y,f,g){const w=Object.assign(Object.assign({},nt()),{[f]:g});return new O.LL("auth","Firebase",w).create(f,{appName:y.name})}function He(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Me(y,"argument-error"),De(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ve.create(y,...f)}function $(y,f,...g){if(!y)throw je(f,...g)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw it(f),new Error(f)}function Z(y,f){y||Ee(f)}const ie=new Map;function te(y){Z(y instanceof Function,"Expected a class definition");let f=ie.get(y);return f?(Z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ie.set(y,f),f)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Kt{constructor(f,g){this.shortDelay=f,this.longDelay=g,Z(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,f){Z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Xt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dr=new Kt(3e4,6e4);function Ht(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ot(y,f,g,w){return ss.apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*(y,f,g,w,T={}){return ti(y,T,(0,c.Z)(function*(){let R={},q={};w&&("GET"===f?q=w:R={body:JSON.stringify(w)});const ce=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Xt.fetch()(Ms(y,y.config.apiHost,g,ce),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ti(y,f,g){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},qt),f);try{const T=new ni(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw gi(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ce=R.ok?q.errorMessage:q.error.message,[Le,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw gi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Le)throw gi(y,"email-already-in-use",q);if("USER_DISABLED"===Le)throw gi(y,"user-disabled",q);const mt=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw De(y,mt,Qe);Me(y,mt)}}catch(T){if(T instanceof O.ZR)throw T;Me(y,"network-request-failed")}})).apply(this,arguments)}function Tr(y,f,g,w){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(y,f,g,w,T={}){const R=yield Ot(y,f,g,w,T);return"mfaPendingCredential"in R&&Me(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ms(y,f,g,w){const T=`${f}${g}?${w}`;return y.config.emulator?mn(y.config,T):`${y.config.apiScheme}://${T}`}class ni{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Ie(this.auth,"network-request-failed")),Dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gi(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const T=Ie(y,f,w);return T.customData._tokenResponse=g,T}function ri(){return(ri=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function fn(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function to(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Zn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Uo(){return(Uo=(0,c.Z)(function*(y,f=!1){const g=(0,O.m9)(y),w=yield g.getIdToken(f),T=ot(w);$(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:w,authTime:Zn($t(T.auth_time)),issuedAtTime:Zn($t(T.iat)),expirationTime:Zn($t(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function ot(y){var f;const[g,w,T]=y.split(".");if(void 0===g||void 0===w||void 0===T)return it("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(w);return R?JSON.parse(R):(it("Failed to decode base64 JWT payload"),null)}catch(R){return it("Caught error parsing JWT payload as JSON",null===(f=R)||void 0===f?void 0:f.toString()),null}}function dr(y,f){return si.apply(this,arguments)}function si(){return(si=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof O.ZR&&Vt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ks{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,c.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Ar{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zn(this.lastLoginAt),this.creationTime=Zn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hr(y){return ct.apply(this,arguments)}function ct(){return(ct=(0,c.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),T=yield dr(y,to(g,{idToken:w}));$(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Y(R.providerUserInfo):[],ce=Q(y.providerData,q),mt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ce?void 0:ce.length)),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new Ar(R.createdAt,R.lastLoginAt),isAnonymous:mt};Object.assign(y,ht)})).apply(this,arguments)}function V(){return(V=(0,c.Z)(function*(y){const f=(0,O.m9)(y);yield hr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Q(y,f){return[...y.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function Y(y){return y.map(f=>{var{providerId:g}=f,w=(0,re._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function we(){return(we=(0,c.Z)(function*(y,f){const g=yield ti(y,{},(0,c.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=Ms(y,T,"/v1/token",`key=${R}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Xt.fetch()(q,{method:"POST",headers:ce,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(void 0!==f.idToken,"internal-error"),$(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function bt(y){const f=ot(y);return $(f,"internal-error"),$(void 0!==f.exp,"internal-error"),$(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,c.Z)(function*(){return $(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,c.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function L(y,f){return we.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:T,expirationTime:R}=g,q=new Ue;return w&&($("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),T&&($("string"==typeof T,"internal-error",{appName:f}),q.accessToken=T),R&&($("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ue,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function et(y,f){$("string"==typeof y||void 0===y,"internal-error",{appName:f})}class It{constructor(f){var{uid:g,auth:w,stsTokenManager:T}=f,R=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ks(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Ar(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const w=yield dr(g,g.stsTokenManager.getToken(g.auth,f));return $(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function mi(y){return Uo.apply(this,arguments)}(this,f)}reload(){return function z(y){return V.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,c.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield hr(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield dr(f,function wt(y,f){return ri.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,T,R,q,ce,Le,Qe,mt;const ht=null!==(w=g.displayName)&&void 0!==w?w:void 0,En=null!==(T=g.email)&&void 0!==T?T:void 0,fi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Bu=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Ef=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,bg=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,Ka=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,ac=null!==(mt=g.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Hd,emailVerified:Ig,isAnonymous:$n,providerData:bf,stsTokenManager:If}=g;$(Hd&&If,f,"internal-error");const Cf=Ue.fromJSON(this.name,If);$("string"==typeof Hd,f,"internal-error"),et(ht,f.name),et(En,f.name),$("boolean"==typeof Ig,f,"internal-error"),$("boolean"==typeof $n,f,"internal-error"),et(fi,f.name),et(Bu,f.name),et(Ef,f.name),et(bg,f.name),et(Ka,f.name),et(ac,f.name);const Ya=new It({uid:Hd,auth:f,email:En,emailVerified:Ig,displayName:ht,isAnonymous:$n,photoURL:Bu,phoneNumber:fi,tenantId:Ef,stsTokenManager:Cf,createdAt:Ka,lastLoginAt:ac});return bf&&Array.isArray(bf)&&(Ya.providerData=bf.map(ju=>Object.assign({},ju))),bg&&(Ya._redirectEventId=bg),Ya}static _fromIdTokenResponse(f,g,w=!1){return(0,c.Z)(function*(){const T=new Ue;T.updateFromServerResponse(g);const R=new It({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield hr(R),R})()}}const Yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,w){var T=this;return(0,c.Z)(function*(){T.storage[g]=w})()}_get(g){var w=this;return(0,c.Z)(function*(){const T=w.storage[g];return void 0===T?null:T})()}_remove(g){var w=this;return(0,c.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Nt(y,f,g){return`firebase:${y}:${f}:${g}`}class An{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:T,name:R}=this.auth;this.fullUserKey=Nt(this.userKey,T.apiKey,R),this.fullPersistenceKey=Nt("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?It._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,c.Z)(function*(){if(!g.length)return new An(te(Yt),f,w);const T=(yield Promise.all(g.map(function(){var Qe=(0,c.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=T[0]||te(Yt);const q=Nt(w,f.config.apiKey,f.name);let ce=null;for(const Qe of g)try{const mt=yield Qe._get(q);if(mt){const ht=It._fromJSON(f,mt);Qe!==R&&(ce=ht),R=Qe;break}}catch(mt){}const Le=T.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ce&&(yield R._set(q,ce.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,c.Z)(function*(mt){if(mt!==R)try{yield mt._remove(q)}catch(ht){}});return function(mt){return Qe.apply(this,arguments)}}())),new An(R,f,w)):new An(R,f,w)})()}}function Rs(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Fn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(no(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(os(f))return"Blackberry";if(Ln(f))return"Webos";if(cu(f))return"Safari";if((f.includes("chrome/")||Ta(f))&&!f.includes("edge/"))return"Chrome";if(Sr(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function no(y=(0,O.z$)()){return/firefox\//i.test(y)}function cu(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ta(y=(0,O.z$)()){return/crios\//i.test(y)}function Fn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Sr(y=(0,O.z$)()){return/android/i.test(y)}function os(y=(0,O.z$)()){return/blackberry/i.test(y)}function Ln(y=(0,O.z$)()){return/webos/i.test(y)}function $r(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ns(y=(0,O.z$)()){return $r(y)||Sr(y)||Ln(y)||os(y)||/windows phone/i.test(y)||Fn(y)}function Bo(y,f=[]){let g;switch(y){case"Browser":g=Rs((0,O.z$)());break;case"Worker":g=`${Rs((0,O.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class Hr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=R=>new Promise((q,ce)=>{try{q(f(R))}catch(Le){ce(Le)}});w.onAbort=g,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){var w;if(g.auth.currentUser===f)return;const T=[];try{for(const R of g.queue)yield R(f),R.onAbort&&T.push(R.onAbort)}catch(R){T.reverse();for(const q of T)try{q()}catch(ce){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=R)||void 0===w?void 0:w.message})}})()}}class Ze{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qt(this),this.idTokenSubscription=new Qt(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var T,R;if(!w._deleted&&(w.persistenceManager=yield An.create(w,f),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(q){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var w;const T=yield g.assertedPersistence.getCurrentUser();let R=T,q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=null==R?void 0:R._redirectEventId,Qe=yield g.tryRedirectSignIn(f);(!ce||ce===Le)&&(null==Qe?void 0:Qe.user)&&(R=Qe.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ce){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return $(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){var w;try{yield hr(f)}catch(T){if("auth/network-request-failed"!==(null===(w=T)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const w=f?(0,O.m9)(f):null;return w&&$(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return f&&$(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,c.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&te(f)||g._popupRedirectResolver;$(w,g,"argument-error"),g.redirectPersistenceManager=yield An.create(g,[te(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var w,T;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return $(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,w,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function at(y){return(0,O.m9)(y)}class Qt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Oi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class yi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,g){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function _n(y,f){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:resetPassword",Ht(y,f))})).apply(this,arguments)}function Sa(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function du(y,f){return Os.apply(this,arguments)}function Os(){return(Os=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",Ht(y,f))})).apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithPassword",Ht(y,f))})).apply(this,arguments)}function Ps(y,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendOobCode",Ht(y,f))})).apply(this,arguments)}function en(y,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,c.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function xa(y,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function Pi(y,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,c.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function Kc(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function Tl(){return(Tl=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}class fr extends yi{constructor(f,g,w,T=null){super("password",w),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new fr(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new fr(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function Vn(y,f){return io.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Li(y,f){return Tl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return Sa(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Gp(y,f){return Yc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Fs(y,f){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithIdp",Ht(y,f))})).apply(this,arguments)}class as extends yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new as(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Me("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=g,R=(0,re._T)(g,["providerId","signInMethod"]);if(!w||!T)return null;const q=new as(w,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Fs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Fs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Jc(y,f){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,f))})).apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f))})).apply(this,arguments)}function ed(){return(ed=(0,c.Z)(function*(y,f){const g=yield Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f));if(g.temporaryProof)throw gi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function td(){return(td=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class jo extends yi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new jo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new jo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Al(y,f){return Ls.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Zp(y,f){return ed.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Wp(y,f){return td.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:R}=f;return w||g||T||R?new jo({verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:R}):null}}class pu{constructor(f){var g,w,T,R,q,ce;const Le=(0,O.zd)((0,O.pd)(f)),Qe=null!==(g=Le.apiKey)&&void 0!==g?g:null,mt=null!==(w=Le.oobCode)&&void 0!==w?w:null,ht=function Kh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Le.mode)&&void 0!==T?T:null);$(Qe&&mt&&ht,"argument-error"),this.apiKey=Qe,this.operation=ht,this.code=mt,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Le.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ce=Le.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const g=function Ma(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||g||f||y}(f);try{return new pu(g)}catch(w){return null}}}let rd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return fr._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const T=pu.parseLink(w);return $(T,"argument-error"),fr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class er{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class so extends er{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Vi extends so{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return $("providerId"in g&&"signInMethod"in g,"argument-error"),as._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Vi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Vi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:ce}=f;if(!w&&!T&&!g&&!R||!ce)return null;try{return new Vi(ce)._credential({idToken:g,accessToken:w,nonce:q,pendingToken:R})}catch(Le){return null}}}let $o=(()=>{class y extends so{constructor(){super("facebook.com")}static credential(g){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),id=(()=>{class y extends so{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:T}=g;if(!w&&!T)return null;try{return y.credential(w,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Yh=(()=>{class y extends so{constructor(){super("github.com")}static credential(g){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class oo extends yi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Fs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Fs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:R}=g;return w&&T&&R&&w===T?new oo(w,R):null}static _create(f,g){return new oo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends er{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return xr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return xr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=oo.fromJSON(f);return $(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return oo._create(w,g)}catch(T){return null}}}let sd=(()=>{class y extends so{constructor(){super("twitter.com")}static credential(g,w){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=g;if(!w||!T)return null;try{return y.credential(w,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mr(y,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signUp",Ht(y,f))})).apply(this,arguments)}class oi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,T=!1){return(0,c.Z)(function*(){const R=yield It._fromIdTokenResponse(f,w,T),q=Sl(w);return new oi({user:R,providerId:q,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=Sl(w);return new oi({user:f,providerId:T,_tokenResponse:w,operationType:g})})()}}function Sl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xl(){return(xl=(0,c.Z)(function*(y){var f;const g=at(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new oi({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Mr(g,{returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class qo extends O.ZR{constructor(f,g,w,T){var R;super(g.code,g.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,qo.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,T){return new qo(f,g,w,T)}}function Ml(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?qo._fromErrorAndOperation(y,R,f,w):R})}function Ui(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function tn(){return(tn=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);yield zt(!0,g,f);const{providerUserInfo:w}=yield fn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Ui(w||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ra(y,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(y,f,g=!1){const w=yield dr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return oi._forOperation(y,"link",w)})).apply(this,arguments)}function zt(y,f,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,c.Z)(function*(y,f,g){yield hr(f);const T=!1===y?"provider-already-linked":"no-such-provider";$(Ui(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function gu(y,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(y,f,g=!1){var w;const{auth:T}=y,R="reauthenticate";try{const q=yield dr(y,Ml(T,R,f,y),g);$(q.idToken,T,"internal-error");const ce=ot(q.idToken);$(ce,T,"internal-error");const{sub:Le}=ce;return $(y.uid===Le,T,"user-mismatch"),oi._forOperation(y,R,q)}catch(q){throw"auth/user-not-found"===(null===(w=q)||void 0===w?void 0:w.code)&&Me(T,"user-mismatch"),q}})).apply(this,arguments)}function tr(y,f){return kl.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(y,f,g=!1){const w="signIn",T=yield Ml(y,w,f),R=yield oi._fromIdTokenResponse(y,w,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function dn(y,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(y,f){return tr(at(y),f)})).apply(this,arguments)}function nr(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);return yield zt(!1,g,f.providerId),Ra(g,f)})).apply(this,arguments)}function us(y,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,c.Z)(function*(y,f){return gu((0,O.m9)(y),f)})).apply(this,arguments)}function _i(y,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,c.Z)(function*(y,f){return Tr(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,f))})).apply(this,arguments)}function Et(){return(Et=(0,c.Z)(function*(y,f){const g=at(y),w=yield _i(g,{token:f,returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Us{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Rl._fromServerResponse(f,g):Me(f,"internal-error")}}class Rl extends Us{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Rl(g)}}function Pa(y,f,g){var w;$((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),$(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&($(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&($(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function mu(){return(mu=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&Pa(w,T,g),yield xa(w,T)})).apply(this,arguments)}function Ol(){return(Ol=(0,c.Z)(function*(y,f,g){yield _n((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ae(){return(Ae=(0,c.Z)(function*(y,f){yield du((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Pt(y,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),w=yield _n(g,{oobCode:f}),T=w.requestType;switch($(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(w.mfaInfo,g,"internal-error");default:$(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=Us._fromServerResponse(at(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function _u(){return(_u=(0,c.Z)(function*(y,f){const{data:g}=yield Pt((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(y,f,g){const w=at(y),T=yield Mr(w,{returnSecureToken:!0,email:f,password:g}),R=yield oi._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};$(g.handleCodeInApp,w,"argument-error"),g&&Pa(w,T,g),yield Pi(w,T)})).apply(this,arguments)}function ls(){return(ls=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y),T=rd.credentialWithLink(f,g||Pe());return $(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),dn(w,T)})).apply(this,arguments)}function pr(y,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:createAuthUri",Ht(y,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(y,f){const w={identifier:f,continueUri:lt()?Pe():"http://localhost"},{signinMethods:T}=yield pr((0,O.m9)(y),w);return T||[]})).apply(this,arguments)}function Vl(){return(Vl=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Pa(g.auth,T,f);const{email:R}=yield en(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Eu(){return(Eu=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Pa(w.auth,R,g);const{email:q}=yield Kc(w.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ul(y,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Iu(){return(Iu=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,O.m9)(y),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield dr(w,Ul(w.auth,R));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const ce=w.providerData.find(({providerId:Le})=>"password"===Le);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function Cu(y,f,g){return co.apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(y,f,g){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield dr(y,Sa(w,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Ko{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class dd extends Ko{constructor(f,g,w,T){super(f,g,w),this.username=T}}class Du extends Ko{constructor(f,g){super(f,"facebook.com",g)}}class zr extends dd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Jh extends Ko{constructor(f,g){super(f,"google.com",g)}}class Bl extends dd{constructor(f,g,w){super(f,"twitter.com",g,w)}}function zn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function cd(y){var f,g;if(!y)return null;const{providerId:w}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const q=null===(g=null===(f=ot(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new Ko(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Du(R,T);case"github.com":return new zr(R,T);case"google.com":return new Jh(R,T);case"twitter.com":return new Bl(R,T,y.screenName||null);case"custom":case"anonymous":return new Ko(R,null);default:return new Ko(R,w,T)}}(g)}class cs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new cs("enroll",f)}static _fromMfaPendingCredential(f){return new cs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return cs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return cs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class fo{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=at(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(ce=>Us._fromServerResponse(w,ce));$(T.mfaPendingCredential,w,"internal-error");const q=cs._fromMfaPendingCredential(T.mfaPendingCredential);return new fo(q,R,function(){var ce=(0,c.Z)(function*(Le){const Qe=yield Le._process(w,q);delete T.mfaInfo,delete T.mfaPendingCredential;const mt=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const ht=yield oi._fromIdTokenResponse(w,g.operationType,mt);return yield w._updateCurrentUser(ht.user),ht;case"reauthenticate":return $(g.user,w,"internal-error"),oi._forOperation(g.user,g.operationType,mt);default:Me(w,"internal-error")}});return function(Le){return ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function pd(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,f))}class Yo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Us._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Yo(f)}getSession(){var f=this;return(0,c.Z)(function*(){return cs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,c.Z)(function*(){const T=f,R=yield w.getSession(),q=yield dr(w.user,T._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){var w;const T="string"==typeof f?f:f.uid,R=yield g.user.getIdToken(),q=yield dr(g.user,function po(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,f))}(g.user.auth,{idToken:R,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ce})=>ce!==T),yield g.user._updateTokensIfNecessary(q);try{yield g.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const Tu=new WeakMap,ds="__sak";class Au{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ds,"1"),this.storage.removeItem(ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const kr=(()=>{class y extends Au{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function eg(){const y=(0,O.z$)();return cu(y)||$r(y)}()&&function Xn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ns(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),R=this.localCache[w];T!==R&&g(w,R,T)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ce,Le,Qe)=>{this.notifyListeners(ce,Qe)});const T=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(T);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!w)return}const R=()=>{const ce=this.storage.getItem(T);!w&&this.localCache[T]===ce||this.notifyListeners(T,ce)},q=this.storage.getItem(T);!function Aa(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var T=()=>super._set,R=this;return(0,c.Z)(function*(){yield T().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,T=this;return(0,c.Z)(function*(){const R=yield w().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,T=this;return(0,c.Z)(function*(){yield w().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),vn=(()=>{class y extends Au{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let gd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,c.Z)(function*(){const T=g,{eventId:R,eventType:q,data:ce}=T.data,Le=w.handlersMap[q];if(!(null==Le?void 0:Le.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Qe=Array.from(Le).map(function(){var ht=(0,c.Z)(function*(En){return En(T.origin,ce)});return function(En){return ht.apply(this,arguments)}}()),mt=yield function Ua(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:mt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Qo(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class js{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var T=this;return(0,c.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ce;return new Promise((Le,Qe)=>{const mt=Qo("",20);R.port1.start();const ht=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ce={messageChannel:R,onMessage(En){const fi=En;if(fi.data.eventId===mt)switch(fi.data.status){case"ack":clearTimeout(ht),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Le(fi.data.response);break;default:clearTimeout(ht),clearTimeout(q),Qe(new Error("invalid_response"))}}},T.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),T.target.postMessage({eventType:f,eventId:mt,data:g},[R.port2])}).finally(()=>{ce&&T.removeMessageHandler(ce)})})()}}function wn(){return window}function $i(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function md(){return(md=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const $l="firebaseLocalStorageDb",Hs="firebaseLocalStorage",go="fbase_key";class mo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function rr(y,f){return y.transaction([Hs],f?"readwrite":"readonly").objectStore(Hs)}function _o(){const y=indexedDB.open($l,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Hs,{keyPath:go})}catch(T){g(T)}}),y.addEventListener("success",(0,c.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Hs)?f(w):(w.close(),yield function yo(){const y=indexedDB.deleteDatabase($l);return new mo(y).toPromise()}(),f(yield _o()))}))})}function Jo(y,f,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,c.Z)(function*(y,f,g){const w=rr(y,!0).put({[go]:f,value:g});return new mo(w).toPromise()})).apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(y,f){const g=rr(y,!1).get(f),w=yield new mo(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function vo(y,f){const g=rr(y,!0).delete(f);return new mo(g).toPromise()}const wo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield _o()),g.db})()}_withRetries(g){var w=this;return(0,c.Z)(function*(){let T=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(T++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return $i()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=gd._getInstance(function jl(){return $i()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var w,T;if(g.activeServiceWorker=yield function yt(){return md.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new js(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function yd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield _o();return yield Jo(g,ds,"1"),yield vo(g,ds),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var T=this;return(0,c.Z)(function*(){return T._withPendingWrite((0,c.Z)(function*(){return yield T._withRetries(R=>Jo(R,g,w)),T.localCache[g]=w,T.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,c.Z)(function*(){const T=yield w._withRetries(R=>function Xo(y,f){return qs.apply(this,arguments)}(R,g));return w.localCache[g]=T,T})()}_remove(g){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(T=>vo(T,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const w=yield g._withRetries(q=>{const ce=rr(q,!1).getAll();return new mo(ce).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:ce}of w)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ce)&&(g.notifyListeners(q,ce),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function jn(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,f))}function un(){return(un=(0,c.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eo(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=T=>{const R=Ie("internal-error");R.customData=T,g(R)},w.type="text/javascript",w.charset="UTF-8",function Hi(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function fs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const wi=1e12;class Mn{constructor(f){this.auth=f,this.counter=wi,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new qi(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||wi;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||wi))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var w;return null===(w=g._widgets.get(f||wi))||void 0===w||w.execute(),""})()}}class qi{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;$(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Su(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ql=fs("rcb"),pn=new Kt(3e4,6e4);class tg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(f,g=""){return $(function ea(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(wn().grecaptcha):new Promise((w,T)=>{const R=wn().setTimeout(()=>{T(Ie(f,"network-request-failed"))},pn.get());wn()[ql]=()=>{wn().clearTimeout(R),delete wn()[ql];const ce=wn().grecaptcha;if(!ce)return void T(Ie(f,"internal-error"));const Le=ce.render;ce.render=(Qe,mt)=>{const ht=Le(Qe,mt);return this.counter++,ht},this.hostLanguage=g,w(ce)},Eo(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ql,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!wn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rr{load(f){return(0,c.Z)(function*(){return new Mn(f)})()}clearedOneInstance(){}}const _d="recaptcha",zs={theme:"light",type:"image"};class vd{constructor(f,g=Object.assign({},zs),w){this.parameters=g,this.type=_d,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(w),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;$(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rr:new tg,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const q=ce=>{!ce||(f.tokenChangeListeners.delete(q),R(ce))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=wn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){$(lt()&&!$i(),f.auth,"internal-error"),yield function Zi(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Zs(y){return un.apply(this,arguments)}(f.auth);$(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=jo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ja(){return(ja=(0,c.Z)(function*(y,f,g){const w=at(y),T=yield Nr(w,f,(0,O.m9)(g));return new Zl(T,R=>dn(w,R))})).apply(this,arguments)}function wd(){return(wd=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y);yield zt(!1,w,"phone");const T=yield Nr(w.auth,f,(0,O.m9)(g));return new Zl(T,R=>nr(w,R))})).apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y),T=yield Nr(w.auth,f,(0,O.m9)(g));return new Zl(T,R=>us(w,R))})).apply(this,arguments)}function Nr(y,f,g){return $a.apply(this,arguments)}function $a(){return($a=(0,c.Z)(function*(y,f,g){var w;const T=yield g.verify();try{let R;if($("string"==typeof T,y,"argument-error"),$(g.type===_d,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return $("enroll"===q.type,y,"internal-error"),(yield pd(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{$("signin"===q.type,y,"internal-error");const ce=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return $(ce,y,"missing-multi-factor-info"),(yield jn(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Jc(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function ps(){return(ps=(0,c.Z)(function*(y,f){yield Ra((0,O.m9)(y),f)})).apply(this,arguments)}let Ws=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=at(g)}verifyPhoneNumber(g,w){return Nr(this.auth,g,(0,O.m9)(w))}static credential(g,w){return jo._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:T}=g;return w&&T?jo._fromTokenResponse(w,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function gs(y,f){return f?te(f):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class na extends yi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Fs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Fs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Fs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Mt(y){return tr(y.auth,new na(y),y.bypassAuthState)}function Ed(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),gu(g,new na(y),y.bypassAuthState)}function ra(y){return mr.apply(this,arguments)}function mr(){return(mr=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),Ra(g,new na(y),y.bypassAuthState)})).apply(this,arguments)}class Ha{constructor(f,g,w,T,R=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:R,tenantId:q,error:ce,type:Le}=f;if(ce)return void g.reject(ce);const Qe={auth:g.auth,requestUri:w,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Qe))}catch(mt){g.reject(mt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Mt;case"linkViaPopup":case"linkViaRedirect":return ra;case"reauthViaPopup":case"reauthViaRedirect":return Ed;default:Me(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ia=new Kt(2e3,1e4);function ms(){return(ms=(0,c.Z)(function*(y,f,g){const w=at(y);He(y,f,er);const T=gs(w,g);return new Id(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y);He(w.auth,f,er);const T=gs(w.auth,g);return new Id(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function zi(){return(zi=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y);He(w.auth,f,er);const T=gs(w.auth,g);return new Id(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let Id=(()=>{class y extends Ha{constructor(g,w,T,R,q){super(g,w,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const w=yield g.execute();return $(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,c.Z)(function*(){Z(1===g.filter.length,"Popup operations only handle one event");const w=Qo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ie(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ia.get())};g()}}return y.currentPopupAction=null,y})();const ir=new Map;class zl extends Ha{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let w=ir.get(g.auth._key());if(!w){try{const R=(yield function tf(y,f){return Ks.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(R)}catch(T){w=()=>Promise.reject(T)}ir.set(g.auth._key(),w)}return g.bypassAuthState||ir.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Ks(){return(Ks=(0,c.Z)(function*(y,f){const g=F(f),w=M(y);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(g));return yield w._remove(g),T})).apply(this,arguments)}function sa(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,c.Z)(function*(y,f){return M(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){ir.set(y._key(),f)}function M(y){return te(y._redirectPersistence)}function F(y){return Nt("pendingRedirect",y.config.apiKey,y.name)}function le(){return(le=(0,c.Z)(function*(y,f,g){const w=at(y);He(y,f,er);const T=gs(w,g);return yield sa(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y);He(w.auth,f,er);const T=gs(w.auth,g);yield sa(T,w.auth);const R=yield _s(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(y,f,g){const w=(0,O.m9)(y);He(w.auth,f,er);const T=gs(w.auth,g);yield zt(!1,w,f.providerId),yield sa(T,w.auth);const R=yield _s(w);return T._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function ys(){return(ys=(0,c.Z)(function*(y,f){return yield at(y)._initializationPromise,ci(y,f,!1)})).apply(this,arguments)}function ci(y,f){return di.apply(this,arguments)}function di(){return(di=(0,c.Z)(function*(y,f,g=!1){const w=at(y),T=gs(w,f),q=yield new zl(w,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function _s(y){return oa.apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(y){const f=Qo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ii{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Cd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!aa(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Ie(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vs(f))}saveEventToCache(f){this.cachedEventUids.add(vs(f)),this.lastProcessedEventTime=Date.now()}}function vs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function aa({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function nf(y){return rf.apply(this,arguments)}function rf(){return(rf=(0,c.Z)(function*(y,f={}){return Ot(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Dd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ku=/^https?/;function sf(){return(sf=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield nf(y);for(const g of f)try{if(E0(g))return}catch(w){}Me(y,"unauthorized-domain")})).apply(this,arguments)}function E0(y){const f=Pe(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===w}if(!ku.test(g))return!1;if(Dd.test(y))return w===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const rg=new Kt(3e4,6e4);function af(){const y=wn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ru=null;function bo(y){return Ru=Ru||function ig(y){return new Promise((f,g)=>{var w,T,R;function q(){af(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{af(),g(Ie(y,"network-request-failed"))},timeout:rg.get()})}if(null===(T=null===(w=wn().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=wn().gapi)||void 0===R?void 0:R.load)){const ce=fs("iframefcb");return wn()[ce]=()=>{gapi.load?q():g(Ie(y,"network-request-failed"))},Eo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Le=>g(Le))}q()}}).catch(f=>{throw Ru=null,f})}(y),Ru}const Nu=new Kt(5e3,15e3),Ou={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Io=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sg(y){const f=y.config;$(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?mn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},T=Io.get(y.config.apiHost);T&&(w.eid=T);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,O.xO)(w).slice(1)}`}function Co(){return Co=(0,c.Z)(function*(y){const f=yield bo(y),g=wn().gapi;return $(g,y,"internal-error"),f.open({where:document.body,url:sg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ou,dontclear:!0},w=>new Promise(function(){var T=(0,c.Z)(function*(R,q){yield w.restyle({setHideOnLeave:!1});const ce=Ie(y,"network-request-failed"),Le=wn().setTimeout(()=>{q(ce)},Nu.get());function Qe(){wn().clearTimeout(Le),R(w)}w.ping(Qe).then(Qe,()=>{q(ce)})});return function(R,q){return T.apply(this,arguments)}}()))}),Co.apply(this,arguments)}const Ad={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class og{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ci(y,f,g,w,T,R){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:T};if(f instanceof er){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Qe]of Object.entries(R||{}))q[Le]=Qe}if(f instanceof so){const Le=f.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(q.scopes=Le.join(","))}y.tenantId&&(q.tid=y.tenantId);const ce=q;for(const Le of Object.keys(ce))void 0===ce[Le]&&delete ce[Le];return`${function Do({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ce).slice(1)}`}const Ql="webStorageSupport";class kd extends class I0{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new kd(f)}_finalizeEnroll(f,g,w){return function Jp(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Gl(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let C0=(()=>{class y{constructor(){}static assertion(g){return kd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var lf="@firebase/auth";class lg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qa(){return window}function Wi(){return(Wi=(0,c.Z)(function*(y,f,g){var w;const{BuildInfo:T}=qa();Z(f.sessionId,"AuthEvent did not contain a session ID");const R=yield D0(f.sessionId),q={};return $r()?q.ibi=T.packageName:Sr()?q.apn=T.packageName:Me(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,Ci(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function Nd(){return(Nd=(0,c.Z)(function*(y){const{BuildInfo:f}=qa(),g={};$r()?g.iosBundleId=f.packageName:Sr()?g.androidPackageName=f.packageName:Me(y,"operation-not-supported-in-this-environment"),yield nf(y,g)})).apply(this,arguments)}function cg(){return(cg=(0,c.Z)(function*(y,f,g){const{cordova:w}=qa();let T=()=>{};try{yield new Promise((R,q)=>{let ce=null;function Le(){var ht;R();const En=null===(ht=w.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof En&&En(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Qe(){ce||(ce=window.setTimeout(()=>{q(Ie(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),Sr()&&document.addEventListener("visibilitychange",mt,!1),T=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",mt,!1),ce&&window.clearTimeout(ce)}})}finally{T()}})).apply(this,arguments)}function D0(y){return ec.apply(this,arguments)}function ec(){return(ec=(0,c.Z)(function*(y){const f=df(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function df(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function Iy(y){(0,se._registerComponent)(new de.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=w.options;return((ce,Le)=>{$(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),$(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ce.name});const Qe={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bo(y)},mt=new Ze(ce,Le,Qe);return function ue(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(mt,g),mt})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new de.wA("auth-internal",f=>{const g=at(f.getProvider("auth").getImmediate());return new lg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(lf,"0.20.4",function Rd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(lf,"0.20.4","esm2017")}("Browser");class Pd extends Ii{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Fu(y){return tc.apply(this,arguments)}function tc(){return(tc=(0,c.Z)(function*(y){const f=yield nc()._get(Lu(y));return f&&(yield nc()._remove(Lu(y))),f})).apply(this,arguments)}function hg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function nc(){return te(kr)}function Lu(y){return Nt("authEvent",y.config.apiKey,y.name)}function Kr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Za(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function ua(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function mg(y=(0,O.z$)()){return!("file:"!==ua()&&"ionic:"!==ua()&&"capacitor:"!==ua()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function pf(){try{const y=self.localStorage,f=Qo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Vd(y=(0,O.z$)()){return function Vu(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Kn(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Ud()&&(0,O.hl)()}return!1}function Ud(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function sr(){return(function gg(){return"http:"===ua()||"https:"===ua()}()||(0,O.ru)()||mg())&&!function ff(){return(0,O.b$)()||(0,O.UG)()}()&&pf()&&!Ud()}function Uu(){return mg()&&"undefined"!=typeof document}function ic(){return(ic=(0,c.Z)(function*(){return!!Uu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Yr={LOCAL:"local",NONE:"none",SESSION:"session"},la=$,mf="persistence";function za(y){return yf.apply(this,arguments)}function yf(){return(yf=(0,c.Z)(function*(y){yield y._initializationPromise;const f=Bd(),g=Nt(mf,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Bd(){var y;try{return(null===(y=function My(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Ry=$;class Ki{constructor(){this.browserResolver=te(class by{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vn,this._completeRedirectFn=ci,this._overrideRedirectResult=D}_openPopup(f,g,w,T){var R=this;return(0,c.Z)(function*(){var q;Z(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ce=Ci(f,g,w,Pe(),T);return function Yl(y,f,g,w=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Le=Object.assign(Object.assign({},Ad),{width:w.toString(),height:T.toString(),top:R,left:q}),Qe=(0,O.z$)().toLowerCase();g&&(ce=Ta(Qe)?"_blank":g),no(Qe)&&(f=f||"http://localhost",Le.scrollbars="yes");const mt=Object.entries(Le).reduce((En,[fi,Bu])=>`${En}${fi}=${Bu},`,"");if(function ro(y=(0,O.z$)()){var f;return $r(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==ce)return function vy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",ce),new og(null);const ht=window.open(f||"",ce,mt);$(ht,y,"popup-blocked");try{ht.focus()}catch(En){}return new og(ht)}(f,ce,Qo())})()}_openRedirect(f,g,w,T){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function $s(y){wn().location.href=y}(Ci(f,g,w,Pe(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(Z(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const w=yield function b0(y){return Co.apply(this,arguments)}(f),T=new Ii(f);return w.register("authEvent",R=>($(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ql,{type:Ql},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Ql];void 0!==q&&g(!!q),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Wl(y){return sf.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ns()||cu()||$r()}}),this.cordovaResolver=te(class fg{constructor(){this._redirectPersistence=vn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ci,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){const w=f._key();let T=g.eventManagers.get(w);return T||(T=new Pd(f),g.eventManagers.set(w,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,T){var R=this;return(0,c.Z)(function*(){!function Pu(y){var f,g,w,T,R,q,ce,Le,Qe,mt;const ht=qa();$("function"==typeof(null===(f=null==ht?void 0:ht.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(g=null==ht?void 0:ht.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(R=null===(T=null===(w=null==ht?void 0:ht.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(ce=null===(q=null==ht?void 0:ht.cordova)||void 0===q?void 0:q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(mt=null===(Qe=null==ht?void 0:ht.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function C(){ir.clear()}(),yield R._originValidation(f);const ce=function Fd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:hg(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(f,w,T);yield function dg(y,f){return nc()._set(Lu(y),f)}(f,ce);const Le=yield function cf(y,f,g){return Wi.apply(this,arguments)}(f,ce,g),Qe=yield function Od(y){const{cordova:f}=qa();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let T=null;w?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Wc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Le);return function To(y,f,g){return cg.apply(this,arguments)}(f,q,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Xl(y){return Nd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:T,BuildInfo:R}=qa(),q=setTimeout((0,c.Z)(function*(){yield Fu(f),g.onEvent(Za())}),500),ce=function(){var mt=(0,c.Z)(function*(ht){clearTimeout(q);const En=yield Fu(f);let fi=null;En&&(null==ht?void 0:ht.url)&&(fi=function Dy(y,f){var g,w;const T=function rc(y){const f=Kr(y),g=f.link?decodeURIComponent(f.link):void 0,w=Kr(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Kr(T).link||T||w||g||y}(f);if(T.includes("/__/auth/callback")){const R=Kr(T),q=R.firebaseError?function Ty(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(w=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Le=ce?Ie(ce):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(En,ht.url)),g.onEvent(fi||Za())});return function(En){return mt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Le=T,Qe=`${R.packageName.toLowerCase()}://`;qa().handleOpenURL=function(){var mt=(0,c.Z)(function*(ht){if(ht.toLowerCase().startsWith(Qe)&&ce({url:ht}),"function"==typeof Le)try{Le(ht)}catch(En){console.error(En)}});return function(ht){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vn,this._completeRedirectFn=ci,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,T){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,w,T)})()}_openRedirect(f,g,w,T){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,w,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Uu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ry(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function gf(){return ic.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function jd(y){return y.unwrap()}function Oy(y){return yg(y)}function yg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ws.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=id;break;case"facebook.com":w=$o;break;case"github.com":w=Yh;break;case"twitter.com":w=sd;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ce,nonce:Le}=f;return R||q||T||ce?ce?g.startsWith("saml.")?oo._create(g,ce):as._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:T,accessToken:R}):new Vi(g).credential({idToken:T,accessToken:R,rawNonce:Le}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function hi(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function $d(y,f){var g,w;const T=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new Py(y,function Un(y,f){var g;const w=(0,O.m9)(y),T=f;return $(f.customData.operationType,w,"argument-error"),$(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),fo._fromError(w,T)}(y,f));else if(T){const R=yg(f),q=f;R&&(q.credential=R,q.tenantId=T.tenantId||void 0,q.email=T.email||void 0,q.phoneNumber=T.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Oy(g),additionalUserInfo:zn(g),user:ws.getOrCreate(T)}})}function _f(y,f){return vf.apply(this,arguments)}function vf(){return(vf=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>hi(y,g.confirm(w))}})).apply(this,arguments)}class Py{constructor(f,g){this.resolver=g,this.auth=function Ny(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return hi(jd(this.auth),this.resolver.resolveSignIn(f))}}class ws{constructor(f){this._delegate=f,this.multiFactor=function Xp(y){const f=(0,O.m9)(y);return Tu.has(f)||Tu.set(f,Yo._fromUser(f)),Tu.get(f)}(f)}static getOrCreate(f){return ws.USER_MAP.has(f)||ws.USER_MAP.set(f,new ws(f)),ws.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,nr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,c.Z)(function*(){return _f(w.auth,function xu(y,f,g){return wd.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,function bd(y,f,g){return zi.apply(this,arguments)}(g._delegate,f,Ki))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield za(at(g.auth)),function kt(y,f,g){return function dt(y,f,g){return ln.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ki)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,us(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return _f(this.auth,function ef(y,f,g){return gr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return hi(this.auth,function Ei(y,f,g){return Mu.apply(this,arguments)}(this._delegate,f,Ki))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield za(at(g.auth)),function $e(y,f,g){return function Xe(y,f,g){return vt.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ki)})()}sendEmailVerification(f){return function vi(y,f){return Vl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Qh(y,f){return tn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ud(y,f){return Cu((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function ld(y,f){return Cu((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ta(y,f){return ps.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function bu(y,f){return Iu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function wu(y,f,g){return Eu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ws.USER_MAP=new WeakMap;const oc=$;let _g=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;oc(T,"invalid-api-key",{appName:g.name}),oc(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Ki:void 0;this._delegate=w.initialize({options:{persistence:Fy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ws.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Gr(y,f,g){const w=at(y);$(w._canInitEmulator,w,"emulator-config-failed"),$(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Ni(f),{host:q,port:ce}=function Sn(y){const f=Ni(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const R=T[1];return{host:R,port:Oi(w.substr(R.length+1))}}{const[R,q]=w.split(":");return{host:R,port:Oi(q)}}}(f);w.config.emulator={url:`${R}//${q}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function zo(y,f){return Ae.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Pt(this._delegate,g)}confirmPasswordReset(g,w){return function yu(y,f,g){return Ol.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var T=this;return(0,c.Z)(function*(){return hi(T._delegate,function lo(y,f,g){return ai.apply(this,arguments)}(T._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function vu(y,f){return Bs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ad(y,f){const g=pu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){oc(sr(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Wr(y,f){return ys.apply(this,arguments)}(g._delegate,Ki);return w?hi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function pg(y,f){at(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,T){const{next:R,error:q,complete:ce}=vg(g,w,T);return this._delegate.onAuthStateChanged(R,q,ce)}onIdTokenChanged(g,w,T){const{next:R,error:q,complete:ce}=vg(g,w,T);return this._delegate.onIdTokenChanged(R,q,ce)}sendSignInLinkToEmail(g,w){return function Fl(y,f,g){return Ll.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Nl(y,f,g){return mu.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,c.Z)(function*(){let T;switch(function ky(y,f){la(Object.values(Yr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?la(f!==Yr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?la(f===Yr.NONE,y,"unsupported-persistence-type"):Ud()?la(f===Yr.NONE||f===Yr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):la(f===Yr.NONE||pf(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Yr.SESSION:T=vn;break;case Yr.LOCAL:T=(yield te(wo)._isAvailable())?wo:kr;break;case Yr.NONE:T=Yt;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return hi(this._delegate,function od(y){return xl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return hi(this._delegate,dn(this._delegate,g))}signInWithCustomToken(g){return hi(this._delegate,function Zo(y,f){return Et.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return hi(this._delegate,function Pl(y,f,g){return dn((0,O.m9)(y),rd.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return hi(this._delegate,function Kp(y,f,g){return ls.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return _f(this._delegate,function kn(y,f,g){return ja.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,c.Z)(function*(){return oc(sr(),w._delegate,"operation-not-supported-in-this-environment"),hi(w._delegate,function ng(y,f,g){return ms.apply(this,arguments)}(w._delegate,g,Ki))})()}signInWithRedirect(g){var w=this;return(0,c.Z)(function*(){return oc(sr(),w._delegate,"operation-not-supported-in-this-environment"),yield za(w._delegate),function W(y,f,g){return function ne(y,f,g){return le.apply(this,arguments)}(y,f,g)}(w._delegate,g,Ki)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function an(y,f){return _u.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Yr,y})();function vg(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const T=w;return{next:q=>T(q&&ws.getOrCreate(q)),error:f,complete:g}}function Fy(y,f){const g=function sc(y,f){const g=Bd();if(!g)return[];const w=Nt(mf,y,f);switch(g.getItem(w)){case Yr.NONE:return[Yt];case Yr.LOCAL:return[wo,vn];case Yr.SESSION:return[vn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(wo)&&g.push(wo),"undefined"!=typeof window)for(const w of[kr,vn])g.includes(w)||g.push(w);return g.includes(Yt)||g.push(Yt),g}class wf{constructor(){this.providerId="phone",this._delegate=new Ws(jd(ee.Z.auth()))}static credential(f,g){return Ws.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}wf.PHONE_SIGN_IN_METHOD=Ws.PHONE_SIGN_IN_METHOD,wf.PROVIDER_ID=Ws.PROVIDER_ID;const wg=$;class T0{constructor(f,g,w=ee.Z.app()){var T;wg(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new vd(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Wa(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new _g(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:rd,FacebookAuthProvider:$o,GithubAuthProvider:Yh,GoogleAuthProvider:id,OAuthProvider:Vi,SAMLAuthProvider:xr,PhoneAuthProvider:wf,PhoneMultiFactorGenerator:C0,RecaptchaVerifier:T0,TwitterAuthProvider:sd,Auth:_g,AuthCredential:yi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.17")}(ee.Z)},9751:(Ke,_e,N)=>{N.d(_e,{y:()=>ae});var c=N(930),ee=N(727),O=N(8822),se=N(9635),re=N(2416),pe=N(576),de=N(2806);let ae=(()=>{class K{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Se=new K;return Se.source=this,Se.operator=ke,Se}subscribe(ke,Se,nt){const ve=function H(K){return K&&K instanceof c.Lv||function G(K){return K&&(0,pe.m)(K.next)&&(0,pe.m)(K.error)&&(0,pe.m)(K.complete)}(K)&&(0,ee.Nn)(K)}(ke)?ke:new c.Hp(ke,Se,nt);return(0,de.x)(()=>{const{operator:Ce,source:Ye}=this;ve.add(Ce?Ce.call(ve,Ye):Ye?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Se){ke.error(Se)}}forEach(ke,Se){return new(Se=he(Se))((nt,ve)=>{const Ce=new c.Hp({next:Ye=>{try{ke(Ye)}catch(it){ve(it),Ce.unsubscribe()}},error:ve,complete:nt});this.subscribe(Ce)})}_subscribe(ke){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(ke)}[O.L](){return this}pipe(...ke){return(0,se.U)(ke)(this)}toPromise(ke){return new(ke=he(ke))((Se,nt)=>{let ve;this.subscribe(Ce=>ve=Ce,Ce=>nt(Ce),()=>Se(ve))})}}return K.create=Ge=>new K(Ge),K})();function he(K){var Ge;return null!==(Ge=null!=K?K:re.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(Ke,_e,N)=>{N.d(_e,{x:()=>de});var c=N(9751),ee=N(727);const se=(0,N(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),pe=N(2806);let de=(()=>{class he extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new ae(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new se}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:Ge,observers:ke}=this;return K||Ge?ee.Lc:(this.currentObservers=null,ke.push(H),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(ke,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:Ge,isStopped:ke}=this;K?H.error(Ge):ke&&H.complete()}asObservable(){const H=new c.y;return H.source=this,H}}return he.create=(G,H)=>new ae(G,H),he})();class ae extends de{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,G)}error(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==K?K:ee.Lc}}},930:(Ke,_e,N)=>{N.d(_e,{Hp:()=>nt,Lv:()=>K});var c=N(576),ee=N(727),O=N(2416),se=N(7849),re=N(5032);const pe=he("C",void 0,void 0);function he(Me,Ie,De){return{kind:Me,value:Ie,error:De}}var G=N(3410),H=N(2806);class K extends ee.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ee.Nn)(Ie)&&Ie.add(this)):this.destination=it}static create(Ie,De,He){return new nt(Ie,De,He)}next(Ie){this.isStopped?Ye(function ae(Me){return he("N",Me,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Ye(function de(Me){return he("E",void 0,Me)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Ye(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function ke(Me,Ie){return Ge.call(Me,Ie)}class Se{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:De}=this;if(De.next)try{De.next(Ie)}catch(He){ve(He)}}error(Ie){const{partialObserver:De}=this;if(De.error)try{De.error(Ie)}catch(He){ve(He)}else ve(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(De){ve(De)}}}class nt extends K{constructor(Ie,De,He){let je;if(super(),(0,c.m)(Ie)||!Ie)je={next:null!=Ie?Ie:void 0,error:null!=De?De:void 0,complete:null!=He?He:void 0};else{let $;this&&O.v.useDeprecatedNextContext?($=Object.create(Ie),$.unsubscribe=()=>this.unsubscribe(),je={next:Ie.next&&ke(Ie.next,$),error:Ie.error&&ke(Ie.error,$),complete:Ie.complete&&ke(Ie.complete,$)}):je=Ie}this.destination=new Se(je)}}function ve(Me){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Me):(0,se.h)(Me)}function Ye(Me,Ie){const{onStoppedNotification:De}=O.v;De&&G.z.setTimeout(()=>De(Me,Ie))}const it={closed:!0,next:re.Z,error:function Ce(Me){throw Me},complete:re.Z}},727:(Ke,_e,N)=>{N.d(_e,{Lc:()=>pe,w0:()=>re,Nn:()=>de});var c=N(576);const O=(0,N(3888).d)(he=>function(H){he(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,Ge)=>`${Ge+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var se=N(8737);class re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const ke of H)ke.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,c.m)(K))try{K()}catch(ke){G=ke instanceof O?ke.errors:[ke]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const ke of Ge)try{ae(ke)}catch(Se){G=null!=G?G:[],Se instanceof O?G=[...G,...Se.errors]:G.push(Se)}}if(G)throw new O(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ae(G);else{if(G instanceof re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,se.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,se.P)(H,G),G instanceof re&&G._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const pe=re.EMPTY;function de(he){return he instanceof re||he&&"closed"in he&&(0,c.m)(he.remove)&&(0,c.m)(he.add)&&(0,c.m)(he.unsubscribe)}function ae(he){(0,c.m)(he)?he():he.unsubscribe()}},2416:(Ke,_e,N)=>{N.d(_e,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ke,_e,N)=>{N.d(_e,{E:()=>ee});const ee=new(N(9751).y)(re=>re.complete())},8996:(Ke,_e,N)=>{N.d(_e,{D:()=>Ie});var c=N(8421),ee=N(5363),O=N(9468),pe=N(9751),ae=N(2202),he=N(576),G=N(9672);function K(De,He){if(!De)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,G.f)(je,He,()=>{const $=De[Symbol.asyncIterator]();(0,G.f)(je,He,()=>{$.next().then(Ee=>{Ee.done?je.complete():je.next(Ee.value)})},0,!0)})})}var Ge=N(3670),ke=N(8239),Se=N(1144),nt=N(6495),ve=N(2206),Ce=N(4532),Ye=N(3260);function Ie(De,He){return He?function Me(De,He){if(null!=De){if((0,Ge.c)(De))return function se(De,He){return(0,c.Xf)(De).pipe((0,O.R)(He),(0,ee.Q)(He))}(De,He);if((0,Se.z)(De))return function de(De,He){return new pe.y(je=>{let $=0;return He.schedule(function(){$===De.length?je.complete():(je.next(De[$++]),je.closed||this.schedule())})})}(De,He);if((0,ke.t)(De))return function re(De,He){return(0,c.Xf)(De).pipe((0,O.R)(He),(0,ee.Q)(He))}(De,He);if((0,ve.D)(De))return K(De,He);if((0,nt.T)(De))return function H(De,He){return new pe.y(je=>{let $;return(0,G.f)(je,He,()=>{$=De[ae.h](),(0,G.f)(je,He,()=>{let Ee,Z;try{({value:Ee,done:Z}=$.next())}catch(ie){return void je.error(ie)}Z?je.complete():je.next(Ee)},0,!0)}),()=>(0,he.m)(null==$?void 0:$.return)&&$.return()})}(De,He);if((0,Ye.L)(De))return function it(De,He){return K((0,Ye.Q)(De),He)}(De,He)}throw(0,Ce.z)(De)}(De,He):(0,c.Xf)(De)}},8421:(Ke,_e,N)=>{N.d(_e,{Xf:()=>Ge});var c=N(655),ee=N(1144),O=N(8239),se=N(9751),re=N(3670),pe=N(2206),de=N(4532),ae=N(6495),he=N(3260),G=N(576),H=N(7849),K=N(8822);function Ge(Me){if(Me instanceof se.y)return Me;if(null!=Me){if((0,re.c)(Me))return function ke(Me){return new se.y(Ie=>{const De=Me[K.L]();if((0,G.m)(De.subscribe))return De.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function Se(Me){return new se.y(Ie=>{for(let De=0;De<Me.length&&!Ie.closed;De++)Ie.next(Me[De]);Ie.complete()})}(Me);if((0,O.t)(Me))return function nt(Me){return new se.y(Ie=>{Me.then(De=>{Ie.closed||(Ie.next(De),Ie.complete())},De=>Ie.error(De)).then(null,H.h)})}(Me);if((0,pe.D)(Me))return Ce(Me);if((0,ae.T)(Me))return function ve(Me){return new se.y(Ie=>{for(const De of Me)if(Ie.next(De),Ie.closed)return;Ie.complete()})}(Me);if((0,he.L)(Me))return function Ye(Me){return Ce((0,he.Q)(Me))}(Me)}throw(0,de.z)(Me)}function Ce(Me){return new se.y(Ie=>{(function it(Me,Ie){var De,He,je,$;return(0,c.mG)(this,void 0,void 0,function*(){try{for(De=(0,c.KL)(Me);!(He=yield De.next()).done;)if(Ie.next(He.value),Ie.closed)return}catch(Ee){je={error:Ee}}finally{try{He&&!He.done&&($=De.return)&&(yield $.call(De))}finally{if(je)throw je.error}}Ie.complete()})})(Me,Ie).catch(De=>Ie.error(De))})}},6451:(Ke,_e,N)=>{N.d(_e,{T:()=>pe});var c=N(8189),ee=N(8421),O=N(515),se=N(3269),re=N(8996);function pe(...de){const ae=(0,se.yG)(de),he=(0,se._6)(de,1/0),G=de;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,c.J)(he)((0,re.D)(G,ae)):O.E}},5403:(Ke,_e,N)=>{N.d(_e,{x:()=>ee});var c=N(930);function ee(se,re,pe,de,ae){return new O(se,re,pe,de,ae)}class O extends c.Lv{constructor(re,pe,de,ae,he,G){super(re),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=pe?function(H){try{pe(H)}catch(K){re.error(K)}}:super._next,this._error=ae?function(H){try{ae(H)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Ke,_e,N)=>{N.d(_e,{U:()=>O});var c=N(4482),ee=N(5403);function O(se,re){return(0,c.e)((pe,de)=>{let ae=0;pe.subscribe((0,ee.x)(de,he=>{de.next(se.call(re,he,ae++))}))})}},8189:(Ke,_e,N)=>{N.d(_e,{J:()=>O});var c=N(5577),ee=N(4671);function O(se=1/0){return(0,c.z)(ee.y,se)}},5577:(Ke,_e,N)=>{N.d(_e,{z:()=>ae});var c=N(4004),ee=N(8421),O=N(4482),se=N(9672),re=N(5403),de=N(576);function ae(he,G,H=1/0){return(0,de.m)(G)?ae((K,Ge)=>(0,c.U)((ke,Se)=>G(K,ke,Ge,Se))((0,ee.Xf)(he(K,Ge))),H):("number"==typeof G&&(H=G),(0,O.e)((K,Ge)=>function pe(he,G,H,K,Ge,ke,Se,nt){const ve=[];let Ce=0,Ye=0,it=!1;const Me=()=>{it&&!ve.length&&!Ce&&G.complete()},Ie=He=>Ce<K?De(He):ve.push(He),De=He=>{ke&&G.next(He),Ce++;let je=!1;(0,ee.Xf)(H(He,Ye++)).subscribe((0,re.x)(G,$=>{null==Ge||Ge($),ke?Ie($):G.next($)},()=>{je=!0},void 0,()=>{if(je)try{for(Ce--;ve.length&&Ce<K;){const $=ve.shift();Se?(0,se.f)(G,Se,()=>De($)):De($)}Me()}catch($){G.error($)}}))};return he.subscribe((0,re.x)(G,Ie,()=>{it=!0,Me()})),()=>{null==nt||nt()}}(K,Ge,he,H)))}},5363:(Ke,_e,N)=>{N.d(_e,{Q:()=>se});var c=N(9672),ee=N(4482),O=N(5403);function se(re,pe=0){return(0,ee.e)((de,ae)=>{de.subscribe((0,O.x)(ae,he=>(0,c.f)(ae,re,()=>ae.next(he),pe),()=>(0,c.f)(ae,re,()=>ae.complete(),pe),he=>(0,c.f)(ae,re,()=>ae.error(he),pe)))})}},3099:(Ke,_e,N)=>{N.d(_e,{B:()=>pe});var c=N(8996),ee=N(5698),O=N(7579),se=N(930),re=N(4482);function pe(ae={}){const{connector:he=(()=>new O.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:K=!0}=ae;return Ge=>{let ke=null,Se=null,nt=null,ve=0,Ce=!1,Ye=!1;const it=()=>{null==Se||Se.unsubscribe(),Se=null},Me=()=>{it(),ke=nt=null,Ce=Ye=!1},Ie=()=>{const De=ke;Me(),null==De||De.unsubscribe()};return(0,re.e)((De,He)=>{ve++,!Ye&&!Ce&&it();const je=nt=null!=nt?nt:he();He.add(()=>{ve--,0===ve&&!Ye&&!Ce&&(Se=de(Ie,K))}),je.subscribe(He),ke||(ke=new se.Hp({next:$=>je.next($),error:$=>{Ye=!0,it(),Se=de(Me,G,$),je.error($)},complete:()=>{Ce=!0,it(),Se=de(Me,H),je.complete()}}),(0,c.D)(De).subscribe(ke))})(Ge)}}function de(ae,he,...G){return!0===he?(ae(),null):!1===he?null:he(...G).pipe((0,ee.q)(1)).subscribe(()=>ae())}},9468:(Ke,_e,N)=>{N.d(_e,{R:()=>ee});var c=N(4482);function ee(O,se=0){return(0,c.e)((re,pe)=>{pe.add(O.schedule(()=>re.subscribe(pe),se))})}},5698:(Ke,_e,N)=>{N.d(_e,{q:()=>se});var c=N(515),ee=N(4482),O=N(5403);function se(re){return re<=0?()=>c.E:(0,ee.e)((pe,de)=>{let ae=0;pe.subscribe((0,O.x)(de,he=>{++ae<=re&&(de.next(he),re<=ae&&de.complete())}))})}},8505:(Ke,_e,N)=>{N.d(_e,{b:()=>re});var c=N(576),ee=N(4482),O=N(5403),se=N(4671);function re(pe,de,ae){const he=(0,c.m)(pe)||de||ae?{next:pe,error:de,complete:ae}:pe;return he?(0,ee.e)((G,H)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Ge=!0;G.subscribe((0,O.x)(H,ke=>{var Se;null===(Se=he.next)||void 0===Se||Se.call(he,ke),H.next(ke)},()=>{var ke;Ge=!1,null===(ke=he.complete)||void 0===ke||ke.call(he),H.complete()},ke=>{var Se;Ge=!1,null===(Se=he.error)||void 0===Se||Se.call(he,ke),H.error(ke)},()=>{var ke,Se;Ge&&(null===(ke=he.unsubscribe)||void 0===ke||ke.call(he)),null===(Se=he.finalize)||void 0===Se||Se.call(he)}))}):se.y}},4408:(Ke,_e,N)=>{N.d(_e,{o:()=>re});var c=N(727);class ee extends c.w0{constructor(de,ae){super()}schedule(de,ae=0){return this}}const O={setInterval(pe,de,...ae){const{delegate:he}=O;return(null==he?void 0:he.setInterval)?he.setInterval(pe,de,...ae):setInterval(pe,de,...ae)},clearInterval(pe){const{delegate:de}=O;return((null==de?void 0:de.clearInterval)||clearInterval)(pe)},delegate:void 0};var se=N(8737);class re extends ee{constructor(de,ae){super(de,ae),this.scheduler=de,this.work=ae,this.pending=!1}schedule(de,ae=0){if(this.closed)return this;this.state=de;const he=this.id,G=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(G,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(G,this.id,ae),this}requestAsyncId(de,ae,he=0){return O.setInterval(de.flush.bind(de,this),he)}recycleAsyncId(de,ae,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ae;O.clearInterval(ae)}execute(de,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(de,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ae){let G,he=!1;try{this.work(de)}catch(H){he=!0,G=H||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:ae}=this,{actions:he}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=de&&(this.id=this.recycleAsyncId(ae,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ke,_e,N)=>{N.d(_e,{v:()=>O});var c=N(6063);class ee{constructor(re,pe=ee.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,de){return new this.schedulerActionCtor(this,re).schedule(de,pe)}}ee.now=c.l.now;class O extends ee{constructor(re,pe=ee.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let de;this._active=!0;do{if(de=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,de){for(;re=pe.shift();)re.unsubscribe();throw de}}}},4986:(Ke,_e,N)=>{N.d(_e,{P:()=>se,z:()=>O});var c=N(4408);const O=new(N(7565).v)(c.o),se=O},6063:(Ke,_e,N)=>{N.d(_e,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Ke,_e,N)=>{N.d(_e,{z:()=>c});const c={setTimeout(ee,O,...se){const{delegate:re}=c;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,O,...se):setTimeout(ee,O,...se)},clearTimeout(ee){const{delegate:O}=c;return((null==O?void 0:O.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Ke,_e,N)=>{N.d(_e,{h:()=>ee});const ee=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ke,_e,N)=>{N.d(_e,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ke,_e,N)=>{N.d(_e,{_6:()=>pe,jO:()=>se,yG:()=>re});var c=N(576),ee=N(3532);function O(de){return de[de.length-1]}function se(de){return(0,c.m)(O(de))?de.pop():void 0}function re(de){return(0,ee.K)(O(de))?de.pop():void 0}function pe(de,ae){return"number"==typeof O(de)?de.pop():ae}},8737:(Ke,_e,N)=>{function c(ee,O){if(ee){const se=ee.indexOf(O);0<=se&&ee.splice(se,1)}}N.d(_e,{P:()=>c})},3888:(Ke,_e,N)=>{function c(ee){const se=ee(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}N.d(_e,{d:()=>c})},2806:(Ke,_e,N)=>{N.d(_e,{O:()=>se,x:()=>O});var c=N(2416);let ee=null;function O(re){if(c.v.useDeprecatedSynchronousErrorHandling){const pe=!ee;if(pe&&(ee={errorThrown:!1,error:null}),re(),pe){const{errorThrown:de,error:ae}=ee;if(ee=null,de)throw ae}}else re()}function se(re){c.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(Ke,_e,N)=>{function c(ee,O,se,re=0,pe=!1){const de=O.schedule(function(){se(),pe?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(de),!pe)return de}N.d(_e,{f:()=>c})},4671:(Ke,_e,N)=>{function c(ee){return ee}N.d(_e,{y:()=>c})},1144:(Ke,_e,N)=>{N.d(_e,{z:()=>c});const c=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Ke,_e,N)=>{N.d(_e,{D:()=>ee});var c=N(576);function ee(O){return Symbol.asyncIterator&&(0,c.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Ke,_e,N)=>{function c(ee){return"function"==typeof ee}N.d(_e,{m:()=>c})},3670:(Ke,_e,N)=>{N.d(_e,{c:()=>O});var c=N(8822),ee=N(576);function O(se){return(0,ee.m)(se[c.L])}},6495:(Ke,_e,N)=>{N.d(_e,{T:()=>O});var c=N(2202),ee=N(576);function O(se){return(0,ee.m)(null==se?void 0:se[c.h])}},8239:(Ke,_e,N)=>{N.d(_e,{t:()=>ee});var c=N(576);function ee(O){return(0,c.m)(null==O?void 0:O.then)}},3260:(Ke,_e,N)=>{N.d(_e,{L:()=>se,Q:()=>O});var c=N(655),ee=N(576);function O(re){return(0,c.FC)(this,arguments,function*(){const de=re.getReader();try{for(;;){const{value:ae,done:he}=yield(0,c.qq)(de.read());if(he)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ae)}}finally{de.releaseLock()}})}function se(re){return(0,ee.m)(null==re?void 0:re.getReader)}},3532:(Ke,_e,N)=>{N.d(_e,{K:()=>ee});var c=N(576);function ee(O){return O&&(0,c.m)(O.schedule)}},4482:(Ke,_e,N)=>{N.d(_e,{A:()=>ee,e:()=>O});var c=N(576);function ee(se){return(0,c.m)(null==se?void 0:se.lift)}function O(se){return re=>{if(ee(re))return re.lift(function(pe){try{return se(pe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ke,_e,N)=>{function c(){}N.d(_e,{Z:()=>c})},9635:(Ke,_e,N)=>{N.d(_e,{U:()=>O,z:()=>ee});var c=N(4671);function ee(...se){return O(se)}function O(se){return 0===se.length?c.y:1===se.length?se[0]:function(pe){return se.reduce((de,ae)=>ae(de),pe)}}},7849:(Ke,_e,N)=>{N.d(_e,{h:()=>O});var c=N(2416),ee=N(3410);function O(se){ee.z.setTimeout(()=>{const{onUnhandledError:re}=c.v;if(!re)throw se;re(se)})}},4532:(Ke,_e,N)=>{function c(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(_e,{z:()=>c})},655:(Ke,_e,N)=>{function se(Z,ie){var te={};for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&ie.indexOf(me)<0&&(te[me]=Z[me]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(me=Object.getOwnPropertySymbols(Z);ue<me.length;ue++)ie.indexOf(me[ue])<0&&Object.prototype.propertyIsEnumerable.call(Z,me[ue])&&(te[me[ue]]=Z[me[ue]])}return te}function ae(Z,ie,te,me){return new(te||(te=Promise))(function(Pe,lt){function jt(Kt){try{ze(me.next(Kt))}catch(mn){lt(mn)}}function Lt(Kt){try{ze(me.throw(Kt))}catch(mn){lt(mn)}}function ze(Kt){Kt.done?Pe(Kt.value):function ue(Pe){return Pe instanceof te?Pe:new te(function(lt){lt(Pe)})}(Kt.value).then(jt,Lt)}ze((me=me.apply(Z,ie||[])).next())})}function ve(Z){return this instanceof ve?(this.v=Z,this):new ve(Z)}function Ce(Z,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,me=te.apply(Z,ie||[]),Pe=[];return ue={},lt("next"),lt("throw"),lt("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function lt(Xt){me[Xt]&&(ue[Xt]=function(qt){return new Promise(function(Dr,Ht){Pe.push([Xt,qt,Dr,Ht])>1||jt(Xt,qt)})})}function jt(Xt,qt){try{!function Lt(Xt){Xt.value instanceof ve?Promise.resolve(Xt.value.v).then(ze,Kt):mn(Pe[0][2],Xt)}(me[Xt](qt))}catch(Dr){mn(Pe[0][3],Dr)}}function ze(Xt){jt("next",Xt)}function Kt(Xt){jt("throw",Xt)}function mn(Xt,qt){Xt(qt),Pe.shift(),Pe.length&&jt(Pe[0][0],Pe[0][1])}}function it(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function K(Z){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&Z[ie],me=0;if(te)return te.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&me>=Z.length&&(Z=void 0),{value:Z&&Z[me++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),te={},me("next"),me("throw"),me("return"),te[Symbol.asyncIterator]=function(){return this},te);function me(Pe){te[Pe]=Z[Pe]&&function(lt){return new Promise(function(jt,Lt){!function ue(Pe,lt,jt,Lt){Promise.resolve(Lt).then(function(ze){Pe({value:ze,done:jt})},lt)}(jt,Lt,(lt=Z[Pe](lt)).done,lt.value)})}}}N.d(_e,{FC:()=>Ce,KL:()=>it,_T:()=>se,mG:()=>ae,qq:()=>ve})},5e3:(Ke,_e,N)=>{N.d(_e,{$8M:()=>Eo,$Z:()=>$f,AFp:()=>Sv,ALo:()=>XE,AaK:()=>ae,AsE:()=>uh,BQk:()=>ya,CHM:()=>Wo,CRH:()=>Ah,CZH:()=>ba,CqO:()=>pm,DdM:()=>mv,EJc:()=>Rb,EpF:()=>Zw,F$t:()=>k_,F4k:()=>Ec,FYo:()=>jE,FiY:()=>_s,G48:()=>jb,GfV:()=>$E,Gpc:()=>H,Hsn:()=>gn,JOm:()=>R,LFG:()=>Xe,LSH:()=>Za,Lbi:()=>Lc,MAs:()=>im,NdJ:()=>eu,O4$:()=>hd,OlP:()=>pn,Oqu:()=>vm,PXZ:()=>Jm,Q6J:()=>Hf,QGY:()=>qf,Qsj:()=>dD,R0b:()=>Fo,RDi:()=>Ml,Rgc:()=>Bt,SBq:()=>lp,Sil:()=>Wm,Suo:()=>db,TTD:()=>Vi,TgZ:()=>Gf,VKq:()=>Nc,VLi:()=>bp,W1O:()=>Sh,WLB:()=>dl,X6Q:()=>$D,XFs:()=>wt,Xpm:()=>et,Y36:()=>vc,YKP:()=>Lm,YNc:()=>Vw,Yjl:()=>Ta,Yz7:()=>qt,ZZ4:()=>Ap,_Bn:()=>al,_UZ:()=>wc,_Vd:()=>ur,_c5:()=>qv,_uU:()=>oh,aQg:()=>ey,c2e:()=>kb,cJS:()=>Ht,cg1:()=>Dc,dDg:()=>Ep,deG:()=>Xh,dqk:()=>Vt,eFA:()=>ou,ekj:()=>ih,g9A:()=>gl,h0i:()=>cl,hGG:()=>nI,hij:()=>ah,iGM:()=>cb,ifc:()=>$t,ip1:()=>Zm,kL8:()=>rt,kYT:()=>Rs,kcU:()=>Yp,lG2:()=>cu,lcZ:()=>eb,n5z:()=>un,n_E:()=>On,oAB:()=>An,oxw:()=>Zf,q4F:()=>cv,qLn:()=>$d,qOj:()=>m_,qZA:()=>dm,sBO:()=>Cp,sIi:()=>or,s_b:()=>Jr,soG:()=>vp,tBr:()=>di,tb:()=>ml,tp0:()=>bi,uIk:()=>Of,vHH:()=>Se,vpe:()=>eo,wAp:()=>be,xp6:()=>Hy,ynx:()=>Ju,z2F:()=>Pv,zSh:()=>zg,zs3:()=>pa});var c=N(7579),ee=N(727),O=N(9751),se=N(6451),re=N(3099);function pe(i){for(let o in i)if(i[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function de(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const G=pe({__forward_ref__:pe});function H(i){return i.__forward_ref__=H,i.toString=function(){return ae(this())},i}function K(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(G)&&i.__forward_ref__===H}class Se extends Error{constructor(o,a){super(function nt(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ve(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ve(i)}function Ie(i,o){const a=o?` in ${o}`:"";throw new Se(-201,`No provider for ${Ce(i)} found${a}`)}function Lt(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ot(i){return ss(i,Ri)||ss(i,ni)}function ss(i,o){return i.hasOwnProperty(o)?i[o]:null}function Tr(i){return i&&(i.hasOwnProperty(Ms)||i.hasOwnProperty(gi))?i[Ms]:null}const Ri=pe({\u0275prov:pe}),Ms=pe({\u0275inj:pe}),ni=pe({ngInjectableDef:pe}),gi=pe({ngInjectorDef:pe});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let ri;function yn(i){const o=ri;return ri=i,o}function to(i,o,a){const l=Ot(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&wt.Optional?null:void 0!==o?o:void Ie(ae(i),"Injector")}function Zn(i){return{toString:i}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const ot="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,dr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=ot||"undefined"!=typeof global&&global||bt||dr,hr={},ct=[],z=pe({\u0275cmp:pe}),V=pe({\u0275dir:pe}),Q=pe({\u0275pipe:pe}),Y=pe({\u0275mod:pe}),L=pe({\u0275fac:pe}),we=pe({__NG_ELEMENT_ID__:pe});let Ue=0;function et(i){return Zn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,p=i.features,v=i.pipes;return l.id+=Ue++,l.inputs=no(i.inputs,a),l.outputs=no(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(Zt):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Yt):null,l})}function Zt(i){return Fn(i)||function Sr(i){return i[V]||null}(i)}function Yt(i){return function os(i){return i[Q]||null}(i)}const Nt={};function An(i){return Zn(()=>{const o={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Nt[i.id]=i.type),o})}function Rs(i,o){return Zn(()=>{const a=Ln(i,!0);a.declarations=o.declarations||ct,a.imports=o.imports||ct,a.exports=o.exports||ct})}function no(i,o){if(null==i)return hr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const cu=et;function Ta(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Fn(i){return i[z]||null}function Ln(i,o){const a=i[Y]||null;if(!a&&!0===o)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}function Zr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Pi(i){return Array.isArray(i)&&!0===i[1]}function fu(i){return 0!=(8&i.flags)}function Kc(i){return 2==(2&i.flags)}function Fi(i){return 1==(1&i.flags)}function Li(i){return null!==i.template}function Tl(i){return 0!=(512&i[2])}function er(i,o){return i.hasOwnProperty(L)?i[L]:null}class so{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Vi(){return $o}function $o(i){return i.type.prototype.ngOnChanges&&(i.setInput=Yh),id}function id(){const i=oo(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===hr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Yh(i,o,a,l){const h=oo(i)||function Ho(i,o){return i[ka]=o}(i,{previous:hr,current:null}),p=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[a],I=v[E];p[E]=new so(I&&I.currentValue,o,v===hr),i[l]=o}Vi.ngInherit=!0;const ka="__ngSimpleChanges__";function oo(i){return i[ka]||null}let qo;function Ml(i){qo=i}function tn(i){return!!i.listen}const Ra={createRenderer:(i,o)=>function Ui(){return void 0!==qo?qo:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function Vs(i,o){return zt(o[i])}function tr(i,o){return zt(o[i.index])}function dn(i,o){return i.data[o]}function Bi(i,o){return i[o]}function nr(i,o){const a=o[i];return Zr(a)?a:a[0]}function uo(i){return 4==(4&i[2])}function us(i){return 128==(128&i[2])}function _i(i,o){return null==o?null:i[o]}function ji(i){i[18]=0}function Zo(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Et={lFrame:Ko(null),bindingsEnabled:!0};function yu(){return Et.bindingsEnabled}function Ae(){return Et.lFrame.lView}function Pt(){return Et.lFrame.tView}function Wo(i){return Et.lFrame.contextLView=i,i[8]}function an(){let i=_u();for(;null!==i&&64===i.type;)i=i.parent;return i}function _u(){return Et.lFrame.currentTNode}function ai(i,o){const a=Et.lFrame;a.currentTNode=i,a.isParent=o}function Pl(){return Et.lFrame.isParent}function Fl(){Et.lFrame.isParent=!1}function pr(){const i=Et.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Bs(){return Et.lFrame.bindingIndex++}function vi(i){const o=Et.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Eu(i,o){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,Fa(o)}function Fa(i){Et.lFrame.currentDirectiveIndex=i}function Iu(){return Et.lFrame.currentQueryIndex}function ud(i){Et.lFrame.currentQueryIndex=i}function ld(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Cu(i,o,a){if(a&wt.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&wt.Host||(h=ld(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const l=Et.lFrame=cd();return l.currentTNode=o,l.lView=i,!0}function co(i){const o=cd(),a=i[1];Et.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function cd(){const i=Et.lFrame,o=null===i?null:i.child;return null===o?Ko(i):o}function Ko(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function dd(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Du=dd;function zr(){const i=dd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function zn(){return Et.lFrame.selectedIndex}function ho(i){Et.lFrame.selectedIndex=i}function xn(){const i=Et.lFrame;return dn(i.tView,i.selectedIndex)}function hd(){Et.lFrame.currentNamespace="svg"}function Yp(){!function fd(){Et.lFrame.currentNamespace=null}()}function La(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:x}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function cs(i,o,a){pd(i,o,3,a)}function fo(i,o,a,l){(3&i[2])===a&&pd(i,o,a,l)}function Un(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function pd(i,o,a,l){const p=null!=l?l:-1,v=o.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Jp(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function Jp(i,o,a,l){const h=a[l]<0,p=a[l+1],E=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Yo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function kr(i,o,a){const l=tn(i);let h=0;for(;h<a.length;){const p=a[h];if("number"==typeof p){if(0!==p)break;h++;const v=a[h++],E=a[h++],I=a[h++];l?i.setAttribute(o,E,I,v):o.setAttributeNS(v,E,I)}else{const v=p,E=a[++h];vn(v)?l&&i.setProperty(o,v,E):l?i.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function li(i){return 3===i||4===i||6===i}function vn(i){return 64===i.charCodeAt(0)}function Ua(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||gd(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function gd(i,o,a,l,h){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(i[p+1]=h));if(l===i[p+1])return void(i[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==h&&i.splice(p++,0,h)}function Qo(i){return-1!==i}function js(i){return 32767&i}function $s(i,o){let a=function wn(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let $i=!0;function yt(i){const o=$i;return $i=i,o}let $l=0;function Hs(i,o){const a=mo(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,go(l.data,i),go(o,null),go(l.blueprint,null));const h=rr(i,o),p=i.injectorIndex;if(Qo(h)){const v=js(h),E=$s(h,o),I=E[1].data;for(let S=0;S<8;S++)o[p+S]=E[v+S]|I[v+S]}return o[p+8]=h,p}function go(i,o){i.push(0,0,0,0,0,0,0,0,o)}function mo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function rr(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const p=h[1],v=p.type;if(l=2===v?p.declTNode:1===v?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function yo(i,o,a){!function Bn(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(we)&&(l=a[we]),null==l&&(l=a[we]=$l++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Jo(i,o,a){if(a&wt.Optional)return i;Ie(o,"NodeInjector")}function Gs(i,o,a,l){if(a&wt.Optional&&void 0===l&&(l=null),0==(a&(wt.Self|wt.Host))){const h=i[9],p=yn(void 0);try{return h?h.get(o,l,a&wt.Optional):to(o,l,a&wt.Optional)}finally{yn(p)}}return Jo(l,o,a)}function Xo(i,o,a,l=wt.Default,h){if(null!==i){const p=function wo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(we)?i[we]:void 0;return"number"==typeof o?o>=0?255&o:vo:o}(a);if("function"==typeof p){if(!Cu(o,i,l))return l&wt.Host?Jo(h,a,l):Gs(o,a,l,h);try{const v=p(l);if(null!=v||l&wt.Optional)return v;Ie(a)}finally{Du()}}else if("number"==typeof p){let v=null,E=mo(i,o),I=-1,S=l&wt.Host?o[16][6]:null;for((-1===E||l&wt.SkipSelf)&&(I=-1===E?rr(i,o):o[E+8],-1!==I&&Gl(l,!1)?(v=o[1],E=js(I),o=$s(I,o)):E=-1);-1!==E;){const x=o[1];if(jn(p,E,x.data)){const P=Hl(E,o,a,v,l,S);if(P!==qs)return P}I=o[E+8],-1!==I&&Gl(l,o[1].data[E+8]===S)&&jn(p,E,o)?(v=x,E=js(I),o=$s(I,o)):E=-1}}}return Gs(o,a,l,h)}const qs={};function vo(){return new Zs(an(),Ae())}function Hl(i,o,a,l,h,p){const v=o[1],E=v.data[i+8],x=Ba(E,v,a,null==l?Kc(E)&&$i:l!=v&&0!=(3&E.type),h&wt.Host&&p===E);return null!==x?hs(o,v,x,E):qs}function Ba(i,o,a,l,h){const p=i.providerIndexes,v=o.data,E=1048575&p,I=i.directiveStart,x=p>>20,j=h?E+x:i.directiveEnd;for(let J=l?E:E+x;J<j;J++){const ye=v[J];if(J<I&&a===ye||J>=I&&ye.type===a)return J}if(h){const J=v[I];if(J&&Li(J)&&J.type===a)return I}return null}function hs(i,o,a,l){let h=i[a];const p=o.data;if(function Tu(i){return i instanceof Yo}(h)){const v=h;v.resolving&&function Ye(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Se(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(p[a]));const E=yt(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?yn(v.injectImpl):null;Cu(i,l,wt.Default);try{h=i[a]=v.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function _y(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const v=$o(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&yn(I),yt(E),v.resolving=!1,Du()}}return h}function jn(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Gl(i,o){return!(i&wt.Self||i&wt.Host&&o)}class Zs{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Xo(this._tNode,this._lView,o,l,a)}}function un(i){return Zn(()=>{const o=i.prototype.constructor,a=o[L]||Hi(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const p=h[L]||Hi(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Hi(i){return Ge(i)?()=>{const o=Hi(K(i));return o&&o()}:er(i)}function Eo(i){return function _o(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(li(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(an(),i)}const Gi="__parameters__";function qi(i,o,a){return Zn(()=>{const l=function Mn(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const v=new h(...p);return E.annotation=v,E;function E(I,S,x){const P=I.hasOwnProperty(Gi)?I[Gi]:Object.defineProperty(I,Gi,{value:[]})[Gi];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),I}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class pn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xh=new pn("AnalyzeForEntryComponents");function gr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),gr(l,o)):o!==i&&o.push(l)}return o}function Nr(i,o){i.forEach(a=>Array.isArray(a)?Nr(a,o):o(a))}function $a(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ta(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function ps(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function mr(i,o,a){let l=ia(i,o);return l>=0?i[1|l]=a:(l=~l,function na(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ha(i,o){const a=ia(i,o);if(a>=0)return i[1|a]}function ia(i,o){return function ms(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const p=l+(h-l>>1),v=i[p<<a];if(o===v)return p<<a;v>o?h=p:l=p+1}return~(h<<a)}(i,o,1)}const Ks={},sa="__NG_DI_FLAG__",Ga="ngTempTokenPath",D=/\n/gm,F="__source",W=pe({provide:String,useValue:pe});let ne;function le(i){const o=ne;return ne=i,o}function $e(i,o=wt.Default){if(void 0===ne)throw new Se(203,"");return null===ne?to(i,void 0,o):ne.get(i,o&wt.Optional?null:void 0,o)}function Xe(i,o=wt.Default){return(function fn(){return ri}()||$e)(K(i),o)}const kt=Xe;function dt(i){const o=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Se(900,"");let h,p=wt.Default;for(let v=0;v<l.length;v++){const E=l[v],I=Wr(E);"number"==typeof I?-1===I?h=E.token:p|=I:h=E}o.push(Xe(h,p))}else o.push(Xe(l))}return o}function ln(i,o){return i[sa]=o,i.prototype[sa]=o,i}function Wr(i){return i[sa]}const di=ln(qi("Inject",i=>({token:i})),-1),_s=ln(qi("Optional"),8),bi=ln(qi("SkipSelf"),4);class Md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ci(i){return i instanceof Md?i.changingThisBreaksApplicationSecurity:i}const Iy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function Za(i){const o=function Vu(){const i=Ae();return i&&i[12]}();return o?o.sanitize(Rn.URL,i)||"":function Do(i,o){const a=function Ql(i){return i instanceof Md&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Ci(i):function Jl(i){return(i=String(i)).match(Iy)||i.match(qa)?i:"unsafe:"+i}(ve(i))}const Ud="__ngContext__";function sr(i,o){i[Ud]=o}function gf(i){const o=function Uu(i){return i[Ud]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function jd(i){return i.ngOriginalError}function Oy(i,...o){i.error(...o)}class $d{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Ny(i){return i&&i.ngErrorLogger||Oy}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&jd(o);for(;a&&jd(a);)a=jd(a);return a||null}}const wf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function ce(i,o){return undefined(i,o)}function mt(i){const o=i[3];return Pi(o)?o[3]:o}function fi(i){return Ef(i[13])}function Bu(i){return Ef(i[4])}function Ef(i){for(;null!==i&&!Pi(i);)i=i[4];return i}function Ka(i,o,a,l,h){if(null!=l){let p,v=!1;Pi(l)?p=l:Zr(l)&&(v=!0,l=l[0]);const E=zt(l);0===i&&null!==a?null==h?k0(o,a,E):Hu(o,a,E,h||null,!0):1===i&&null!==a?Hu(o,a,E,h||null,!0):2===i?function L0(i,o,a){const l=Ag(i,o);l&&function Tg(i,o,a,l){tn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,E,v):3===i&&o.destroyNode(E),null!=p&&function sS(i,o,a,l,h){const p=a[7];p!==zt(a)&&Ka(o,i,l,p,h);for(let E=10;E<a.length;E++){const I=a[E];Mg(I[1],I,i,o,l,p)}}(o,i,p,a,h)}}function $n(i,o,a){if(tn(i))return i.createElement(o,a);{const l=null!==a?function xl(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function S0(i,o){const a=i[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Zo(h,-1)),a.splice(l,1)}function Cg(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&S0(h,l),o>0&&(i[a-1][4]=l[4]);const p=ta(i,10+o);!function bf(i,o){Mg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function x0(i,o){if(!(256&o[2])){const a=o[11];tn(a)&&a.destroyNode&&Mg(i,o,a,3,null,null),function Ya(i){let o=i[13];if(!o)return Dg(i[1],i);for(;o;){let a=null;if(Zr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Zr(o)&&Dg(o[1],o),o=o[3];null===o&&(o=i),Zr(o)&&Dg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Dg(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Ly(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof Yo)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=h[p[v]],I=p[v+1];try{I.call(E)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function M0(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],E="function"==typeof v?v(o):zt(o[v]),I=l[h=a[p+2]],S=a[p+3];"boolean"==typeof S?E.removeEventListener(a[p],I,S):S>=0?l[h=S]():l[h=-S].unsubscribe(),p+=2}else{const v=l[h=a[p+1]];a[p].call(v)}if(null!==l){for(let p=h+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&tn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Pi(o[3])){a!==o[3]&&S0(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function jI(i,o,a){return function $u(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===$t.None||h===$t.Emulated)return null}return tr(l,a)}(i,o.parent,a)}function Hu(i,o,a,l,h){tn(i)?i.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function k0(i,o,a){tn(i)?i.appendChild(o,a):o.appendChild(a)}function R0(i,o,a,l,h){null!==l?Hu(i,o,a,l,h):k0(i,o,a)}function Ag(i,o){return tn(i)?i.parentNode(o):o.parentNode}function N0(i,o,a){return O0(i,o,a)}let O0=function Vy(i,o,a){return 40&i.type?tr(i,a):null};function Gd(i,o,a,l){const h=jI(i,l,o),p=o[11],E=N0(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let I=0;I<a.length;I++)R0(p,h,a[I],E,!1);else R0(p,h,a,E,!1)}function Sg(i,o){if(null!==o){const a=o.type;if(3&a)return tr(o,i);if(4&a)return xg(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Sg(i,l);{const h=i[o.index];return Pi(h)?xg(-1,h):zt(h)}}if(32&a)return ce(o,i)()||zt(i[o.index]);{const l=F0(i,o);return null!==l?Array.isArray(l)?l[0]:Sg(mt(i[16]),l):Sg(i,o.next)}}return null}function F0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function xg(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Sg(l,h)}return o[7]}function V0(i,o,a,l,h,p,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===o&&(E&&sr(zt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)V0(i,o,a.child,l,h,p,!1),Ka(o,i,h,E,p);else if(32&I){const S=ce(a,l);let x;for(;x=S();)Ka(o,i,h,x,p);Ka(o,i,h,E,p)}else 16&I?HI(i,o,l,a,h,p):Ka(o,i,h,E,p);a=v?a.projectionNext:a.next}}function Mg(i,o,a,l,h,p){V0(a,l,i.firstChild,o,h,p,!1)}function HI(i,o,a,l,h,p){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)Ka(o,i,h,I[S],p);else V0(i,o,I,v[3],h,p,!0)}function U0(i,o,a){tn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function ge(i,o,a){tn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function Df(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||i.charCodeAt(h+p)<=32)return h}a=h+1}}const B0="ng-template";function qI(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==Df(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function By(i){return 4===i.type&&i.value!==B0}function ZI(i,o,a){return o===(4!==i.type||a?i.value:B0)}function zI(i,o,a){let l=4;const h=i.attrs||[],p=function KI(i){for(let o=0;o<i.length;o++)if(li(i[o]))return o;return i.length}(h);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!ZI(i,I,a)||""===I&&1===o.length){if(Ao(l))return!1;v=!0}}else{const S=8&l?I:o[++E];if(8&l&&null!==i.attrs){if(!qI(i.attrs,S,a)){if(Ao(l))return!1;v=!0}continue}const P=WI(8&l?"class":I,h,By(i),a);if(-1===P){if(Ao(l))return!1;v=!0;continue}if(""!==S){let j;j=P>p?"":h[P+1].toLowerCase();const J=8&l?j:null;if(J&&-1!==Df(J,S,0)||2&l&&S!==j){if(Ao(l))return!1;v=!0}}}}else{if(!v&&!Ao(l)&&!Ao(I))return!1;if(v&&Ao(I))continue;v=!1,l=I|1&l}}return Ao(l)||v}function Ao(i){return 0==(1&i)}function WI(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const v=o[h];if(v===i)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function YI(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function j0(i,o,a=!1){for(let l=0;l<o.length;l++)if(zI(i,o[l],a))return!0;return!1}function QI(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let h=0;h<i.length;h++)if(i[h]!==l[h])continue e;return!0}}return!1}function jy(i,o){return i?":not("+o.trim()+")":o}function $0(i){let o=i[0],a=1,l=2,h="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const E=i[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!Ao(v)&&(o+=jy(p,h),h=""),l=v,p=p||!Ao(l);a++}return""!==h&&(o+=jy(p,h)),o}const ft={};function Hy(i){Tf(Pt(),Ae(),zn()+i,!1)}function Tf(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&cs(o,p,a)}else{const p=i.preOrderHooks;null!==p&&fo(o,p,0,a)}ho(a)}function Gy(i,o){return i<<17|o<<2}function So(i){return i>>17&32767}function G0(i){return 2|i}function Qa(i){return(131068&i)>>2}function qy(i,o){return-131069&i|o<<2}function q0(i){return 1|i}function nw(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const v=i.data[p];ud(h),v.contentQueries(2,o[p],p)}}}function qd(i,o,a,l,h,p,v,E,I,S){const x=o.blueprint.slice();return x[0]=h,x[2]=140|l,ji(x),x[3]=x[15]=i,x[8]=a,x[10]=v||i&&i[10],x[11]=E||i&&i[11],x[12]=I||i&&i[12]||null,x[9]=S||i&&i[9]||null,x[6]=p,x[16]=2==o.type?i[16]:x,x}function Zu(i,o,a,l,h){let p=i.data[o];if(null===p)p=function Pg(i,o,a,l,h){const p=_u(),v=Pl(),I=i.data[o]=function n_(i,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,o,a,l,h),function Vl(){return Et.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const v=function lo(){const i=Et.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ai(p,!0),p}function ha(i,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Af(i,o,a){co(o);try{const l=i.viewQuery;null!==l&&c_(1,l,a);const h=i.template;null!==h&&sw(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&nw(i,o),i.staticViewQueries&&c_(2,i.viewQuery,a);const p=i.components;null!==p&&function e_(i,o){for(let a=0;a<o.length;a++)_C(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,zr()}}function zu(i,o,a,l){const h=o[2];if(256!=(256&h)){co(o);try{ji(o),function vu(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&sw(i,o,a,2,l);const v=3==(3&h);if(v){const S=i.preOrderCheckHooks;null!==S&&cs(o,S,null)}else{const S=i.preOrderHooks;null!==S&&fo(o,S,0,null),Un(o,0)}if(function mS(i){for(let o=fi(i);null!==o;o=Bu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(1024&h[2])&&Zo(p,1),h[2]|=1024}}}(o),function l_(i){for(let o=fi(i);null!==o;o=Bu(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];us(l)&&zu(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&nw(i,o),v){const S=i.contentCheckHooks;null!==S&&cs(o,S)}else{const S=i.contentHooks;null!==S&&fo(o,S,1),Un(o,1)}!function oC(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)ho(~h);else{const p=h,v=a[++l],E=a[++l];Eu(v,p),E(2,o[p])}}}finally{ho(-1)}}(i,o);const E=i.components;null!==E&&function rw(i,o){for(let a=0;a<o.length;a++)yC(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&c_(2,I,l),v){const S=i.viewCheckHooks;null!==S&&cs(o,S)}else{const S=i.viewHooks;null!==S&&fo(o,S,2),Un(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Zo(o[3],-1))}finally{zr()}}}function iw(i,o,a,l){const h=o[10],v=uo(o);try{!v&&h.begin&&h.begin(),v&&Af(i,o,l),zu(i,o,a,l)}finally{!v&&h.end&&h.end()}}function sw(i,o,a,l,h){const p=zn(),v=2&l;try{ho(-1),v&&o.length>20&&Tf(i,o,20,!1),a(l,h)}finally{ho(p)}}function Fg(i,o,a){if(fu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function Lg(i,o,a){!yu()||(function Hg(i,o,a,l){const h=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Hs(a,o),sr(l,o);const v=a.initialInputs;for(let E=h;E<p;E++){const I=i.data[E],S=Li(I);S&&hw(o,a,I);const x=hs(o,i,E,a);sr(x,o),null!==v&&gS(0,E-h,x,I,0,v),S&&(nr(a.index,o)[8]=x)}}(i,o,a,tr(a,o)),128==(128&a.flags)&&function cw(i,o,a){const l=a.directiveStart,h=a.directiveEnd,v=a.index,E=function Ul(){return Et.lFrame.currentDirectiveIndex}();try{ho(v);for(let I=l;I<h;I++){const S=i.data[I],x=o[I];Fa(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&s_(S,x)}}finally{ho(-1),Fa(E)}}(i,o,a))}function Vg(i,o,a=tr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],E=-1===v?a(o,i):i[v];i[h++]=E}}}function Ug(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Bg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Bg(i,o,a,l,h,p,v,E,I,S){const x=20+l,P=x+h,j=function aC(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:ft);return a}(x,P),J="function"==typeof S?S():S;return j[1]={type:i,blueprint:j,template:a,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function $g(i,o,a,l){const h=mw(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&vC(i).push(l,h.length-1))}function r_(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function i_(i,o,a,l){let h=!1;if(yu()){const p=function o_(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];j0(a,v.selectors,!1)&&(h||(h=[]),yo(Hs(a,o),i,v.type),Li(v)?(dw(i,a),h.unshift(v)):h.push(v))}return h}(i,o,a),v=null===l?null:{"":-1};if(null!==p){h=!0,a_(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const P=p[x];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,S=ha(i,o,p.length,null);for(let x=0;x<p.length;x++){const P=p[x];a.mergedAttrs=Ua(a.mergedAttrs,P.hostAttrs),u_(i,a,o,S,P),pC(S,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const j=P.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(j.ngOnChanges||j.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),S++}!function uC(i,o){const l=o.directiveEnd,h=i.data,p=o.attrs,v=[];let E=null,I=null;for(let S=o.directiveStart;S<l;S++){const x=h[S],P=x.inputs,j=null===p||By(o)?null:gC(P,p);v.push(j),E=r_(P,S,E),I=r_(x.outputs,S,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}(i,a)}v&&function fC(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new Se(-301,!1);l.push(o[h],p)}}}(a,l,v)}return a.mergedAttrs=Ua(a.mergedAttrs,a.attrs),h}function lw(i,o,a,l,h,p){const v=p.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~o.index;(function hC(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,h,v)}}function s_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function dw(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function pC(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Li(o)&&(a[""]=i)}}function a_(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function u_(i,o,a,l,h){i.data[l]=h;const p=h.factory||(h.factory=er(h.type)),v=new Yo(p,Li(h),null);i.blueprint[l]=v,a[l]=v,lw(i,o,0,l,ha(i,a,h.hostVars,ft),h)}function hw(i,o,a){const l=tr(o,i),h=Ug(a),p=i[10],v=Zd(i,qd(i,h,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=v}function Mo(i,o,a,l,h,p){const v=tr(i,o);!function Gg(i,o,a,l,h,p,v){if(null==p)tn(i)?i.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==v?ve(p):v(p,l||"",h);tn(i)?i.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],v,p,i.value,a,l,h)}function gS(i,o,a,l,h,p){const v=p[o];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const S=v[I++],x=v[I++],P=v[I++];null!==E?l.setInput(a,P,S,x):a[x]=P}}}function gC(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function mC(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function yC(i,o){const a=nr(o,i);if(us(a)){const l=a[1];80&a[2]?zu(l,a,l.template,a[8]):a[5]>0&&qg(a)}}function qg(i){for(let l=fi(i);null!==l;l=Bu(l))for(let h=10;h<l.length;h++){const p=l[h];if(1024&p[2]){const v=p[1];zu(v,p,v.template,p[8])}else p[5]>0&&qg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=nr(a[l],i);us(h)&&h[5]>0&&qg(h)}}function _C(i,o){const a=nr(o,i),l=a[1];(function fw(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Af(l,a,a[8])}function Zd(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function zd(i){for(;i;){i[2]|=64;const o=mt(i);if(Tl(i)&&!o)return i;i=o}return null}function gw(i){!function Sf(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=gf(a),h=l[1];iw(h,l,h.template,a)}}(i[8])}function c_(i,o,a){ud(0),o(i,a)}const vS=(()=>Promise.resolve(null))();function mw(i){return i[7]||(i[7]=[])}function vC(i){return i.cleanup||(i.cleanup=[])}function EC(i,o){const a=i[9],l=a?a.get($d,null):null;l&&l.handleError(o)}function bC(i,o,a,l,h){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],I=o[v],S=i.data[v];null!==S.setInput?S.setInput(I,h,l,E):I[E]=h}}function Wu(i,o,a){const l=Vs(o,i);!function Hd(i,o,a){tn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Ja(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?h=he(h,E):2==p&&(l=he(l,E+": "+o[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}const Zg=new pn("INJECTOR",-1);class d_{get(o,a=Ks){if(a===Ks){const l=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw l.name="NullInjectorError",l}return a}}const zg=new pn("Set Injector scope."),Wd={},_w={};let ko;function vw(){return void 0===ko&&(ko=new d_),ko}function Wg(i,o=null,a=null,l){const h=ww(i,o,a,l);return h._resolveInjectorDefTypes(),h}function ww(i,o=null,a=null,l){return new DC(i,a,o||vw(),l)}class DC{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Nr(a,E=>this.processProvider(E,o,a)),Nr([o],E=>this.processInjectorType(E,[],p)),this.records.set(Zg,Je(void 0,this));const v=this.records.get(zg);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Ks,l=wt.Default){this.assertNotDestroyed();const h=le(this),p=yn(void 0);try{if(!(l&wt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function SC(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(o)&&Ot(o);E=I&&this.injectableDefInScope(I)?Je(Ew(o),Wd):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&wt.Self?vw():this.parent).get(o,a=l&wt.Optional&&a===Ks?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ga]=v[Ga]||[]).unshift(ae(o)),h)throw v;return function ys(i,o,a,l){const h=i[Ga];throw o[F]&&h.unshift(o[F]),i.message=function ci(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[Ga]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{yn(p),le(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processInjectorType(o,a,l){if(!(o=K(o)))return!1;let h=Tr(o);const p=null==h&&o.ngModule||void 0,v=void 0===p?o:p,E=-1!==l.indexOf(v);if(void 0!==p&&(h=Tr(p)),null==h)return!1;if(null!=h.imports&&!E){let x;l.push(v);try{Nr(h.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:j,providers:J}=x[P];Nr(J,ye=>this.processProvider(ye,j,J||ct))}}this.injectorDefTypes.add(v);const I=er(v)||(()=>new v);this.records.set(v,Je(I,Wd));const S=h.providers;if(null!=S&&!E){const x=o;Nr(S,P=>this.processProvider(P,x,S))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let h=Ku(o=K(o))?o:K(o&&o.provide);const p=function TC(i,o,a){return Kg(i)?Je(void 0,i.useValue):Je(fa(i),Wd)}(o);if(Ku(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Je(void 0,Wd,!0),v.factory=()=>dt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,p)}hydrate(o,a){return a.value===Wd&&(a.value=_w,a.value=a.factory()),"object"==typeof a.value&&a.value&&function h_(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ew(i){const o=Ot(i),a=null!==o?o.factory:er(i);if(null!==a)return a;if(i instanceof pn)throw new Se(204,!1);if(i instanceof Function)return function bw(i){const o=i.length;if(o>0)throw ps(o,"?"),new Se(204,!1);const a=function ti(i){const o=i&&(i[Ri]||i[ni]);if(o){const a=function cr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Se(204,!1)}function fa(i,o,a){let l;if(Ku(i)){const h=K(i);return er(h)||Ew(h)}if(Kg(i))l=()=>K(i.useValue);else if(function Yg(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...dt(i.deps||[]));else if(function St(i){return!(!i||!i.useExisting)}(i))l=()=>Xe(K(i.useExisting));else{const h=K(i&&(i.useClass||i.provide));if(!function AC(i){return!!i.deps}(i))return er(h)||Ew(h);l=()=>new h(...dt(i.deps))}return l}function Je(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Kg(i){return null!==i&&"object"==typeof i&&W in i}function Ku(i){return"function"==typeof i}let pa=(()=>{class i{static create(a,l){var h;if(Array.isArray(a))return Wg({name:""},l,a,"");{const p=null!==(h=a.name)&&void 0!==h?h:"";return Wg({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Ks,i.NULL=new d_,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>Xe(Zg)}),i.__NG_ELEMENT_ID__=-1,i})();function Rw(i,o){La(gf(i)[1],an())}function m_(i){let o=function g_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(Li(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Se(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const v=i;v.inputs=Kd(i.inputs),v.declaredInputs=Kd(i.declaredInputs),v.outputs=Kd(i.outputs);const E=h.hostBindings;E&&v_(i,E);const I=h.viewQuery,S=h.contentQueries;if(I&&y_(i,I),S&&__(i,S),de(i.inputs,h.inputs),de(i.declaredInputs,h.declaredInputs),de(i.outputs,h.outputs),Li(h)&&h.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(i),E===m_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Ow(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ua(h.hostAttrs,a=Ua(a,h.hostAttrs))}}(l)}function Kd(i){return i===hr?{}:i===ct?[]:i}function y_(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function __(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function v_(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let kf=null;function Yd(){if(!kf){const i=Vt.Symbol;if(i&&i.iterator)kf=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(kf=l)}}}return kf}function or(i){return!!cc(i)&&(Array.isArray(i)||!(i instanceof Map)&&Yd()in i)}function cc(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ga(i,o,a){return i[o]=a}function _r(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function ma(i,o,a,l){const h=_r(i,o,a);return _r(i,o+1,l)||h}function Of(i,o,a,l){const h=Ae();return _r(h,Bs(),o)&&(Pt(),Mo(xn(),h,i,o,a,l)),Of}function hc(i,o,a,l,h,p){const E=ma(i,function ui(){return Et.lFrame.bindingIndex}(),a,h);return vi(2),E?o+ve(a)+l+ve(h)+p:ft}function Vw(i,o,a,l,h,p,v,E){const I=Ae(),S=Pt(),x=i+20,P=S.firstCreatePass?function Lw(i,o,a,l,h,p,v,E,I){const S=o.consts,x=Zu(o,i,4,v||null,_i(S,E));i_(o,a,x,_i(S,I)),La(o,x);const P=x.tViews=Bg(2,x,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,S,I,o,a,l,h,p,v):S.data[x];ai(P,!1);const j=I[11].createComment("");Gd(S,I,j,P),sr(j,I),Zd(I,I[x]=mC(j,I,j,P)),Fi(P)&&Lg(S,I,P),null!=v&&Vg(I,P,E)}function im(i){return Bi(function ad(){return Et.lFrame.contextLView}(),20+i)}function vc(i,o=wt.Default){const a=Ae();return null===a?Xe(i,o):Xo(an(),a,K(i),o)}function $f(){throw new Error("invalid")}function Hf(i,o,a){const l=Ae();return _r(l,Bs(),o)&&function pi(i,o,a,l,h,p,v,E){const I=tr(o,a);let x,S=o.inputs;!E&&null!=S&&(x=S[l])?(bC(i,a,x,l,h),Kc(o)&&function lC(i,o){const a=nr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function aw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=v?v(h,o.value||"",l):h,tn(p)?p.setProperty(I,l,h):vn(l)||(I.setProperty?I.setProperty(l,h):I[l]=h))}(Pt(),xn(),l,i,o,l[11],a,!1),Hf}function cm(i,o,a,l,h){const v=h?"class":"style";bC(i,a,o.inputs[v],v,l)}function Gf(i,o,a,l){const h=Ae(),p=Pt(),v=20+i,E=h[11],I=h[v]=$n(E,o,function Qp(){return Et.lFrame.currentNamespace}()),S=p.firstCreatePass?function qw(i,o,a,l,h,p,v){const E=o.consts,S=Zu(o,i,2,h,_i(E,p));return i_(o,a,S,_i(E,v)),null!==S.attrs&&Ja(S,S.attrs,!1),null!==S.mergedAttrs&&Ja(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,p,h,0,o,a,l):p.data[v];ai(S,!0);const x=S.mergedAttrs;null!==x&&kr(E,I,x);const P=S.classes;null!==P&&ge(E,I,P);const j=S.styles;return null!==j&&U0(E,I,j),64!=(64&S.flags)&&Gd(p,h,I,S),0===function Pa(){return Et.lFrame.elementDepthCount}()&&sr(I,h),function Nl(){Et.lFrame.elementDepthCount++}(),Fi(S)&&(Lg(p,h,S),Fg(p,S,h)),null!==l&&Vg(h,S),Gf}function dm(){let i=an();Pl()?Fl():(i=i.parent,ai(i,!1));const o=i;!function mu(){Et.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(La(a,i),fu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function eg(i){return 0!=(16&i.flags)}(o)&&cm(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nn(i){return 0!=(32&i.flags)}(o)&&cm(a,o,Ae(),o.stylesWithoutHost,!1),dm}function wc(i,o,a,l){return Gf(i,o,a,l),dm(),wc}function Ju(i,o,a){const l=Ae(),h=Pt(),p=i+20,v=h.firstCreatePass?function hm(i,o,a,l,h){const p=o.consts,v=_i(p,l),E=Zu(o,i,8,"ng-container",v);return null!==v&&Ja(E,v,!0),i_(o,a,E,_i(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,l,o,a):h.data[p];ai(v,!0);const E=l[p]=l[11].createComment("");return Gd(h,l,E,v),sr(E,l),Fi(v)&&(Lg(h,l,v),Fg(h,v,l)),null!=a&&Vg(l,v),Ju}function ya(){let i=an();const o=Pt();return Pl()?Fl():(i=i.parent,ai(i,!1)),o.firstCreatePass&&(La(o,i),fu(i)&&o.queries.elementEnd(i)),ya}function Zw(){return Ae()}function qf(i){return!!i&&"function"==typeof i.then}function Ec(i){return!!i&&"function"==typeof i.subscribe}const pm=Ec;function eu(i,o,a,l){const h=Ae(),p=Pt(),v=an();return function Xu(i,o,a,l,h,p,v,E){const I=Fi(l),x=i.firstCreatePass&&vC(i),P=o[8],j=mw(o);let J=!0;if(3&l.type||E){const Be=tr(l,o),tt=E?E(Be):Be,Te=j.length,ut=E?Ut=>E(zt(Ut[l.index])):l.index;if(tn(a)){let Ut=null;if(!E&&I&&(Ut=function zC(i,o,a,l){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===a&&h[p+1]===l){const E=o[7],I=h[p+2];return E.length>I?E[I]:null}"string"==typeof v&&(p+=2)}return null}(i,o,h,l.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=p,Ut.__ngLastListenerFn__=p,J=!1;else{p=th(l,o,P,p,!1);const Jt=a.listen(tt,h,p);j.push(p,Jt),x&&x.push(h,ut,Te,Te+1)}}else p=th(l,o,P,p,!0),tt.addEventListener(h,p,v),j.push(p),x&&x.push(h,ut,Te,v)}else p=th(l,o,P,p,!1);const ye=l.outputs;let Fe;if(J&&null!==ye&&(Fe=ye[h])){const Be=Fe.length;if(Be)for(let tt=0;tt<Be;tt+=2){const Si=o[Fe[tt]][Fe[tt+1]].subscribe(p),au=j.length;j.push(p,Si),x&&x.push(h,l.index,au,-(au+1))}}}(p,h,h[11],v,i,o,!!a,l),eu}function _a(i,o,a,l){try{return!1!==a(l)}catch(h){return EC(i,h),!1}}function th(i,o,a,l,h){return function p(v){if(v===Function)return l;const E=2&i.flags?nr(i.index,o):o;0==(32&o[2])&&zd(E);let I=_a(o,0,l,v),S=p.__ngNextListenerFn__;for(;S;)I=_a(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Zf(i=1){return function Jh(i){return(Et.lFrame.contextLView=function Bl(i,o){for(;i>0;)o=o[15],i--;return o}(i,Et.lFrame.contextLView))[8]}(i)}function gm(i,o){let a=null;const l=function kg(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===l?j0(i,p,!0):QI(l,p))return h}else a=h}return a}function k_(i){const o=Ae()[16][6];if(!o.projection){const l=o.projection=ps(i?i.length:1,null),h=l.slice();let p=o.child;for(;null!==p;){const v=i?gm(p,i):0;null!==v&&(h[v]?h[v].projectionNext=p:l[v]=p,h[v]=p),p=p.next}}}function gn(i,o=0,a){const l=Ae(),h=Pt(),p=Zu(h,20+i,16,null,a||null);null===p.projection&&(p.projection=o),Fl(),64!=(64&p.flags)&&function iS(i,o,a){HI(o[11],0,o,a,jI(i,a,o),N0(a.parent||o[6],a,o))}(h,l,p)}function O_(i,o,a,l,h){const p=i[a+1],v=null===o;let E=l?So(p):Qa(p),I=!1;for(;0!==E&&(!1===I||v);){const x=i[E+1];Jw(i[E],o)&&(I=!0,i[E+1]=l?q0(x):G0(x)),E=l?So(x):Qa(x)}I&&(i[a+1]=l?G0(p):q0(p))}function Jw(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ia(i,o)>=0}function ih(i,o){return function Ti(i,o,a,l){const h=Ae(),p=Pt(),v=vi(2);p.firstUpdatePass&&function Yn(i,o,a,l){const h=i.data;if(null===h[a+1]){const p=h[zn()],v=function nE(i,o){return o>=i.expandoStartIndex}(i,a);(function _m(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!v&&(o=!1),o=function rE(i,o,a,l){const h=function bu(i){const o=Et.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=sh(a=$_(null,i,o,a,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==h)if(a=$_(h,i,o,a,l),null===p){let I=function QC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Qa(l))return i[So(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=$_(null,i,o,I[1],l),I=sh(I,o.attrs,l),function JC(i,o,a,l){i[So(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else p=function XC(i,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=sh(l,i[p].hostAttrs,a);return sh(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function Wf(i,o,a,l,h,p){let v=p?o.classBindings:o.styleBindings,E=So(v),I=Qa(v);i[l]=a;let x,S=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||ia(P,x)>0)&&(S=!0)}else x=a;if(h)if(0!==I){const j=So(i[E+1]);i[l+1]=Gy(j,E),0!==j&&(i[j+1]=qy(i[j+1],l)),i[E+1]=function aS(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=Gy(E,0),0!==E&&(i[E+1]=qy(i[E+1],l)),E=l;else i[l+1]=Gy(I,0),0===E?E=l:i[I+1]=qy(i[I+1],l),I=l;S&&(i[l+1]=G0(i[l+1])),O_(i,x,l,!0),O_(i,x,l,!1),function el(i,o,a,l,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&ia(p,o)>=0&&(a[l+1]=q0(a[l+1]))}(o,x,i,l,p),v=Gy(E,I),p?o.classBindings=v:o.styleBindings=v}(h,p,o,a,v,l)}}(p,i,v,l),o!==ft&&_r(h,v,o)&&function G_(i,o,a,l,h,p,v,E){if(!(3&o.type))return;const I=i.data,S=I[E+1];Kf(function JI(i){return 1==(1&i)}(S)?va(I,o,a,h,Qa(S),v):void 0)||(Kf(p)||function Rg(i){return 2==(2&i)}(S)&&(p=va(I,null,a,h,E,v)),function GI(i,o,a,l,h){const p=tn(i);if(o)h?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:R.DashCase;if(null==h)p?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),v|=R.Important),p?i.setStyle(a,l,h,v):a.style.setProperty(l,h,E?"important":"")}}}(l,v,Vs(zn(),a),h,p))}(p,p.data[zn()],h,h[11],i,h[v+1]=function eD(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ae(Ci(i)))),i}(o,a),l,v)}(i,o,null,!0),ih}function $_(i,o,a,l,h){let p=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(p=o[E],l=sh(l,p.hostAttrs,h),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function sh(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),mr(i,v,!!a||o[++p]))}return void 0===i?null:i}function va(i,o,a,l,h,p){const v=null===o;let E;for(;h>0;){const I=i[h],S=Array.isArray(I),x=S?I[1]:I,P=null===x;let j=a[h+1];j===ft&&(j=P?ct:void 0);let J=P?Ha(j,l):x===l?j:void 0;if(S&&!Kf(J)&&(J=Ha(I,l)),Kf(J)&&(E=J,v))return E;const ye=i[h+1];h=v?So(ye):Qa(ye)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Ha(I,l))}return E}function Kf(i){return void 0!==i}function oh(i,o=""){const a=Ae(),l=Pt(),h=i+20,p=l.firstCreatePass?Zu(l,h,1,o,null):l.data[h],v=a[h]=function ac(i,o){return tn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);Gd(l,a,v,p),ai(p,!1)}function vm(i){return ah("",i,""),vm}function ah(i,o,a){const l=Ae(),h=function dc(i,o,a,l){return _r(i,Bs(),a)?o+ve(a)+l:ft}(l,i,o,a);return h!==ft&&Wu(l,zn(),h),ah}function uh(i,o,a,l,h){const p=Ae(),v=hc(p,i,o,a,l,h);return v!==ft&&Wu(p,zn(),v),uh}const es=void 0;var nD=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function J_(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ne={};function Dc(i){const o=function fe(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ct(o);if(a)return a;const l=o.split("-")[0];if(a=Ct(l),a)return a;if("en"===l)return nD;throw new Error(`Missing locale data for the locale "${i}".`)}function rt(i){return Dc(i)[be.PluralCase]}function Ct(i){return i in Ne||(Ne[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),Ne[i]}var be=(()=>((be=be||{})[be.LocaleId=0]="LocaleId",be[be.DayPeriodsFormat=1]="DayPeriodsFormat",be[be.DayPeriodsStandalone=2]="DayPeriodsStandalone",be[be.DaysFormat=3]="DaysFormat",be[be.DaysStandalone=4]="DaysStandalone",be[be.MonthsFormat=5]="MonthsFormat",be[be.MonthsStandalone=6]="MonthsStandalone",be[be.Eras=7]="Eras",be[be.FirstDayOfWeek=8]="FirstDayOfWeek",be[be.WeekendRange=9]="WeekendRange",be[be.DateFormat=10]="DateFormat",be[be.TimeFormat=11]="TimeFormat",be[be.DateTimeFormat=12]="DateTimeFormat",be[be.NumberSymbols=13]="NumberSymbols",be[be.NumberFormats=14]="NumberFormats",be[be.CurrencyCode=15]="CurrencyCode",be[be.CurrencySymbol=16]="CurrencySymbol",be[be.CurrencyName=17]="CurrencyName",be[be.Currencies=18]="Currencies",be[be.Directionality=19]="Directionality",be[be.PluralCase=20]="PluralCase",be[be.ExtraData=21]="ExtraData",be))();const Jf="en-US";let X_=Jf;function av(i,o,a,l,h){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)av(i[p],o,a,l,h);else{const p=Pt(),v=Ae();let E=Ku(i)?i:K(i.provide),I=fa(i);const S=an(),x=1048575&S.providerIndexes,P=S.directiveStart,j=S.providerIndexes>>20;if(Ku(i)||!i.multi){const J=new Yo(I,h,vc),ye=Ir(E,o,h?x:x+j,P);-1===ye?(yo(Hs(S,v),p,E),Nm(p,i,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(J),v.push(J)):(a[ye]=J,v[ye]=J)}else{const J=Ir(E,o,x+j,P),ye=Ir(E,o,x,x+j),Fe=J>=0&&a[J],Be=ye>=0&&a[ye];if(h&&!Be||!h&&!Fe){yo(Hs(S,v),p,E);const tt=function VE(i,o,a,l,h){const p=new Yo(i,a,vc);return p.multi=[],p.index=o,p.componentProviders=0,uv(p,h,l&&!a),p}(h?hn:LE,a.length,h,l,I);!h&&Be&&(a[ye].providerFactory=tt),Nm(p,i,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(tt),v.push(tt)}else Nm(p,i,J>-1?J:ye,uv(a[h?ye:J],I,!h&&l));!h&&l&&Be&&a[ye].componentProviders++}}}function Nm(i,o,a,l){const h=Ku(o),p=function xf(i){return!!i.useClass}(o);if(h||p){const I=(p?K(o.useClass):o).prototype.ngOnDestroy;if(I){const S=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const x=S.indexOf(a);-1===x?S.push(a,[l,I]):S[x+1].push(l,I)}else S.push(a,I)}}}function uv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ir(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function LE(i,o,a,l){return lv(this.multi,[])}function hn(i,o,a,l){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=hs(a,a[1],this.providerFactory.index,l);p=E.slice(0,v),lv(h,p);for(let I=v;I<E.length;I++)p.push(E[I])}else p=[],lv(h,p);return p}function lv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function al(i,o=[]){return a=>{a.providersResolver=(l,h)=>function aD(i,o,a){const l=Pt();if(l.firstCreatePass){const h=Li(i);av(a,l.data,l.blueprint,h,!0),av(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class gh{}class UE{resolveComponentFactory(o){throw function Om(i){const o=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let ur=(()=>{class i{}return i.NULL=new UE,i})();function cD(){return mh(an(),Ae())}function mh(i,o){return new lp(tr(i,o))}let lp=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=cD,i})();function BE(i){return i instanceof lp?i.nativeElement:i}class jE{}let dD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ul(){const i=Ae(),a=nr(an().index,i);return function hD(i){return i[11]}(Zr(a)?a:i)}(),i})(),yh=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class $E{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const cv=new $E("13.3.11"),Pm={};function Js(i,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(zt(p)),Pi(p))for(let E=10;E<p.length;E++){const I=p[E],S=I[1].firstChild;null!==S&&Js(I[1],I,S,l)}const v=a.type;if(8&v)Js(i,o,a.child,l);else if(32&v){const E=ce(a,o);let I;for(;I=E();)l.push(I)}else if(16&v){const E=F0(o,a);if(Array.isArray(E))l.push(...E);else{const I=mt(o[16]);Js(I[1],I,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class _h{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Js(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Pi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Cg(o,l),ta(a,l))}this._attachedToViewContainer=!1}x0(this._lView[1],this._lView)}onDestroy(o){$g(this._lView[1],this._lView,null,o)}markForCheck(){zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function pw(i,o,a){const l=o[10];l.begin&&l.begin();try{zu(i,o,i.template,a)}catch(h){throw EC(o,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cf(i,o){Mg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Se(902,"");this._appRef=o}}class vh extends _h{constructor(o){super(o),this._view=o}detectChanges(){gw(this._view)}checkNoChanges(){}get context(){return null}}class HE extends ur{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Fn(o);return new ll(a,this.ngModule)}}function Fm(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class ll extends gh{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function $y(i){return i.map($0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Fm(this.componentDef.inputs)}get outputs(){return Fm(this.componentDef.outputs)}create(o,a,l,h){const p=(h=h||this.ngModule)?function hv(i,o){return{get:(a,l,h)=>{const p=i.get(a,Pm,h);return p!==Pm||l===Pm?p:o.get(a,l,h)}}}(o,h.injector):o,v=p.get(jE,Ra),E=p.get(yh,null),I=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=l?function jg(i,o,a){if(tn(i))return i.selectRootElement(o,a===$t.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):$n(v.createRenderer(null,this.componentDef),S,function dv(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),P=this.componentDef.onPush?576:528,j=function lc(i,o){return{components:[],scheduler:i||wf,clean:vS,playerHandler:o||null,flags:0}}(),J=Bg(0,null,null,1,0,null,null,null,null,null),ye=qd(null,J,j,P,null,null,v,I,E,p);let Fe,Be;co(ye);try{const tt=function Mw(i,o,a,l,h,p){const v=a[1];a[20]=i;const I=Zu(v,20,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(Ja(I,S,!0),null!==i&&(kr(h,i,S),null!==I.classes&&ge(h,i,I.classes),null!==I.styles&&U0(h,i,I.styles)));const x=l.createRenderer(i,o),P=qd(a,Ug(o),null,o.onPush?64:16,a[20],I,l,x,p||null,null);return v.firstCreatePass&&(yo(Hs(I,a),v,o.type),dw(v,I),a_(I,a.length,1)),Zd(a,P),a[20]=P}(x,this.componentDef,ye,v,I);if(x)if(l)kr(I,x,["ng-version",cv.full]);else{const{attrs:Te,classes:ut}=function bn(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++l]):8===h&&a.push(p);else{if(!Ao(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Te&&kr(I,x,Te),ut&&ut.length>0&&ge(I,x,ut.join(" "))}if(Be=dn(J,20),void 0!==a){const Te=Be.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const Ut=a[ut];Te.push(null!=Ut?Array.from(Ut):null)}}Fe=function kw(i,o,a,l,h){const p=a[1],v=function dC(i,o,a){const l=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),u_(i,l,o,ha(i,o,1,null),a));const h=hs(o,i,l.directiveStart,l);sr(h,o);const p=tr(l,o);return p&&sr(p,o),h}(p,a,o);if(l.components.push(v),i[8]=v,h&&h.forEach(I=>I(v,o)),o.contentQueries){const I=an();o.contentQueries(1,v,I.directiveStart)}const E=an();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ho(E.index),lw(a[1],E,0,E.directiveStart,E.directiveEnd,o),s_(o,v)),v}(tt,this.componentDef,ye,j,[Rw]),Af(J,ye,null)}finally{zr()}return new cp(this.componentType,Fe,mh(Be,ye),ye,Be)}}class cp extends class uD{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new vh(h),this.componentType=o}get injector(){return new Zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class cl{}class Lm{}const Rc=new Map;class zE extends cl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new HE(this);const l=Ln(o);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=ww(o,a,[{provide:cl,useValue:this},{provide:ur,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=pa.THROW_IF_NOT_FOUND,l=wt.Default){return o===pa||o===cl||o===Zg?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class gv extends Lm{constructor(o){super(),this.moduleType=o,null!==Ln(o)&&function ZE(i){const o=new Set;!function a(l){const h=Ln(l,!0),p=h.id;null!==p&&(function qE(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${ae(o)} vs ${ae(o.name)}`)}(p,Rc.get(p),l),Rc.set(p,l));const v=y(h.imports);for(const E of v)o.has(E)||(o.add(E),a(E))}(i)}(o)}create(o){return new zE(this.moduleType,o)}}function mv(i,o,a){const l=pr()+i,h=Ae();return h[l]===ft?ga(h,l,a?o.call(a):o()):function Nf(i,o){return i[o]}(h,l)}function Nc(i,o,a,l){return JE(Ae(),pr(),i,o,a,l)}function dl(i,o,a,l,h){return function Cn(i,o,a,l,h,p,v){const E=o+a;return ma(i,E,h,p)?ga(i,E+2,v?l.call(v,h,p):l(h,p)):hp(i,E+2)}(Ae(),pr(),i,o,a,l,h)}function hp(i,o){const a=i[o];return a===ft?void 0:a}function JE(i,o,a,l,h,p){const v=o+a;return _r(i,v,h)?ga(i,v+1,p?l.call(p,h):l(h)):hp(i,v+1)}function XE(i,o){const a=Pt();let l;const h=i+20;a.firstCreatePass?(l=function gp(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const p=l.factory||(l.factory=er(l.type)),v=yn(vc);try{const E=yt(!1),I=p();return yt(E),function VC(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Ae(),h,I),I}finally{yn(v)}}function eb(i,o,a){const l=i+20,h=Ae(),p=Bi(h,l);return function bh(i,o){return i[1].data[o].pure}(h,l)?JE(h,pr(),o,p.transform,a,p):p.transform(a)}function hl(i){return o=>{setTimeout(i,void 0,o)}}const eo=class rb extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,p,v;let E=o,I=a||(()=>null),S=l;if(o&&"object"==typeof o){const P=o;E=null===(h=P.next)||void 0===h?void 0:h.bind(P),I=null===(p=P.error)||void 0===p?void 0:p.bind(P),S=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(I=hl(I),E&&(E=hl(E)),S&&(S=hl(S)));const x=super.subscribe({next:E,error:I,complete:S});return o instanceof ee.w0&&o.add(x),x}};function mD(){return this._results[Yd()]()}class On{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Yd(),l=On.prototype;l[a]||(l[a]=mD)}get changes(){return this._changes||(this._changes=new eo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=gr(o);(this._changesDetected=!function ef(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bt=(()=>{class i{}return i.__NG_ELEMENT_ID__=fl,i})();const ib=Bt,sb=class extends ib{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=qd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Af(a,l,o),new _h(l)}};function fl(){return Vm(an(),Ae())}function Vm(i,o){return 4&i.type?new sb(o,i,mh(i,o)):null}let Jr=(()=>{class i{}return i.__NG_ELEMENT_ID__=ob,i})();function ob(){return Ih(an(),Ae())}const mp=Jr,_v=class extends mp{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return mh(this._hostTNode,this._hostLView)}get injector(){return new Zs(this._hostTNode,this._hostLView)}get parentInjector(){const o=rr(this._hostTNode,this._hostLView);if(Qo(o)){const a=$s(o,this._hostLView),l=js(o);return new Zs(a[1].data[l+8],a)}return new Zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Po(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,p){const v=o&&!function xu(i){return"function"==typeof i}(o);let E;if(v)E=a;else{const P=a||{};E=P.index,l=P.injector,h=P.projectableNodes,p=P.ngModuleRef}const I=v?o:new ll(Fn(o)),S=l||this.parentInjector;if(!p&&null==I.ngModule){const j=(v?S:this.parentInjector).get(cl,null);j&&(p=j)}const x=I.create(S,h,void 0,p);return this.insert(x.hostView,E),x}insert(o,a){const l=o._lView,h=l[1];if(function Oa(i){return Pi(i[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],j=new _v(P,P[6],P[3]);j.detach(j.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function ju(i,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],$a(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function A0(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=128}(h,l,v,p);const E=xg(p,v),I=l[11],S=Ag(I,v[7]);return null!==S&&function If(i,o,a,l,h,p){l[0]=h,l[6]=o,Mg(i,l,a,1,h,p)}(h,v[6],I,l,S,E),o.attachToViewContainerRef(),$a(Um(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Po(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Cg(this._lContainer,a);l&&(ta(Um(this._lContainer),a),x0(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Cg(this._lContainer,a);return l&&null!=ta(Um(this._lContainer),a)?new _h(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Po(i){return i[8]}function Um(i){return i[8]||(i[8]=[])}function Ih(i,o){let a;const l=o[i.index];if(Pi(l))a=l;else{let h;if(8&i.type)h=zt(l);else{const p=o[11];h=p.createComment("");const v=tr(i,o);Hu(p,Ag(p,v),h,function $I(i,o){return tn(i)?i.nextSibling(o):o.nextSibling}(p,v),!1)}o[i.index]=a=mC(l,o,h,i),Zd(o,a)}return new _v(a,i,o)}class vv{constructor(o){this.queryList=o,this.matches=null}clone(){return new vv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ch{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new Ch(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==bv(o,a).matches&&this.queries[a].setDirty()}}class Dh{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Pc{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Pc(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Th{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Th(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,ab(a,p)),this.matchTNodeWithReadOption(o,a,Ba(a,o,p,!1,!1))}else l===Bt?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ba(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===lp||h===Jr||h===Bt&&4&a.type)this.addMatch(a.index,-2);else{const p=Ba(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ab(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function lb(i,o,a,l){return-1===a?function ub(i,o){return 11&i.type?mh(i,o):4&i.type?Vm(i,o):null}(o,i):-2===a?function vD(i,o,a){return a===lp?mh(o,i):a===Bt?Vm(o,i):a===Jr?Ih(o,i):void 0}(i,o,l):hs(i,i[1],a,o)}function wv(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const S=v[I];E.push(S<0?null:lb(o,p[S],v[I+1],a.metadata.read))}h.matches=E}return h.matches}function Bm(i,o,a,l){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const v=wv(i,o,h,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(v[E/2]);else{const S=p[E+1],x=o[-I];for(let P=10;P<x.length;P++){const j=x[P];j[17]===j[3]&&Bm(j[1],j,S,l)}if(null!==x[9]){const P=x[9];for(let j=0;j<P.length;j++){const J=P[j];Bm(J[1],J,S,l)}}}}}return l}function cb(i){const o=Ae(),a=Pt(),l=Iu();ud(l+1);const h=bv(a,l);if(i.dirty&&uo(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Bm(a,o,l,[]):wv(a,o,h,l);i.reset(p,BE),i.notifyOnChanges()}return!0}return!1}function db(i,o,a,l){const h=Pt();if(h.firstCreatePass){const p=an();(function Cr(i,o,a){null===i.queries&&(i.queries=new Pc),i.queries.track(new Th(o,a))})(h,new Dh(o,a,l),p.index),function Ev(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function fb(i,o,a){const l=new On(4==(4&a));$g(i,o,l,l.destroy),null===o[19]&&(o[19]=new Ch),o[19].queries.push(new vv(l))}(h,Ae(),a)}function Ah(){return function hb(i,o){return i[19].queries[o].queryList}(Ae(),Iu())}function bv(i,o){return i.queries.getByIndex(o)}function Sh(i,o){return Vm(i,o)}function Rh(...i){}const Zm=new pn("Application Initializer");let ba=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Rh,this.reject=Rh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(qf(p))a.push(p);else if(pm(p)){const v=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Xe(Zm,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Sv=new pn("AppId",{providedIn:"root",factory:function Mb(){return`${Nh()}${Nh()}${Nh()}`}});function Nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gl=new pn("Platform Initializer"),Lc=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ml=new pn("appBootstrapListener");let kb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const vp=new pn("LocaleId",{providedIn:"root",factory:()=>kt(vp,wt.Optional|wt.SkipSelf)||function xv(){return"undefined"!=typeof $localize&&$localize.locale||Jf}()}),Rb=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Nb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Wm=(()=>{class i{compileModuleSync(a){return new gv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(Ln(a).declarations).reduce((v,E)=>{const I=Fn(E);return I&&v.push(new ll(I)),v},[]);return new Nb(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const FD=(()=>Promise.resolve(0))();function Km(i){"undefined"==typeof Zone?FD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Fo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eo(!1),this.onMicrotaskEmpty=new eo(!1),this.onStable=new eo(!1),this.onError=new eo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function LD(){let i=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Bc(i){const o=()=>{!function Uc(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ym(i),i.isCheckStableRunning=!0,Vc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ym(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,v,E)=>{try{return Ob(i),a.invokeTask(h,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Pb(i)}},onInvoke:(a,l,h,p,v,E,I)=>{try{return Ob(i),a.invoke(h,p,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),Pb(i)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Ym(i),Vc(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,VD,Rh,Rh);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const VD={};function Vc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ym(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ob(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Pb(i){i._nesting--,Vc(i)}class Mv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eo,this.onMicrotaskEmpty=new eo,this.onStable=new eo,this.onError=new eo}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let Ep=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fo.assertNotInAngularZone(),Km(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Km(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Xe(Fo))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),UD=(()=>{class i{constructor(){this._applications=new Map,Ph.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Ph.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Fb{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function bp(i){Ph=i}let Ph=new Fb,Lo=null;const kv=new pn("AllowMultipleToken"),Rv=new pn("PlatformOnDestroy");class Jm{constructor(o,a){this.name=o,this.token=a}}function ou(i,o,a=[]){const l=`Platform: ${o}`,h=new pn(l);return(p=[])=>{let v=Nv();if(!v||v.injector.get(kv,!1)){const E=[...a,...p,{provide:h,useValue:!0}];i?i(E):function Lb(i){if(Lo&&!Lo.get(kv,!1))throw new Se(400,"");Lo=i;const o=i.get(jc),a=i.get(gl,null);a&&a.forEach(l=>l())}(function Vb(i=[],o){return pa.create({name:o,providers:[{provide:zg,useValue:"platform"},{provide:Rv,useValue:()=>Lo=null},...i]})}(E,l))}return function Fh(i){const o=Nv();if(!o)throw new Se(401,"");return o}()}}function Nv(){var i;return null!==(i=null==Lo?void 0:Lo.get(jc))&&void 0!==i?i:null}let jc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Ub(i,o){let a;return a="noop"===i?new Mv:("zone.js"===i?void 0:i)||new Fo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Fo,useValue:E}];return E.run(()=>{const S=pa.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(S),P=x.injector.get($d,null);if(!P)throw new Se(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:J=>{P.handleError(J)}});x.onDestroy(()=>{Fv(this._modules,x),j.unsubscribe()})}),function yl(i,o,a){try{const l=a();return qf(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const j=x.injector.get(ba);return j.runInitializers(),j.donePromise.then(()=>(function iD(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(X_=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(vp,Jf)||Jf),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const h=Ov({},l);return function ts(i,o,a){const l=new gv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(Pv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Se(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Rv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Xe(pa))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ov(i,o){return Array.isArray(o)?o.reduce(Ov,i):Object.assign(Object.assign({},i),o)}let Pv=(()=>{class i{constructor(a,l,h,p){this._zone=a,this._injector=l,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Fo.assertNotInAngularZone(),Km(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Fo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(v,E.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Se(405,"");let h;h=a instanceof gh?a:this._injector.get(ur).resolveComponentFactory(a),this.componentTypes.push(h.componentType);const p=function Qm(i){return i.isBoundToModule}(h)?void 0:this._injector.get(cl),E=h.create(pa.NULL,[],l||h.selector,p),I=E.location.nativeElement,S=E.injector.get(Ep,null),x=S&&E.injector.get(UD);return S&&x&&x.registerApplication(I,S),E.onDestroy(()=>{this.detachView(E.hostView),Fv(this.components,E),x&&x.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Se(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Fv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ml,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Xe(Fo),Xe(pa),Xe($d),Xe(ba))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Fv(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let Ip=!0,Lv=!1;function $D(){return Lv=!0,Ip}function jb(){if(Lv)throw new Error("Cannot enable prod mode after platform setup.");Ip=!1}let Cp=(()=>{class i{}return i.__NG_ELEMENT_ID__=$b,i})();function $b(i){return function Hb(i,o,a){if(Kc(i)&&!a){const l=nr(i.index,o);return new _h(l,l)}return 47&i.type?new _h(o[16],o):null}(an(),Ae(),16==(16&i))}class Yb{constructor(){}supports(o){return or(o)}create(o){return new Jb(o)}}const Qb=(i,o)=>o;class Jb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Qb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<Xb(l,h,p)?a:l,E=Xb(v,h,p),I=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{p||(p=[]);const S=E-h,x=I-h;if(S!=x){for(let j=0;j<S;j++){const J=j<p.length?p[j]:p[j]=0,ye=J+j;x<=ye&&ye<S&&(p[j]=J+1)}p[v.previousIndex]=x-S}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!or(o))throw new Se(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),l=!0),a=a._next}else h=0,function LC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Yd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new Bv(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new jv),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Bv{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class jv{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new WD,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xb(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class $v{constructor(){}supports(o){return o instanceof Map||cc(o)}create(){return new KD}}class KD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||cc(o)))throw new Se(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const l=new Uh(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Uh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $c(){return new Ap([new Yb])}let Ap=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$c()),deps:[[i,new bi,new _s]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Se(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:$c}),i})();function Gv(){return new ey([new $v])}let ey=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Gv()),deps:[[i,new bi,new _s]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Se(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Gv}),i})();const qv=ou(null,"core",[]);let nI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Xe(Pv))},i.\u0275mod=An({type:i}),i.\u0275inj=Ht({}),i})()},3942:(Ke,_e,N)=>{N.d(_e,{Z:()=>Se});var c=N(2090),ee=N(4859),O=N(9681),se=N(1877);class re{constructor(ve,Ce){this._delegate=ve,this.firebase=Ce,(0,O._addComponent)(ve,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ve,Ce=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(ve);return!it.isInitialized()&&"EXPLICIT"===(null===(Ye=it.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&it.initialize(),it.getImmediate({identifier:Ce})}_removeServiceInstance(ve,Ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(Ce)}_addComponent(ve){(0,O._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,O._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const nt=function ae(nt){const ve={},Ce={__esModule:!0,initializeApp:function Me(je,$={}){const Ee=O.initializeApp(je,$);if((0,c.r3)(ve,Ee.name))return ve[Ee.name];const Z=new nt(Ee,Ce);return ve[Ee.name]=Z,Z},app:it,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function De(je){const $=je.name,Ee=$.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const Z=(ie=it())=>{if("function"!=typeof ie[Ee])throw de.create("invalid-app-argument",{appName:$});return ie[Ee]()};void 0!==je.serviceProps&&(0,c.ZB)(Z,je.serviceProps),Ce[Ee]=Z,nt.prototype[Ee]=function(...ie){return this._getService.bind(this,$).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?Ce[Ee]:null},removeApp:function Ye(je){delete ve[je]},useAsService:function He(je,$){return"serverAuth"===$?null:$},modularAPIs:O}};function it(je){if(!(0,c.r3)(ve,je=je||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return ve[je]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ie(){return Object.keys(ve).map(je=>ve[je])}}),it.App=nt,Ce}(re);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ve(Ce){(0,c.ZB)(nt,Ce)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),nt}(),H=new se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=G;!function ke(nt){(0,O.registerVersion)("@firebase/app-compat","0.1.28",nt)}()},9681:(Ke,_e,N)=>{N.r(_e),N.d(_e,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ri,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>qt,_apps:()=>Kt,_clearComponents:()=>ss,_components:()=>mn,_getProvider:()=>Ht,_registerComponent:()=>Dr,_removeServiceInstance:()=>Ot,deleteApp:()=>wt,getApp:()=>ni,getApps:()=>gi,initializeApp:()=>Ms,onLog:()=>yn,registerVersion:()=>fn,setLogLevel:()=>to});var c=N(5861),ee=N(4859),O=N(1877),se=N(2090),re=N(8766);class pe{constructor(L){this.container=L}getPlatformInfoString(){return this.container.getProviders().map(we=>{if(function de(Y){const L=Y.getComponent();return"VERSION"===(null==L?void 0:L.type)}(we)){const Ue=we.getImmediate();return`${Ue.library}/${Ue.version}`}return null}).filter(we=>we).join(" ")}}const ae="@firebase/app",G=new O.Yd("@firebase/app"),Lt="[DEFAULT]",ze={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Kt=new Map,mn=new Map;function Xt(Y,L){try{Y.container.addComponent(L)}catch(we){G.debug(`Component ${L.name} failed to register with FirebaseApp ${Y.name}`,we)}}function qt(Y,L){Y.container.addOrOverwriteComponent(L)}function Dr(Y){const L=Y.name;if(mn.has(L))return G.debug(`There were multiple attempts to register component ${L}.`),!1;mn.set(L,Y);for(const we of Kt.values())Xt(we,Y);return!0}function Ht(Y,L){const we=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return we&&we.triggerHeartbeat(),Y.container.getProvider(L)}function Ot(Y,L,we=Lt){Ht(Y,L).clearInstance(we)}function ss(){mn.clear()}const cr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Tr{constructor(L,we,Ue){this._isDeleted=!1,this._options=Object.assign({},L),this._config=Object.assign({},we),this._name=we.name,this._automaticDataCollectionEnabled=we.automaticDataCollectionEnabled,this._container=Ue,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(L){this.checkDestroyed(),this._automaticDataCollectionEnabled=L}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(L){this._isDeleted=L}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const Ri="9.8.4";function Ms(Y,L={}){"object"!=typeof L&&(L={name:L});const we=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},L),Ue=we.name;if("string"!=typeof Ue||!Ue)throw cr.create("bad-app-name",{appName:String(Ue)});const et=Kt.get(Ue);if(et){if((0,se.vZ)(Y,et.options)&&(0,se.vZ)(we,et.config))return et;throw cr.create("duplicate-app",{appName:Ue})}const It=new ee.H0(Ue);for(const Yt of mn.values())It.addComponent(Yt);const Zt=new Tr(Y,we,It);return Kt.set(Ue,Zt),Zt}function ni(Y=Lt){const L=Kt.get(Y);if(!L)throw cr.create("no-app",{appName:Y});return L}function gi(){return Array.from(Kt.values())}function wt(Y){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(Y){const L=Y.name;Kt.has(L)&&(Kt.delete(L),yield Promise.all(Y.container.getProviders().map(we=>we.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function fn(Y,L,we){var Ue;let et=null!==(Ue=ze[Y])&&void 0!==Ue?Ue:Y;we&&(et+=`-${we}`);const It=et.match(/\s|\//),Zt=L.match(/\s|\//);if(It||Zt){const Yt=[`Unable to register library "${et}" with version "${L}":`];return It&&Yt.push(`library name "${et}" contains illegal characters (whitespace or "/")`),It&&Zt&&Yt.push("and"),Zt&&Yt.push(`version name "${L}" contains illegal characters (whitespace or "/")`),void G.warn(Yt.join(" "))}Dr(new ee.wA(`${et}-version`,()=>({library:et,version:L}),"VERSION"))}function yn(Y,L){if(null!==Y&&"function"!=typeof Y)throw cr.create("invalid-log-argument");(0,O.Am)(Y,L)}function to(Y){(0,O.Ub)(Y)}const Tn="firebase-heartbeat-store";let mi=null;function Uo(){return mi||(mi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Y,L)=>{0===L&&Y.createObjectStore(Tn)}}).catch(Y=>{throw cr.create("storage-open",{originalErrorMessage:Y.message})})),mi}function ot(){return(ot=(0,c.Z)(function*(Y){var L;try{return(yield Uo()).transaction(Tn).objectStore(Tn).get(si(Y))}catch(we){throw cr.create("storage-get",{originalErrorMessage:null===(L=we)||void 0===L?void 0:L.message})}})).apply(this,arguments)}function bt(Y,L){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(Y,L){var we;try{const et=(yield Uo()).transaction(Tn,"readwrite");return yield et.objectStore(Tn).put(L,si(Y)),et.done}catch(Ue){throw cr.create("storage-set",{originalErrorMessage:null===(we=Ue)||void 0===we?void 0:we.message})}})).apply(this,arguments)}function si(Y){return`${Y.name}!${Y.options.appId}`}class Ar{constructor(L){this.container=L,this._heartbeatsCache=null;const we=this.container.getProvider("app").getImmediate();this._storage=new z(we),this._heartbeatsCachePromise=this._storage.read().then(Ue=>(this._heartbeatsCache=Ue,Ue))}triggerHeartbeat(){var L=this;return(0,c.Z)(function*(){const Ue=L.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),et=hr();if(null===L._heartbeatsCache&&(L._heartbeatsCache=yield L._heartbeatsCachePromise),L._heartbeatsCache.lastSentHeartbeatDate!==et&&!L._heartbeatsCache.heartbeats.some(It=>It.date===et))return L._heartbeatsCache.heartbeats.push({date:et,agent:Ue}),L._heartbeatsCache.heartbeats=L._heartbeatsCache.heartbeats.filter(It=>{const Zt=new Date(It.date).valueOf();return Date.now()-Zt<=2592e6}),L._storage.overwrite(L._heartbeatsCache)})()}getHeartbeatsHeader(){var L=this;return(0,c.Z)(function*(){if(null===L._heartbeatsCache&&(yield L._heartbeatsCachePromise),null===L._heartbeatsCache||0===L._heartbeatsCache.heartbeats.length)return"";const we=hr(),{heartbeatsToSend:Ue,unsentEntries:et}=function ct(Y,L=1024){const we=[];let Ue=Y.slice();for(const et of Y){const It=we.find(Zt=>Zt.agent===et.agent);if(It){if(It.dates.push(et.date),V(we)>L){It.dates.pop();break}}else if(we.push({agent:et.agent,dates:[et.date]}),V(we)>L){we.pop();break}Ue=Ue.slice(1)}return{heartbeatsToSend:we,unsentEntries:Ue}}(L._heartbeatsCache.heartbeats),It=(0,se.L)(JSON.stringify({version:2,heartbeats:Ue}));return L._heartbeatsCache.lastSentHeartbeatDate=we,et.length>0?(L._heartbeatsCache.heartbeats=et,yield L._storage.overwrite(L._heartbeatsCache)):(L._heartbeatsCache.heartbeats=[],L._storage.overwrite(L._heartbeatsCache)),It})()}}function hr(){return(new Date).toISOString().substring(0,10)}class z{constructor(L){this.app=L,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var L=this;return(0,c.Z)(function*(){return(yield L._canUseIndexedDBPromise)&&(yield function $t(Y){return ot.apply(this,arguments)}(L.app))||{heartbeats:[]}})()}overwrite(L){var we=this;return(0,c.Z)(function*(){var Ue;if(yield we._canUseIndexedDBPromise){const It=yield we.read();return bt(we.app,{lastSentHeartbeatDate:null!==(Ue=L.lastSentHeartbeatDate)&&void 0!==Ue?Ue:It.lastSentHeartbeatDate,heartbeats:L.heartbeats})}})()}add(L){var we=this;return(0,c.Z)(function*(){var Ue;if(yield we._canUseIndexedDBPromise){const It=yield we.read();return bt(we.app,{lastSentHeartbeatDate:null!==(Ue=L.lastSentHeartbeatDate)&&void 0!==Ue?Ue:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...L.heartbeats]})}})()}}function V(Y){return(0,se.L)(JSON.stringify({version:2,heartbeats:Y})).length}!function Q(Y){Dr(new ee.wA("platform-logger",L=>new pe(L),"PRIVATE")),Dr(new ee.wA("heartbeat",L=>new Ar(L),"PRIVATE")),fn(ae,"0.7.27",Y),fn(ae,"0.7.27","esm2017"),fn("fire-js","")}("")},4859:(Ke,_e,N)=>{N.d(_e,{H0:()=>ae,wA:()=>O});var c=N(5861),ee=N(2090);class O{constructor(G,H,K){this.name=G,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const se="[DEFAULT]";class re{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const K=new ee.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:H});Ge&&K.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const K=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Ge=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(ke){if(Ge)return null;throw ke}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:se})}catch(H){}for(const[H,K]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(H);try{const ke=this.getOrInitializeService({instanceIdentifier:Ge});K.resolve(ke)}catch(ke){}}}}clearInstance(G=se){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=se){return this.instances.has(G)}getOptions(G=se){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,K=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[ke,Se]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(ke)&&Se.resolve(Ge);return Ge}onInit(G,H){var K;const Ge=this.normalizeInstanceIdentifier(H),ke=null!==(K=this.onInitCallbacks.get(Ge))&&void 0!==K?K:new Set;ke.add(G),this.onInitCallbacks.set(Ge,ke);const Se=this.instances.get(Ge);return Se&&G(Se,Ge),()=>{ke.delete(G)}}invokeOnInitCallbacks(G,H){const K=this.onInitCallbacks.get(H);if(K)for(const Ge of K)try{Ge(G,H)}catch(ke){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let K=this.instances.get(G);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===se?void 0:he),options:H}),this.instances.set(G,K),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(K,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,K)}catch(Ge){}var he;return K||null}normalizeInstanceIdentifier(G=se){return this.component?this.component.multipleInstances?G:se:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new re(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Ke,_e,N)=>{N.d(_e,{Am:()=>he,Ub:()=>ae,Yd:()=>de,in:()=>ee});const c=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const O={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},se=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},pe=(G,H,...K)=>{if(H<G.logLevel)return;const Ge=(new Date).toISOString(),ke=re[H];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[ke](`[${Ge}]  ${G.name}:`,...K)};class de{constructor(H){this.name=H,this._logLevel=se,this._logHandler=pe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function ae(G){c.forEach(H=>{H.setLogLevel(G)})}function he(G,H){for(const K of c){let Ge=null;H&&H.level&&(Ge=O[H.level]),K.userLogHandler=null===G?null:(ke,Se,...nt)=>{const ve=nt.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(Ye){return null}}).filter(Ce=>Ce).join(" ");Se>=(null!=Ge?Ge:ke.logLevel)&&G({level:ee[Se].toLowerCase(),message:ve,args:nt,type:ke.name})}}}},8766:(Ke,_e,N)=>{N.d(_e,{Lj:()=>Me,X3:()=>it});var c=N(5861);let O,se;const de=new WeakMap,ae=new WeakMap,he=new WeakMap,G=new WeakMap,H=new WeakMap;let ke={get($,Ee,Z){if($ instanceof IDBTransaction){if("done"===Ee)return ae.get($);if("objectStoreNames"===Ee)return $.objectStoreNames||he.get($);if("store"===Ee)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ce($[Ee])},set:($,Ee,Z)=>($[Ee]=Z,!0),has:($,Ee)=>$ instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in $};function ve($){return"function"==typeof $?function nt($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...Ee){return $.apply(Ye(this),Ee),Ce(de.get(this))}:function(...Ee){return Ce($.apply(Ye(this),Ee))}:function(Ee,...Z){const ie=$.call(Ye(this),Ee,...Z);return he.set(ie,Ee.sort?Ee.sort():[Ee]),Ce(ie)}}($):($ instanceof IDBTransaction&&function Ge($){if(ae.has($))return;const Ee=new Promise((Z,ie)=>{const te=()=>{$.removeEventListener("complete",me),$.removeEventListener("error",ue),$.removeEventListener("abort",ue)},me=()=>{Z(),te()},ue=()=>{ie($.error||new DOMException("AbortError","AbortError")),te()};$.addEventListener("complete",me),$.addEventListener("error",ue),$.addEventListener("abort",ue)});ae.set($,Ee)}($),(($,Ee)=>Ee.some(Z=>$ instanceof Z))($,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,ke):$)}function Ce($){if($ instanceof IDBRequest)return function K($){const Ee=new Promise((Z,ie)=>{const te=()=>{$.removeEventListener("success",me),$.removeEventListener("error",ue)},me=()=>{Z(Ce($.result)),te()},ue=()=>{ie($.error),te()};$.addEventListener("success",me),$.addEventListener("error",ue)});return Ee.then(Z=>{Z instanceof IDBCursor&&de.set(Z,$)}).catch(()=>{}),H.set(Ee,$),Ee}($);if(G.has($))return G.get($);const Ee=ve($);return Ee!==$&&(G.set($,Ee),H.set(Ee,$)),Ee}const Ye=$=>H.get($);function it($,Ee,{blocked:Z,upgrade:ie,blocking:te,terminated:me}={}){const ue=indexedDB.open($,Ee),Pe=Ce(ue);return ie&&ue.addEventListener("upgradeneeded",lt=>{ie(Ce(ue.result),lt.oldVersion,lt.newVersion,Ce(ue.transaction))}),Z&&ue.addEventListener("blocked",()=>Z()),Pe.then(lt=>{me&&lt.addEventListener("close",()=>me()),te&&lt.addEventListener("versionchange",()=>te())}).catch(()=>{}),Pe}function Me($,{blocked:Ee}={}){const Z=indexedDB.deleteDatabase($);return Ee&&Z.addEventListener("blocked",()=>Ee()),Ce(Z).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],He=new Map;function je($,Ee){if(!($ instanceof IDBDatabase)||Ee in $||"string"!=typeof Ee)return;if(He.get(Ee))return He.get(Ee);const Z=Ee.replace(/FromIndex$/,""),ie=Ee!==Z,te=De.includes(Z);if(!(Z in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!Ie.includes(Z))return;const me=function(){var ue=(0,c.Z)(function*(Pe,...lt){const jt=this.transaction(Pe,te?"readwrite":"readonly");let Lt=jt.store;return ie&&(Lt=Lt.index(lt.shift())),(yield Promise.all([Lt[Z](...lt),te&&jt.done]))[0]});return function(lt){return ue.apply(this,arguments)}}();return He.set(Ee,me),me}!function Se($){ke=$(ke)}($=>uk(ak({},$),{get:(Ee,Z,ie)=>je(Ee,Z)||$.get(Ee,Z,ie),has:(Ee,Z)=>!!je(Ee,Z)||$.has(Ee,Z)}))},5861:(Ke,_e,N)=>{function c(O,se,re,pe,de,ae,he){try{var G=O[ae](he),H=G.value}catch(K){return void re(K)}G.done?se(H):Promise.resolve(H).then(pe,de)}function ee(O){return function(){var se=this,re=arguments;return new Promise(function(pe,de){var ae=O.apply(se,re);function he(H){c(ae,pe,de,he,G,"next",H)}function G(H){c(ae,pe,de,he,G,"throw",H)}he(void 0)})}}N.d(_e,{Z:()=>ee})}},Ke=>{Ke(Ke.s=2997)}]);